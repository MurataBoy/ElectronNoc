{"version":3,"sources":["app.module.js","error/httpErrorHandler.service.js","error/pcFormatErrors.filter.js","error/stateErrorHandler.js","extensions/pcODataFilterExtensions.js","extensions/stringExtensions.js","filters/pcArrayColumnToString.filter.js","filters/pcAsPercentageOf.filter.js","filters/pcCamelCasetoHumanFilter.js","filters/pcDateOnly.filter.js","filters/pcLocalTime.filter.js","filters/pcPhoneNumber.filter.js","filters/pcPointValue.filter.js","filters/pcStringToNumber.filter.js","filters/pcTagValue.filter.js","form/pcAutofocus.directive.js","form/pcBusyButton.directive.js","form/pcCompareTo.directive.js","form/pcValidate.directive.js","http/httpTokenProvider.service.js","http/pcApiClient.service.js","http/RefreshClient.js","overlays/pcPanelLoad.component.js","overlays/pcSpinner.component.js","routeStateHelpers/pcRouteState.service.js","routeStateHelpers/pcStateChangeEvents.js","routeStateHelpers/validUserState.service.js","security/pcCurrentUser.service.js","security/pcFormEncode.service.js","security/pcOauth.service.js","security/pcUserRoles.service.js","utils/pcAddress.js","utils/pcAlert.service.js","utils/pcBodyClass.js","utils/pcCommon.events.js","utils/pcErrorFromResponse.js","utils/pcModal.service.js","utils/pcOnLostFocus.directive.js","utils/pcTags.js","utils/pcToast.component.js","curtailments/dashboard/pcCurtailmentDashboard.component.js","curtailments/dashboard/pcProgramCard.component.js","curtailments/layout/pcProgramCurtailmentStatus.component.js","curtailments/layout/pcProgramSummary.component.js","curtailments/summary/pcCurtailmentSummary.component.js","customers/addEdit/pcAddEditCustomerModal.component.js","customers/dashboard/pcCustomerDashboard.component.js","customers/summary/pcCustomerSummary.component.js","groups/activation/pcGroupActivation.component.js","groups/activation/pcThingActivation.component.js","groups/activity/pcGroupActivity.component.js","groups/addEdit/pcAddEditGroupModal.component.js","groups/dashboard/pcGroupCard.component.js","groups/dashboard/pcGroupDashboard.component.js","groups/layout/pcGroupHeader.component.js","groups/membership/pcAddGroupMembershipModal.component.js","groups/membership/pcGroupMembership.component.js","groups/membership/pcMembershipAddSelector.component.js","groups/membership/pcMembershipEditButtons.component.js","groups/schedule/pcAddEditGroupScheduleModal.component.js","groups/schedule/pcGroupSchedules.component.js","groups/schedule/pcScheduleRow.component.js","groups/summary/pcGroupSignalState.component.js","groups/summary/pcGroupSummary.component.js","customers/sites/addEdit/pcAddEditSiteModal.component.js","customers/sites/contacts/pcAddEditContactModal.component.js","customers/sites/contacts/pcSiteContacts.component.js","customers/sites/layout/pcSiteHeader.component.js","customers/sites/summary/pcSiteBids.component.js","customers/sites/summary/pcSiteOptButton.component.js","customers/sites/summary/pcSiteReductionHistory.component.js","customers/sites/summary/pcSiteStrategies.component.js","customers/sites/summary/pcSiteSummary.component.js","templates.js","curtailments/curtailments.routes.js","customers/customers.routes.js","groups/groups.events.js","groups/groups.routes.js","groups/pcRecentGroupActivity.component.js","layout/pcHeader.component.js","mapExample/mapExample.component.js","mapExample/mapExample.routes.js","security/pcForgotPasswordForm.component.js","security/pcLoginForm.component.js","security/pcResetPasswordForm.component.js","security/security.route.js","shared/pcAddressAutocomplete.directive.js","shared/pcConfirmButton.component.js","shared/pcDropdown.component.js","shared/pcEmptySection.component.js","shared/pcMap.component.js","shared/pcStatusArcs.component.js","shared/pcTagSelector.component.js","shared/pcTextSearch.component.js","shared/pcTimeTicker.component.js"],"names":["configureServices","$animateProvider","localStorageServiceProvider","pcConfig","setPrefix","appName","classNameFilter","configureRouting","$locationProvider","$urlRouterProvider","$urlMatcherFactoryProvider","html5Mode","otherwise","strictMode","$inject","angular","module","window","app","config","httpErrorHandler","$q","$injector","$log","hasSuitableMessage","rejection","data","message","length","error","canShowActionFailed","method","handleError","bypassGlobalErrorHandler","reject","status","warn","pcCurrentUser","get","clearToken","$state","go","authSvc","logout","responseError","factory","$httpProvider","interceptors","push","filter","input","indexOf","stateErrorHandler","$rootScope","$on","event","unfoundState","fromState","fromParams","log","preventDefault","toState","toParams","undefined","run","_typeof","Symbol","iterator","obj","constructor","PowerConnect","containsFilter","fieldName","values","logicalOperator","_","forEach","value","OData","String","prototype","startsWith","searchString","position","this","lastIndexOf","valueFor","val","toString","toLowerCase","pcArrayColumnToString","items","sortBy","field","chain","map","x","join","percentage","denominator","charAt","toUpperCase","substr","replace","dateOnly","moment","utc","format","localTime","inferOptions","arg1","arg2","options","tz","zone","timezone","name","formatString","defaultTimezone","defaultFormatString","parseFormats","ISO_8601","guess","inputMomement","$filter","point","currentValue","unit","trim","tags","unitTag","first","parseInt","tagCollection","tag","Tags","tagValue","pcAutoFocus","$timeout","tryShowElement","element","showAttempts","is","focus","scope","link","directive","pcBusyButton","busy","attributes","$watch","newValue","oldValue","gifColor","hasClass","loadingGif","toggleClass","append","find","remove","PcCompareTo","require","otherModelValue","ignoreCase","ngModel","$validators","pcCompareTo","modelValue","$validate","controller","showValidationError","vm","$form","$submitted","$valid","$scope","$element","$attrs","childElement","$","console","attr","transclude","controllerAs","template","httpTokenProvider","request","url","apiUrlBase","headers","profile","loggedIn","Authorization","token","response","_response","when","pcApiClient","$http","$interval","post","resource","body","requestConfig","version","_getUrl","put","deleteAction","_getVersion","ver","defaultVersion","getRefreshClientForComponent","RefreshClient","delete","service","component","init","currentDestroy","$onDestroy","clearIntervals","poll","frequencyInSeconds","Rx","Observable","create","obs","intervalHandle","executeRequest","$ctrl","requestInfo","refreshNow","observable","finalUrl","Function","then","onNext","onError","cancel","pcPanelLoadCtlr","onChanges","changesObj","isLoaded","showLoading","$apply","$onChanges","bindings","templateUrl","pcRouteState","model","setToState","state","getToState","pcStateChangeEvents","validUserState","toParam","fromParam","allowAnonymous","save","returnState","inherit","localStorageService","saveUser","set","USERKEY","removeUser","clearProfile","username","expiresIn","rememberMe","firstName","lastName","roles","hasRole","role","some","r","initialize","fullname","_loadUser","localUser","clear","pcFormEncode","pairs","encodeURIComponent","pcOauth","login","password","configuration","Content-Type","grant_type","rsp","defer","_processToken","all","_getUserProfile","resolve","err","promise","access_token","expires_in","resourcePath","select","pcUserRoles","nocUser","connectAdmin","connectManager","connectUser","superUser","genesisUser","demoManager","genesisAdmin","skySparkAdmin","getGeoCoordFromPosition","geoPosition","lat","lng","getPositionFromGeoCoord","location","split","parseFloat","getAddressFromTags","street","city","zip","getAddressObjectFromTags","geoCoord","address1","Address","success","$broadcast","CommonEvents","alertSuccess","JSON","stringify","alertError","info","alertInfo","pcBodyClass","stateChange","newVal","isDefined","bodyClass","stateClass","_setClass","newClass","themeClass","document","getElementsByTagName","className","result","ErrorFromResponse","$modal","$animate","disableAnimate","querySelector","enabled","svc","open","$modalInstance","$modalData","modalData","size","animate","openConfirmation","title","yesText","noText","$document","onClick","e","target","contains","stopPropagation","onLostFocus","onKeyDown","key","keyCode","unsubscribe","removeEventListener","addEventListener","restrict","setTag","targetTag","removeTag","t","hasTag","hasAnyOfTheseTags","found","includes","getODataTagQueryString","queryString","pcToastCtrl","onInit","alertSuccessHandler","handleNewAlerts","alertInfoHandler","alertErrorHandler","onDestroy","alert","toast","id","Date","getTime","toasts","close","index","findIndex","splice","$onInit","pcAlert","_this","refreshable","empty","subscribe","programs","showDetails","programId","program","programSummary","odata","refreshInterval","pcAddEditCustomerController","existingCustomer","isInEditMode","customer","extend","skySparkProjectName","virtuWattUsername","virtuWattPassword","isInAddMode","submit","isSaving","customerToSave","type","convertFieldsToTags","_odataOptions","uuid","resp","modalInstance","isDeleting","dismiss","pcCustomerDashboardController","pcModal","showAddCustomerModal","totalCustomers","customers","sortedIndexBy","deviceStatus","devicesOffine","totalEnumeratedDevices","equipmentOutStatus","thingsOptedOut","totalEnumeratedThings","nextPage","isBusy","nextUrl","_retrieveData","search","text","customerUrl","isFiltered","totalCount","concat","sitesUrl","responses","siteCount","sites","siteMapNumber","each","site","addSiteToMarkers","markers","label","editCustomer","addSite","customerUuid","newSite","getSiteAddress","pcGroupActivationController","group","isGroupActive","strategy","toggleGroupActivation","activating","deactivating","finished","GroupEvents","activated","deactivated","activeText","inactiveText","micro","pcThingActivationController","thing","isActive","isOptedIn","toggleActivation","loadData","uri","groupUuid","filterString","groupActivity","groupByDay","logs","groups","groupBy","timestampUtc","local","date","formatEntryType","isActivationEntry","activityType","isDeactivationEntry","getDateLabel","now","dayDiff","diff","applyFilter","isFiltering","filterClauses","startDate","toJSON","endDate","add","activityTypes","display","existingGroup","description","isPrivate","convertDescriptionToTag","groupToSave","convertIsPrivateToTag","removeGroup","isBusyDeleting","deleteAll","deleted","statusText","hideRemove","showEditModal","pcGroupDashboardController","setupDataRefresh","groupUrl","showAddGroupModal","groupDeletedHandle","pcGroupHeaderController","counter","pcAddGroupMembershipModalController","tagsToFilterOn","pcGroupMembershipController","addMembers","refreshableDataObservable","getMembershipCount","things","onTagsChanged","baseUrl","thingsExpand","groupsExpand","tagExpandString","tagFilterString","_toConsumableArray","arr","Array","isArray","i","arr2","from","pcMembershipAddSelectorController","$watchCollection","_refreshItems","addSelected","itemsToAdd","childGroupUuids","thingUuids","_vm$group$vm$type","newItems","item","apply","_getShowableItems","selectAll","selected","results","potentialItems","potentialListItem","existingItem","queryFilter","pcMembershipEditButtonsController","allSelected","every","collection","done","editMode","removeSelected","working","selectedCount","uuidsToPost","finalDataToPost","existingGroupSchedule","groupSchedule","parseInputModelFields","recurrence","durationMinutes","startDateLocal","startDateUtc","startTime","notificationRecipientTags","buildRecipientTags","notificationRecipients","recipients","recipient","buildReturnModelFields","groupScheduleToSave","schedulesUrl","schedule","buildRecipientStringFromTags","recipientString","removeGroupSchedule","GroupScheduleEvents","durationValues","recurrenceValues","pcGroupSchedulesController","groupSchedulesUrl","groupSchedules","showAddModal","deletedHandle","pcScheduleRowController","pcGroupSignalStateController","activatedHandle","handleActivationStateChange","deactivatedHandle","refreshOrSetup","setActiveBasedOnTags","groupInfoUrl","membershipUrl","groupInfoResult","membershipResult","groupInfo","membership","loaded","buildSignalStateInfo","lastStartedBy","startedAt","thingsActivated","thingsActive","calculateThingsActive","thingCount","startedAtUtc","pcGroupSummaryController","signalStateLoaded","signalStateIsLoaded","setLoaded","activityLoaded","activityIsLoaded","generalInfoIsLoaded","totalMembershipCount","metrics","totalChildGroups","totalThings","pcAddEditSiteController","_siteToSave$features","errorMsg","geoAddress","siteToSave","features","siteType","iso","_convertGeoAddressToTags","parentGroupUuid","listOfEndpoints","_loadFeatures","_getDropDownList","timezones","isos","siteTypes","_loadExistingSite","_loadResources","deferredRequest","_setActiveFeatures","dropdownCollection","olsonTz","siteUuid","searchAddress","feature","calls","_loadWirelessCarriers","_loadSite","contactId","contact","wirelessCarriers","workPhone","extension","mobilePhone","wirelessCarrier","emailFormats","notificationPreferences","parents","setFirstPageLoad","nextSiteContactsUrl","siteContactsUrl","nextCustomerContactsUrl","customerContactsUrl","contacts","totalSiteContacts","totalCustomerContacts","retrieveData","searchText","setLoader","loadCustomerContacts","loadSiteContacts","updateContacts","contactType","addType","orderBy","showAddContactModal","showEditContactModal","updatedContact","pcSiteHeaderController","$window","back","history","bidsUrl","siteBids","click","which","historyUrl","siteHistory","pcSiteSummaryController","siteUrl","strategyUrl","strategies","customerName","siteAddress","getLocalTimeAtSite","editSite","localTimeUtc","siteBidsLoaded","siteBidsIsLoaded","siteReductionHistoryLoaded","siteReductionHistoryIsLoaded","siteStrategiesLoaded","siteStrategiesIsLoaded","$templateCache","routes","$stateProvider","abstract","$stateParams","views","@","pcRecentGroupActivity","groupActivityUrl","navHeaderCtlr","isVisible","currentState","hideHeader","dontRedirect","geocode","geocoder","address","geocodeAddress","geocodeResult","geometry","google","maps","Geocoder","pcForgotPasswordFormCtlr","$location","submitting","buttonText","returnUrl","resetPasswordUrl","protocol","host","email","shortDelayThenRun","submitted","callback","loginFormCtlr","homeRoute","loginText","loggingIn","resetPasswordFormCtlr","params","resetToken","confirmPassword","authorizationRouteProvider","resultObject","biasOnUsersLocation","biasOnLocation","_cleanupListContain","autocomplete","places","Autocomplete","types","navigator","geolocation","getCurrentPosition","coords","latitude","longitude","circle","Circle","center","radius","accuracy","setBounds","getBounds","addListener","place","getPlace","streetNumber","getName","finalAddress","pacContainer","getElementsByClassName","parentNode","removeChild","confirmed","stateChangeDelayMilliseconds","skipConfirm","doWork","confirmTitle","action","calculateTimeout","failedAlertMessage","finish","elapsed","buttonClass","buttonNgClass","pcDropdownController","required","updateSelectedDisplay","on","showMenu","option","defaultOption","selectedDisplay","selectedOption","form","addText","icon","onAdd","setupMap","markersInUse","marker","setMap","bounds","LatLngBounds","googleMarker","Marker","getPosition","openInfoWindow","fitBounds","addListenerOnce","getZoom","maxZoom","setZoom","trigger","infoWindow","InfoWindow","content","Map","getElementById","zoom","styles","featureType","elementType","stylers","invert_lightness","saturation","lightness","gamma","hue","isHorizontal","setDefaults","allTagsValid","showList","allowNewTags","onTagSelected","onTagRemoved","transformTagToObject","existingTag","parts","allTags","kind","tagEntered","validateTag","isMarker","uiSelectCtrl","searchInput","displayedTags","$tag","$tags","isWrongFormat","validateTagName","isTooShort","hasSpaces","test","tagNameRegex","regEx","RegExp","tagRemoved","filteredTags","toggleTagList","showTagList","hideTagList","addTag","searchTags","query","differenceWith","excludedTags","formatTag","getFilteredList","placeholder","autofocus","$controllers","pcTagSelectorCtrl","pcTextSearch","Text_Search","$rollbackViewValue","toLower","textSeperator","$text","modelOptions","debounce","inputDelay","pcTimeTickerController","incomingTimeFormat","showSeconds","updateDurationDisplay","endTime","refreshHandle","timeFrom","timeDisplay","duration","days","hours","minutes","seconds"],"mappings":"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AA0C,k+BAC7DshB,EAAethB,IAAI,yCAAyC,oWAC5DshB,EAAethB,IAAI,yCAAyC,qCAC5DshB,EAAethB,IAAI,iDAAiD,0PACpEshB,EAAethB,IAAI,wDAAwD,iOAC3EshB,EAAethB,IAAI,sDAAsD,0IACzEshB,EAAethB,IAAI,iDAAiD,gRACpEshB,EAAethB,IAAI,mEAAmE,iuBACtFshB,EAAethB,IAAI,0DAA0D,qzBAC7EshB,EAAethB,IAAI,gDAAgD,8YACnEshB,EAAethB,IAAI,oEAAoE,wYACvFshB,EAAethB,IAAI,0DAA0D,wUAC7EshB,EAAethB,IAAI,+DAA+D,4QAClFshB,EAAethB,IAAI,8DAA8D,8nDACjFshB,EAAethB,IAAI,6DAA6D,0gDAChFshB,EAAethB,IAAI,yDAAyD,4lCAC5EshB,EAAethB,IAAI,yDAAyD,mvBAC5EshB,EAAethB,IAAI,yDAAyD,itBAC5EshB,EAAethB,IAAI,qDAAqD,6gEACxEshB,EAAethB,IAAI,wDAAwD,8wGAC3EshB,EAAethB,IAAI,kDAAkD,k/BACrEshB,EAAethB,IAAI,uDAAuD,4jCAC1EshB,EAAethB,IAAI,0CAA0C,2mBAC7DshB,EAAethB,IAAI,iDAAiD,mRACpEshB,EAAethB,IAAI,iEAAiE,6nBACpFshB,EAAethB,IAAI,yDAAyD;AAC5EshB,EAAethB,IAAI,+DAA+D,oxBAClFshB,EAAethB,IAAI,+DAA+D,sdAClFshB,EAAethB,IAAI,iEAAiE,09FACpFshB,EAAethB,IAAI,sDAAsD,+7BACzEshB,EAAethB,IAAI,mDAAmD,q+BACtEshB,EAAethB,IAAI,uDAAuD,0zBAC1EshB,EAAethB,IAAI,mDAAmD,ypCACtEshB,EAAethB,IAAI,gEAAgE,i2EACnFshB,EAAethB,IAAI,oEAAoE,6pFACvFshB,EAAethB,IAAI,6DAA6D,m0DAChFshB,EAAethB,IAAI,mDAAmD,+hBACtEshB,EAAethB,IAAI,yDAAyD,2WAC5EshB,EAAethB,IAAI,wDAAwD,kbAC3EshB,EAAethB,IAAI,6DAA6D,kg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","file":"app-50eded2bec.min.js","sourcesContent":["(function () {\r\n    'use strict';\r\n    // Foundation for apps off canvas template\r\n    angular.module('foundation', ['foundation.core','foundation.common','foundation.offcanvas']);\r\n    // End Foundation for apps patch above\r\n\r\n    window.app = angular.module('app', [\r\n        'ngAnimate',\r\n        'ngMessages',\r\n        'ui.mask',\r\n        'ui.router',\r\n        'LocalStorageModule',\r\n        'foundation.common',\r\n        'foundation.offcanvas',\r\n        'highcharts-ng',\r\n        'mm.foundation',\r\n        'angular-progress-arc',\r\n        'ui.select',\r\n        'ng-foundation-datepicker',\r\n        'infinite-scroll'\r\n    ]);\r\n\r\n    window.app.config(configureServices);\r\n    window.app.config(configureRouting);\r\n    \r\n    function configureServices($animateProvider, localStorageServiceProvider, pcConfig) {\r\n\r\n        // Set the key for the local storage\r\n        localStorageServiceProvider.setPrefix(pcConfig.appName);\r\n\r\n        $animateProvider.classNameFilter(/^((?!(fa-spinner)).)*$/);\r\n    }\r\n\r\n    function configureRouting($locationProvider, $urlRouterProvider, $urlMatcherFactoryProvider) {\r\n        $locationProvider.html5Mode(false);\r\n        $urlRouterProvider.otherwise('login');\r\n        //NOTE: this allows routes to match with or without a trailing slash.\r\n        //      So /home/ is the same as /home.\r\n        $urlMatcherFactoryProvider.strictMode(false);\r\n    }\r\n\r\n})();","(function() {\r\n    'use strict';\r\n\r\n    window.app.factory('httpErrorHandler', httpErrorHandler);\r\n\r\n    //NOTE: This interceptor uses the injector directly to prevent a false-positive on a circular reference.\r\n    httpErrorHandler.$inject = ['$q', '$injector', '$log'];\r\n    \r\n    function httpErrorHandler($q, $injector, $log) {\r\n\r\n        return {\r\n            'responseError': handleError\r\n        };\r\n\r\n        function hasSuitableMessage(rejection) {\r\n\r\n            if (!rejection.data) {\r\n                return false;\r\n            }\r\n\r\n            if (rejection.data.message && rejection.data.message.length) {\r\n                return true;\r\n            }\r\n\r\n            if (rejection.data.error && rejection.data.error.message && rejection.data.error.message.length) {\r\n                return true;\r\n            }\r\n\r\n            return false;\r\n        }\r\n\r\n        function canShowActionFailed(rejection) {\r\n            return rejection &&\r\n                rejection.config &&\r\n                rejection.config.method !== 'GET' &&\r\n                hasSuitableMessage(rejection);\r\n        }\r\n\r\n        function handleError(rejection) {\r\n            if (rejection && rejection.config && rejection.config.bypassGlobalErrorHandler) {\r\n                return $q.reject(rejection);\r\n            }\r\n\r\n            if (rejection && rejection.status === 401) {\r\n                //TODO: Need to put a notification here. \r\n                $log.warn('Your secure session has expired.  Please log in again.');\r\n                // Need to clear the token to prevent the code from trying to use the\r\n                // expired token again\r\n                var pcCurrentUser = $injector.get('pcCurrentUser');\r\n                pcCurrentUser.clearToken();\r\n                var $state = $injector.get('$state');\r\n                $state.go('login');\r\n            } else if (rejection.status === 502) {\r\n                $log.error('Preflight failure.  Please log in again.');\r\n                var authSvc = $injector.get('pcOauth');\r\n                authSvc.logout();\r\n            } else if (canShowActionFailed(rejection)) {\r\n                $log.error('Action Failed.  ', (rejection.data.message || rejection.data.error.message));\r\n            } else {\r\n                $log.error('There was a problem with your last action.  Please try again.' +\r\n                            ' If the problem persists, please contact support');\r\n            }\r\n\r\n            return $q.reject(rejection);\r\n        }\r\n    }\r\n\r\n    window.app.config(['$httpProvider', function ($httpProvider) {\r\n        $httpProvider.interceptors.push('httpErrorHandler');\r\n    }]);\r\n})();","(function() {\r\n    'use strict';\r\n\r\n    window.app.filter('pcFormatErrors', function () {\r\n        return function (input) {\r\n            if (input === null || typeof (input) !== 'string') {\r\n                return input;\r\n            }\r\n\r\n            if (input.indexOf('_ERR_') >= 0) {\r\n                return 'ERROR';\r\n            }\r\n\r\n            return input;\r\n        };\r\n    });\r\n})();","(function () {\r\n    window.app.run(stateErrorHandler);\r\n\r\n    function stateErrorHandler($rootScope, $state, $log) {\r\n        $rootScope.$on('$stateNotFound', function (event, unfoundState, fromState, fromParams) {\r\n            // TODO: Probably need to log this on the server so that broken links can be\r\n            // easily identified\r\n            $log.log('Failed to find state for ', unfoundState);\r\n            $log.log('When navigating from ', fromState);\r\n            event.preventDefault();\r\n            $state.go('login');\r\n        });\r\n\r\n        $rootScope.$on('$stateChangeError', function (event, toState, toParams, fromState, fromParams, error) {\r\n            // TODO: Probably need to log this on the server so that broken links can be\r\n            // easily identified\r\n            event.preventDefault();\r\n            // Send the user back to the page they were comming from if not null, else\r\n            // send them back to the login page\r\n            if (null !== fromState && undefined !== fromState) {\r\n                $state.go(fromState, fromParams);\r\n            }\r\n        });\r\n    }\r\n})();","window.PowerConnect = window.PowerConnect || {};\r\n(function () {\r\n    window.PowerConnect.OData = {\r\n        containsFilter: containsFilter\r\n    };\r\n\r\n    function containsFilter(fieldName, values, logicalOperator) {\r\n        let filter = '';\r\n\r\n        if (!values || typeof(values) !== 'object') {\r\n            return filter;\r\n        }\r\n\r\n        _.forEach(values, function(value) {\r\n            filter += filter !== '' ? ` ${logicalOperator} ` : '';\r\n            filter += `contains(tolower(${fieldName}), tolower('${value}'))`;\r\n        });\r\n\r\n        return filter;\r\n    }\r\n})();","'use strict';\r\n\r\nif (!String.prototype.startsWith) {\r\n    /* jshint -W121 */\r\n    String.prototype.startsWith = function (searchString, position) {\r\n        position = position || 0;\r\n        return this.lastIndexOf(searchString, position) === position;\r\n    };\r\n}\r\n\r\nif (!String.valueFor) {\r\n    String.valueFor = function(val) {\r\n        return val != null ? val.toString().toLowerCase() : null;\r\n    };\r\n}","(function() {\r\n    window.app.filter('pcArrayColumnToString', pcArrayColumnToString);\r\n\r\n    function pcArrayColumnToString() {\r\n        return function (items, fieldName, sortBy) {\r\n            if (items === null || typeof (items) !== 'object') {\r\n                return items;\r\n            }\r\n\r\n            var field = fieldName || 'name';\r\n            \r\n            var chain = _.chain(items);\r\n            \r\n            if (sortBy) {\r\n                chain = chain.sortBy(sortBy);\r\n            }\r\n\r\n            return chain.map(x =>  x[field]).join(', ').value();\r\n        };\r\n    }\r\n})();","(function () {\r\n    window.app.filter('pcAsPercentageOf', percentage);\r\n\r\n    function percentage() {\r\n        return function (input, denominator) {\r\n            if (!denominator || denominator === 0) {\r\n                // this will happen when the component is loaded, but the data\r\n                // has not yet been returned.  This is normal\r\n                return 0;\r\n            }\r\n\r\n            return input > 0 ? (input / denominator) : 0;\r\n        };\r\n    }\r\n})();","(function() {\r\n    'use strict';\r\n\r\n    window.app.filter('pcCamelCaseToHuman', function () {\r\n        return function (input) {\r\n            if (input == null || typeof (input) !== 'string') {\r\n                return '';  \r\n            } \r\n            return input.charAt(0).toUpperCase() + input.substr(1).replace(/[A-Z]/g, ' $&');\r\n        };\r\n    });\r\n})();","(function () {\r\n    window.app.filter('pcDateOnly', dateOnly);\r\n\r\n    function dateOnly() {\r\n        return function (input) {\r\n\r\n            if (input === null || typeof (input) !== 'string' || input === '') {\r\n                return input;\r\n            }\r\n\r\n            return moment.utc(input).format('MMM D YYYY');\r\n        };\r\n    }\r\n})();","(function() {\r\n    window.app.filter('pcLocalTime', localTime);\r\n\r\n    /*\r\n    This filter can be used to normalize a datetime string for display.  Use it like this in your view:\r\n\r\n    <span>{vm.timestampUtc | pcLocalTime}</span>    //Returns a string like 07/04/2017 12:00:15 pm CDT\r\n\r\n    You can specify a custom format string like so:\r\n\r\n    <span>{vm.timestampUtc | pcLocalTime:'MM/DD/YYYY'}</span> //Returns a string like 07/04/2017.\r\n\r\n    The browser's local timezone is inferred by default, but you can change that by specifying an Olson timezone.  \r\n\r\n    <span>{vm.timestampUtc | pcLocalTime:'America/Chicago'}</span> \r\n\r\n    You can pass multiple parameters if you wish.  The order does not matter.  It will be inferred \r\n    by the filter. \r\n\r\n    These calls are equivalent: \r\n\r\n    <span>{vm.timestampUtc | pcLocalTime:'America/Chicago':'MM/DD/YYYY'}</span> \r\n    <span>{vm.timestampUtc | pcLocalTime:'MM/DD/YYYY':'America/Chicago'}</span> \r\n\r\n    */\r\n    function localTime() {\r\n\r\n        const parseFormats = [moment.ISO_8601, 'MM/DD/YYYY HH:mm:ss a', 'MM/DD/YYYY HH:mm a', 'MM/DD/YYYY'];\r\n        const defaultTimezone = moment.tz.guess();\r\n        const defaultFormatString = 'M/D/YYYY h:mm:ss a z';\r\n\r\n        //NOTE: Filters in AJS do not support named or optional parameters.  Rather than force everyone to respecify\r\n        //      the format string if they want to change the timezone, I made this func infer the parameters magically. \r\n        return function (input, arg1, arg2) {\r\n            if (input === null || typeof (input) !== 'string' || input === '') {\r\n                return 'n/a';\r\n            }\r\n            const options = inferOptions(arg1, arg2);\r\n\r\n            const inputMomement = moment.utc(input, parseFormats).tz(options.timezone);\r\n\r\n            return inputMomement.format(options.formatString);\r\n        };\r\n\r\n        function inferOptions(arg1, arg2) {\r\n            const options = {};\r\n\r\n            if (moment.tz.zone(arg1)) {\r\n                options.timezone = moment.tz.zone(arg1).name;\r\n\r\n                if (arg2) {\r\n                    options.formatString = arg2;\r\n                }\r\n            }\r\n            else if (moment.tz.zone(arg2)) {\r\n                options.timezone = moment.tz.zone(arg2).name;\r\n\r\n                options.formatString = arg1;\r\n            }\r\n            else {\r\n                options.formatString = arg1;\r\n            }\r\n\r\n            options.timezone = options.timezone || defaultTimezone;\r\n            options.formatString = options.formatString || defaultFormatString;\r\n\r\n            return options;\r\n        }\r\n    }\r\n})();","(function () {\r\n    'use strict';\r\n\r\n    window.app.filter('pcPhoneNumber', function () {\r\n        return function (input) {\r\n            if (input === null || typeof (input) !== 'string') {\r\n                return input;\r\n            }\r\n\r\n            if (input.length !== 10) {\r\n                return input;\r\n            }\r\n\r\n            return '(' + input.substr(0, 3) + ') ' + input.substr(3, 3) + '-' + input.substr(6, 4);\r\n        };\r\n    });\r\n})();","(function() {\r\n    'use strict';\r\n\r\n    window.app.filter('pcPointValue', function ($filter) {\r\n        return function (point) {\r\n            if (!point || point.currentValue == null) {\r\n                return '--';\r\n            }\r\n\r\n            var unit = '';\r\n\r\n            if (point.unit) {\r\n                unit = ' ' + point.unit.trim();\r\n            }\r\n            else if (point.tags) {\r\n                var unitTag = _(point.tags).filter({name:'unit'}).first();\r\n                unit = unitTag && unitTag.value ? ' ' + unitTag.value.trim() : '';\r\n            }\r\n\r\n            return $filter('uppercase')(point.currentValue) + unit;\r\n        };\r\n    });\r\n})();","(function () {\r\n    window.app.filter('pcStringToNumber', function () {\r\n        return function (input) {\r\n            return parseInt(input, 10);\r\n        };\r\n    });\r\n})();","(function() {\r\n    window.app.filter('pcTagValue', filter);\r\n\r\n    function filter() {\r\n        return function (tagCollection, tag) {\r\n            return window.PowerConnect.Tags.tagValue(tagCollection, tag);\r\n        };\r\n    }\r\n})();","(function() {\r\n\r\n    //Use this when you're trying to autofocus something that is dynamically loaded.\r\n    window.app.directive('pcAutofocus', pcAutoFocus);\r\n\r\n    pcAutoFocus.$inject = ['$timeout'];\r\n    function pcAutoFocus($timeout) {\r\n        var showAttempts = 0;\r\n\r\n        return {\r\n            scope: {\r\n\r\n            },\r\n            link: function(scope, element) {\r\n\r\n                $timeout(function () {\r\n                    tryShowElement(element);\r\n                }, 500);\r\n            }\r\n        };\r\n\r\n        function tryShowElement(element) {\r\n\r\n            if (showAttempts++ === 50) {\r\n                return;\r\n            }\r\n\r\n            if (element.is(':visible')) {\r\n                element.focus();\r\n                return;\r\n            }\r\n\r\n            $timeout(function() {\r\n                tryShowElement(element);\r\n            }, 100);\r\n        }\r\n    }\r\n})();","(function () {\r\n    'use strict';\r\n\r\n    window.app.directive('pcBusyButton', pcBusyButton);\r\n\r\n    function pcBusyButton() {\r\n        return {\r\n            scope: {\r\n                busy: '=pcBusyButton',\r\n            },\r\n            link: function(scope, element, attributes) {\r\n                scope.$watch('busy', function onChange(newValue, oldValue) {\r\n                    if (newValue === undefined) {\r\n                        return;\r\n                    }\r\n\r\n                    if (newValue) {\r\n                        var gifColor = element.hasClass('alert') ? 'dark-red' :\r\n                                   element.hasClass('hollow') ? 'dark' : 'white';\r\n\r\n                        var loadingGif = '<img class=\"loading\" src=\"img/loading-' + gifColor + '.gif\">';\r\n                        \r\n                        element.toggleClass('busy', true);\r\n                        element.append(loadingGif);\r\n                    } else {\r\n                        element.toggleClass('busy', false);\r\n                        element.find('img').remove();\r\n                    }\r\n                });\r\n            }\r\n        };\r\n    }\r\n})();","'use strict';\r\n\r\n(function () {\r\n    window.app.directive('pcCompareTo', PcCompareTo);\r\n\r\n    function PcCompareTo() {\r\n        return {\r\n            require: 'ngModel',\r\n            scope: {\r\n                otherModelValue: '=pcCompareTo',\r\n                ignoreCase: '=?'\r\n            },\r\n            link: function(scope, element, attributes, ngModel) {\r\n\r\n                ngModel.$validators.pcCompareTo = function(modelValue) {\r\n                    if (scope.ignoreCase) {\r\n                        return (modelValue || '').toUpperCase() === (scope.otherModelValue || '').toUpperCase();\r\n                    }\r\n                    return modelValue === scope.otherModelValue;\r\n                };\r\n\r\n                scope.$watch('otherModelValue', function() {\r\n                    ngModel.$validate();\r\n                });\r\n            }\r\n        };\r\n    }\r\n})();","(function() {\r\n\r\n    window.app.directive('pcValidate', () => ({\r\n        require: '^form',\r\n        link: link,\r\n        scope: true,\r\n        transclude: true,\r\n        controllerAs: 'vm',\r\n        controller: controller,\r\n        template: `\r\n                <div ng-class=\"{'failed': vm.showValidationError()}\">\r\n                    <ng-transclude></ng-transclude>\r\n                    <div class=\"field-warning\" ng-messages ng-if=\"vm.showValidationError()\" for=\"vm.$form[vm.fieldName].$error\">\r\n                        <ng-messages-include src=\"/app/commonScripts/form/messages.template.html\"></ng-messages-include>\r\n                    </ng-messages>\r\n                </div>\r\n                `\r\n    }));\r\n\r\n    function controller() {\r\n        var vm = this;\r\n\r\n        vm.showValidationError = showValidationError;\r\n\r\n        function showValidationError() {\r\n            if (!vm.$form) {\r\n                return false;\r\n            }\r\n\r\n            if (!vm.fieldName) {\r\n                return false;\r\n            }\r\n\r\n            return vm.$form.$submitted && !vm.$form[vm.fieldName].$valid;\r\n        }\r\n    }\r\n\r\n    function link($scope, $element, $attrs, $form) {\r\n        var childElement = $('[name]', $element);\r\n\r\n        if (childElement.length === 0) {\r\n            console.error('pc-validate error: unable to find a child element with a name attribute.  Directive applied to: ',\r\n                          $element);\r\n        }\r\n\r\n        $scope.vm.$form = $form;\r\n        $scope.vm.fieldName = childElement.attr('name');\r\n    }\r\n\r\n})();","(function() {\r\n    'use strict';\r\n\r\n    window.app.factory('httpTokenProvider', httpTokenProvider);\r\n\r\n    function httpTokenProvider($q, pcConfig, pcCurrentUser) {\r\n        return {\r\n            request: function (config) {\r\n                if (!config.url || !config.url.startsWith(pcConfig.apiUrlBase)) {\r\n                    return config;\r\n                }\r\n\r\n                config.headers = config.headers || {};\r\n\r\n                if (pcCurrentUser.profile.loggedIn) {\r\n                    config.headers.Authorization = 'Bearer ' + pcCurrentUser.profile.token;\r\n                }\r\n                return config;\r\n            },\r\n            response: function (response) {\r\n                return response || $q.when(response);\r\n            }\r\n        };\r\n    }\r\n\r\n    window.app.config(['$httpProvider', function ($httpProvider) {\r\n        $httpProvider.interceptors.push('httpTokenProvider');\r\n    }]);\r\n})();","(function () {\r\n    'use strict';\r\n\r\n    window.app.service('pcApiClient', pcApiClient);\r\n\r\n    function pcApiClient($http, $interval, pcConfig) {\r\n        const defaultVersion = '1';\r\n        return {\r\n            post: post,\r\n            get: get,\r\n            put: put,\r\n            'delete': deleteAction,\r\n            getRefreshClientForComponent: getRefreshClientForComponent\r\n        };\r\n\r\n        function post(resource, body, requestConfig, version) {\r\n            return $http.post(_getUrl(resource, version), body, requestConfig);\r\n        }\r\n\r\n        function put(resource, body, requestConfig, version) {\r\n            return $http.put(_getUrl(resource, version), body, requestConfig);\r\n        }\r\n\r\n        function get(resource, requestConfig, version) {\r\n            return $http.get(_getUrl(resource, version), requestConfig);\r\n        }\r\n\r\n        function deleteAction(resource, requestConfig, version) {\r\n            return $http.delete(_getUrl(resource, version), requestConfig);\r\n        }\r\n        \r\n        function _getUrl(resource, version) {\r\n            if (resource.startsWith('http')) {\r\n                return resource;\r\n            }\r\n            \r\n            return pcConfig.apiUrlBase + _getVersion(version) + resource;\r\n        }\r\n\r\n        function _getVersion(version) {\r\n            let ver = version || defaultVersion;\r\n            \r\n            return 'v' + ver + '/';\r\n        }\r\n\r\n        function getRefreshClientForComponent(vm) {\r\n            return new RefreshClient(this, $interval, vm);\r\n        }\r\n    }\r\n})();","/*\r\n    This returns an observable from RxJs, that can be used to poll one or many things. It is designed\r\n    to be used from pcApiClient - not called directly.\r\n\r\n    Function: poll(url, frequencyInSeconds)\r\n    Parameters:\r\n        url: string or function of the url to be called. If a function, it will be re-evaluated with each poll\r\n        frequencyInSeconds: time to wait between polls\r\n\r\n    Function: refreshNow()\r\n    Description: forces all configured polls to be called again immediately. Useful for responding to events.\r\n\r\n    Examples (via pcApiClient):\r\n    (See RefreshClient.spec.js for more info)\r\n\r\n    Single call:\r\n        const refreshable = pcApiClient.getRefreshClientForComponent(vm);\r\n\r\n        refreshable.poll(groupUrl, 30 * 1000)\r\n            .catch(error => {\r\n                pcAlert.error({message: 'Failed to retrieve groups', error: error});\r\n                vm.isLoaded = true;\r\n                return Rx.Observable.empty();\r\n            })\r\n            .subscribe(response => {\r\n                if (response) {\r\n                    vm.groups = response.data.result;\r\n                }\r\n                vm.isLoaded = true;\r\n            });\r\n\r\n    Multiple:\r\n        refreshableDataObservable = pcApiClient.getRefreshClientForComponent(vm);\r\n\r\n        Rx.Observable.zip(\r\n            refreshableDataObservable.poll(groupInfoUrl, 30 * 1000),\r\n            refreshableDataObservable.poll(membershipUrl, 30 * 1000),\r\n            (groupInfoResult, membershipResult) => ({groupInfo: groupInfoResult.data, membership: membershipResult.data})\r\n        )\r\n        .catch(error => {\r\n            pcAlert.error({message: 'Failed to get signal state data', error: error});\r\n\r\n            if (vm.loaded) {\r\n                vm.loaded();\r\n            }\r\n\r\n            return Rx.Observable.empty();\r\n        })\r\n        .subscribe(result => {\r\n            vm.group = result.groupInfo;\r\n            var membership = result.membership;\r\n\r\n            setActiveBasedOnTags();\r\n            \r\n            vm.info = vm.isGroupActive ? buildSignalStateInfo(vm.group, membership) : undefined;\r\n\r\n            if (vm.loaded) {\r\n                vm.loaded();\r\n            }\r\n        });\r\n*/\r\n\r\n/*eslint-disable no-unused-vars*/\r\n//This is a global function constructor, used in other files.\r\nfunction RefreshClient(pcApiClient, $interval, component) {\r\n    /*eslint-enable no-unused-vars*/\r\n    const $ctrl = this;\r\n\r\n    $ctrl.component = component;\r\n    $ctrl.requestInfo = [];\r\n\r\n    $ctrl.poll = poll;\r\n    $ctrl.refreshNow = refreshNow;\r\n\r\n    init();\r\n\r\n    function init() {\r\n        const currentDestroy = component.$onDestroy;\r\n        component.$onDestroy = () => {\r\n            clearIntervals();\r\n\r\n            if (currentDestroy) {\r\n                currentDestroy();\r\n            }\r\n        };\r\n    }\r\n\r\n    function poll(url, frequencyInSeconds) {\r\n        return Rx.Observable.create(obs => {\r\n            const intervalHandle = $interval(() => {\r\n                executeRequest(url, obs);\r\n            }, frequencyInSeconds);\r\n\r\n            $ctrl.requestInfo.push({intervalHandle: intervalHandle, request: () => executeRequest(url, obs)});\r\n\r\n            executeRequest(url, obs);\r\n        });\r\n    }\r\n\r\n    function refreshNow() {\r\n        _.forEach($ctrl.requestInfo, request => {\r\n            request.request();\r\n        });\r\n    }\r\n\r\n    function executeRequest(url, observable) {\r\n        const finalUrl = url instanceof Function ? url() : url;\r\n\r\n        pcApiClient.get(finalUrl)\r\n            .then(response => {\r\n                observable.onNext(response);\r\n            })\r\n            .catch(response => {\r\n                observable.onError(response);\r\n                clearIntervals();\r\n            });\r\n    }\r\n\r\n    function clearIntervals() {\r\n        _.forEach($ctrl.requestInfo, request => {\r\n            $interval.cancel(request.intervalHandle);\r\n        });\r\n    }\r\n}","(function () {\r\n    'use strict';\r\n\r\n    window.app.component('pcPanelLoad', {\r\n        bindings: {\r\n            isLoaded: '<',\r\n            message: '<?'\r\n        },\r\n        transclude: true,\r\n        templateUrl: '/app/commonScripts/overlays/pcPanelLoad.template.html',\r\n        controller: pcPanelLoadCtlr,\r\n        controllerAs: 'vm'\r\n    });\r\n\r\n    function pcPanelLoadCtlr($timeout, $scope) {\r\n        var vm = this;\r\n\r\n        vm.message = vm.message || 'loading';\r\n\r\n        vm.showLoading = true;\r\n        vm.$onChanges = onChanges;\r\n        \r\n        function onChanges(changesObj) {\r\n            if (changesObj.isLoaded.currentValue) {\r\n                // Delay the closing of the spinner to provide a cleaner\r\n                // user experience when data comes back quickly\r\n                $timeout(() => {\r\n                    vm.showLoading = false;\r\n                    $scope.$apply();\r\n                }, 500);\r\n            } else {\r\n                // This will allow the loader to be re-enabled after a component\r\n                // has already been loaded.  An example use case is when searching\r\n                // data\r\n                vm.showLoading = true;\r\n            }\r\n        }\r\n    }\r\n})();","(function () {\r\n    'use strict';\r\n\r\n    window.app.component('pcSpinner', {\r\n        bindings: {\r\n            message: '='\r\n        },\r\n        templateUrl: '/app/commonScripts/overlays/pcSpinner.template.html',\r\n        controller: function() {},\r\n        controllerAs: 'vm'\r\n    });\r\n})();","(function() {\r\n    'use strict';\r\n    \r\n    window.app.service('pcRouteState', pcRouteState);\r\n    \r\n    function pcRouteState() {\r\n        this.model = {\r\n            toState: ''\r\n        };\r\n\r\n        this.setToState = function(state) {\r\n            this.model.toState = state;\r\n        };\r\n        \r\n        this.getToState = function() {\r\n            return this.model.toState;\r\n        };\r\n    }\r\n})();","(function () {\r\n    'use strict';\r\n\r\n    window.app.run(pcStateChangeEvents);\r\n\r\n    function pcStateChangeEvents($rootScope, pcRouteState) {\r\n        $rootScope.$on('$stateChangeSuccess', function (event, toState, toParams, fromState, fromParams) {\r\n            pcRouteState.setToState(toState);\r\n        });\r\n    }\r\n})();","(function () {\r\n    window.app.run(validUserState);\r\n\r\n    function validUserState($rootScope, $state, pcCurrentUser) {\r\n        $rootScope.$on('$stateChangeStart', function (event, toState, toParam, fromState, fromParam) {\r\n            \r\n            var allowAnonymous = toState.data && toState.data.allowAnonymous;\r\n\r\n            if (toState.name === 'Login') {\r\n                pcCurrentUser.clearToken();\r\n                pcCurrentUser.save();\r\n                return;\r\n            }\r\n\r\n            // If the page allows anonymous access then state change\r\n            if (!allowAnonymous) {\r\n                // Check if user is authenticated.  If authenticated allow\r\n                // state to change.\r\n                if (!pcCurrentUser.profile.loggedIn) {\r\n                    // The user is not authenticated.  Prevent the state change\r\n                    // from continuing and route the user to the login page\r\n                    event.preventDefault();\r\n                    $state.go('login', {returnState: toState}, {inherit: false});\r\n                }\r\n            }\r\n        });\r\n    }\r\n})();","(function () {\r\n    'use strict';\r\n\r\n    window.app.factory('pcCurrentUser', pcCurrentUser);\r\n\r\n    function pcCurrentUser(localStorageService, pcConfig) {\r\n\r\n        var USERKEY = pcConfig.appName + '-CurrentUser';\r\n\r\n        var profile = {};\r\n        \r\n        initialize();\r\n        \r\n        return {\r\n            save: saveUser,\r\n            remove: removeUser,\r\n            clear: clearProfile,\r\n            clearToken: clearToken,\r\n            profile: profile,\r\n            hasRole: hasRole\r\n        };\r\n\r\n        function saveUser() {\r\n            localStorageService.set(USERKEY, profile);\r\n        }\r\n\r\n        function removeUser() {\r\n            // Need to first clear the profile.  Found that some\r\n            // browsers keep the localstorage cached\r\n            clearProfile();\r\n            localStorageService.remove(USERKEY);\r\n        }\r\n        \r\n        function clearProfile() {\r\n            profile.username = '';\r\n            profile.token = '';\r\n            profile.expiresIn = 0;\r\n            profile.rememberMe = false;\r\n            profile.firstName = '';\r\n            profile.lastName = '';\r\n            profile.roles = [];\r\n            saveUser();\r\n        }\r\n                \r\n        function clearToken() {\r\n            profile.token = '';\r\n            profile.expiresIn = 0;\r\n            saveUser();\r\n        }\r\n        \r\n        function hasRole(role) {\r\n            return profile.roles &&\r\n                   _.some(profile.roles, function(r) {\r\n                       return r === role;\r\n                   });\r\n        }\r\n\r\n        function initialize() {\r\n            profile = {\r\n                username: '',\r\n                token: '',\r\n                firstName: '',\r\n                lastName: '',\r\n                roles: [],\r\n                expiresIn: 0,\r\n                get fullname() {\r\n                    if (this.firstName !== null && this.firstName !== '') {\r\n                        return this.firstName + ' ' + this.lastName;\r\n                    } else {\r\n                        return this.username;\r\n                    }\r\n\r\n                },\r\n                get loggedIn() {\r\n                    return this.token;\r\n                }\r\n            };\r\n            \r\n            // Now see if user is stored in local storage\r\n            _loadUser();\r\n        }\r\n        \r\n        // Private functions\r\n        /**\r\n         * Loads user from local storage if available.\r\n         */\r\n        function _loadUser() {\r\n            var localUser = localStorageService.get(USERKEY);\r\n            if (localUser) {\r\n                profile.username = localUser.username;\r\n                profile.token = localUser.token;\r\n                profile.expiresIn = localUser.expiresIn;\r\n                profile.rememberMe = localUser.rememberMe;\r\n                profile.firstName = localUser.firstName;\r\n                profile.lastName = localUser.lastName;\r\n                profile.roles = localUser.roles;\r\n            }\r\n        }\r\n    }\r\n})();","(function () {\r\n    'use strict';\r\n\r\n    window.app.factory('pcFormEncode', pcFormEncode);\r\n\r\n    function pcFormEncode() {\r\n        return function (data) {\r\n            var pairs = [];\r\n            /* jshint -W089 */\r\n            for (var name in data) {\r\n                pairs.push(encodeURIComponent(name) + '=' + encodeURIComponent(data[name]));\r\n            }\r\n            return pairs.join('&').replace(/%20/g, '+');\r\n        };\r\n    }\r\n})();","(function () {\r\n\r\n    window.app.service('pcOauth', pcOauth);\r\n\r\n    function pcOauth($q, $log, pcApiClient, pcFormEncode, pcCurrentUser, pcConfig) {\r\n        var url = 'Token?source=' + pcConfig.appName;\r\n        \r\n        return {\r\n            login: login,\r\n            logout: logout\r\n        };\r\n\r\n        function login(username, password, rememberMe) {\r\n            if (username !== pcCurrentUser.profile.username) {\r\n                // Looks like a new user is logging in so we need\r\n                // to clear the current profile\r\n                pcCurrentUser.clear();\r\n            }\r\n\r\n            var configuration = {\r\n                headers: {\r\n                    'Content-Type': 'application/x-www-form-urlencoded'\r\n                }\r\n            };\r\n\r\n            var data = pcFormEncode({\r\n                username: username,\r\n                password: password,\r\n                grant_type: 'password'\r\n            });\r\n            \r\n            var rsp = $q.defer();\r\n            \r\n            pcApiClient.post(url, data, configuration)\r\n                .then(function(response) {\r\n                    _processToken(response.data, username, rememberMe);\r\n                    return $q.all([\r\n                        _getUserProfile(username),\r\n                    ]).then(function() {\r\n                        rsp.resolve();\r\n                    });\r\n                })\r\n                .catch(function(err) {\r\n                    rsp.reject(err);\r\n                });\r\n                \r\n            return rsp.promise;\r\n        }\r\n\r\n        function logout() {\r\n            // First log out the user\r\n            return pcApiClient.post('Users/Logout')\r\n                .catch(function(error) {\r\n                    $log.error('Failed to log user out', error);\r\n                })\r\n                .finally(function() {\r\n                    pcCurrentUser.clearToken();\r\n                    if (pcCurrentUser.profile.rememberMe) {\r\n                        pcCurrentUser.save();\r\n                    } else {\r\n                        pcCurrentUser.remove();\r\n                    }\r\n                });\r\n        }\r\n        \r\n        // private functions\r\n        function _processToken(data, username, rememberMe) {\r\n            pcCurrentUser.profile.username = username;\r\n            pcCurrentUser.profile.token = data.access_token;\r\n            pcCurrentUser.profile.expiresIn = data.expires_in;\r\n            pcCurrentUser.profile.rememberMe = rememberMe;\r\n            pcCurrentUser.save();\r\n        }\r\n        \r\n        function _getUserProfile(username) {\r\n            var resourcePath = 'Users/CurrentProfile';\r\n            var select = '$select=lastName,firstName,roles';\r\n            return pcApiClient.get(resourcePath + '?' + select)\r\n                    .then(function(response) {\r\n                        pcCurrentUser.profile.firstName = response.data.firstName;\r\n                        pcCurrentUser.profile.lastName = response.data.lastName;\r\n                        pcCurrentUser.profile.roles = response.data.roles;\r\n                        pcCurrentUser.save();\r\n                    });\r\n\r\n        }\r\n    }\r\n})();","(function () {\r\n    'use strict';\r\n\r\n    window.app.service('pcUserRoles', pcUserRoles);\r\n    \r\n    function pcUserRoles() {\r\n        return {\r\n            nocUser: 'NocUser',\r\n            connectAdmin: 'ConnectAdmin',\r\n            connectManager: 'ConnectManager',\r\n            connectUser: 'ConnectUser',\r\n            superUser: 'SuperUser',\r\n            genesisUser: 'GenesisUser',\r\n            demoManager: 'DemoManager',\r\n            genesisAdmin: 'GenesisAdmin',\r\n            skySparkAdmin: 'SkySparkAdmin'\r\n        };\r\n    }\r\n})();","window.PowerConnect = window.PowerConnect || {};\r\n(function () {\r\n    window.PowerConnect.Address = {\r\n        getGeoCoordFromPosition: getGeoCoordFromPosition,\r\n        getPositionFromGeoCoord: getPositionFromGeoCoord,\r\n        getAddressFromTags: getAddressFromTags,\r\n        getAddressObjectFromTags: getAddressObjectFromTags\r\n    };\r\n\r\n    // Will take the geoCoord value and convert it to the google position object\r\n    // The format of the geoCoord tag is C('lat', 'lng').\r\n    // The format of the position is {lat: <lat>, lng: <lng>}\r\n    function getGeoCoordFromPosition(geoPosition) {\r\n        if (!geoPosition) {\r\n            return null;\r\n        }\r\n\r\n        return 'C\\(' + geoPosition.lat + ',' + geoPosition.lng + '\\)';\r\n    }\r\n\r\n    // Will take the google position object and convert it to the geoCoord value\r\n    // The format of the geoCoord tag is C('lat', 'lng').\r\n    // The format of the position is {lat: <lat>, lng: <lng>}\r\n    function getPositionFromGeoCoord(value) {\r\n        if (!value) {\r\n            return null;\r\n        }\r\n\r\n        var location = _.replace(value, 'C(', '').replace(location, ')', '');\r\n\r\n        var split = _.split(location, ',');\r\n\r\n        if (split.length !== 2) {\r\n            return null;\r\n        }\r\n\r\n        return {\r\n            lat: parseFloat(split[0]),\r\n            lng: parseFloat(split[1])\r\n        };\r\n    }\r\n\r\n    // Will build up an address string from the geo tags\r\n    // geoStreet, geoCity, geoState, geoPostalCode\r\n    function getAddressFromTags(tags) {\r\n        if (!tags || tags.length === 0) {\r\n            return null;\r\n        }\r\n\r\n        // build up the string.  \r\n        const street = PowerConnect.Tags.tagValue(tags, 'geoStreet');\r\n        const city = PowerConnect.Tags.tagValue(tags, 'geoCity');\r\n        const state = PowerConnect.Tags.tagValue(tags, 'geoState');\r\n        const zip = PowerConnect.Tags.tagValue(tags, 'geoPostalCode');\r\n\r\n        return `${(street && street.trim()) ? street + ',' : ''} ${city ? city + ',' : ''} ${state || ''} ${zip || ''}`.trim(); \r\n    }\r\n\r\n    // This will build up a google geo address object from the geo tags\r\n    function getAddressObjectFromTags(tags) {\r\n        if (!tags || tags.length === 0) {\r\n            return null;\r\n        }\r\n\r\n        const geoCoord = PowerConnect.Tags.tagValue(tags, 'geoCoord');\r\n\r\n        // If geoCoord tag is not present then no need to go any futher\r\n        if (!geoCoord) {\r\n            return null;\r\n        }\r\n\r\n        const street = PowerConnect.Tags.tagValue(tags, 'geoStreet');\r\n        const city = PowerConnect.Tags.tagValue(tags, 'geoCity');\r\n        const state = PowerConnect.Tags.tagValue(tags, 'geoState');\r\n        const zip = PowerConnect.Tags.tagValue(tags, 'geoPostalCode');\r\n        \r\n        return {\r\n            address1: street,\r\n            city: city,\r\n            state: state,\r\n            zip: zip,\r\n            position: PowerConnect.Address.getPositionFromGeoCoord(geoCoord)\r\n        };\r\n    }\r\n})();","(function () {\r\n    //This service will be used to display an alert no matter where the user is within the application\r\n    //It exposes the following operations:\r\n    //      success(options): to be called when you are alerting the user of a successful operation\r\n    //      error(options): to be called when you are alerting the user of an error\r\n    //      info(options): to be called when you want to notify the user\r\n    //All operations take in an options parameter, with the follow values:\r\n    //     message: the message to be displayed in the alert\r\n    //Example usages:\r\n    //     pcAlert.success({message: 'The thing worked!'});\r\n    //     pcAlert.error({message: 'The thing did not work :('});\r\n    //     pcAlert.info({message: 'You canceled the action :('});\r\n    window.app.service('pcAlert', function ($rootScope, $log) {\r\n        return {\r\n            success: success,\r\n            error: error,\r\n            info: info\r\n        };\r\n\r\n        function success(options) {\r\n            $rootScope.$broadcast(window.PowerConnect.CommonEvents.alertSuccess, options);\r\n            $log.log('success ' + options.message + JSON.stringify(options));\r\n\r\n        }\r\n\r\n        function error(options) {\r\n            $rootScope.$broadcast(window.PowerConnect.CommonEvents.alertError, options);\r\n            $log.error('error ' + options.message + JSON.stringify(options));\r\n        }\r\n\r\n        function info(options) {\r\n            $rootScope.$broadcast(window.PowerConnect.CommonEvents.alertInfo, options);\r\n            $log.info('info ' + options.message + JSON.stringify(options));\r\n        }\r\n    });\r\n})();","(function() {\r\n    'use strict';\r\n\r\n    window.app.run(pcBodyClass);\r\n\r\n    function pcBodyClass($rootScope) {\r\n        var stateClass = '';\r\n        var themeClass = '';\r\n        \r\n        $rootScope.$on('$stateChangeSuccess', stateChange);\r\n        \r\n        function stateChange(event, toState, toParams, fromState, fromParams) {\r\n            var newVal;\r\n            \r\n            if (angular.isDefined(toState.data)) {\r\n                if (angular.isDefined(toState.data.bodyClass)) {\r\n                    newVal = toState.data.bodyClass;\r\n                }\r\n            }\r\n\r\n            if (newVal === stateClass) {\r\n                // do nothing\r\n                return;\r\n            }\r\n\r\n            stateClass = newVal;\r\n            \r\n            _setClass();\r\n        }\r\n        \r\n        function _setClass() {\r\n            var newClass = themeClass;\r\n            if (stateClass !== '') {\r\n                newClass += (newClass === '' ? '' : ' ') + stateClass;\r\n            }\r\n            \r\n            document.getElementsByTagName('body')[0].className = newClass;\r\n        }\r\n    }\r\n})();","window.PowerConnect = window.PowerConnect || {};\r\n\r\n(function() {\r\n    window.PowerConnect.CommonEvents = {\r\n        alertSuccess: 'powerconnect.alertSuccess',\r\n        alertInfo: 'powerconnect.alertInfo',\r\n        alertError: 'powerconnect.alertError'\r\n    };\r\n})();","window.PowerConnect = window.PowerConnect || {};\r\n(function () {\r\n    window.PowerConnect.ErrorFromResponse = {\r\n        get: get\r\n    };\r\n\r\n    function get(response) {\r\n        if (response.data && response.data.result && response.data.result.message) {\r\n            return response.data.result.message;\r\n        }\r\n        \r\n        return 'There was a problem with your request. Please try again.';\r\n    }\r\n})();","(function () {\r\n    //This service extends the behavior of Angular Foundation 6's $modal service\r\n    //with the ability to easily pass data to a component specified in a template.\r\n    //In the template, you have access to two scope variables:\r\n    //-$modalInstance: The Angular Foundation modal instance that you can use to\r\n    //                 to close or dismiss the modal.  Pass this to your component.\r\n    //-$modalData: An optional object that will contain any values you specify\r\n    //             on the modalData option.\r\n    //Example usage:\r\n    //     pcModal.open({\r\n    //         template:\r\n    //              '<pc-some-component modal-instance=\"$modalInstance\" another-item=\"$modalData.item\">' +\r\n    //              '</pc-some-component>',\r\n    //         modalData: {\r\n    //             item: vm.item\r\n    //         }\r\n    //     }).result.then(function(result) {\r\n    //         console.log('Received result: ', result);\r\n    //     });\r\n    //\r\n    //  Providing both optional and required fields\r\n    //     pcModal.openConfirmation({\r\n    //         title: \"Confirmation Title\",\r\n    //         message: \"Are you sure you want to perform that action?\",\r\n    //         yesText: 'Continue',\r\n    //         noText: 'Stop',       \r\n    //     }).result.then(function() {\r\n    //         perform your action\r\n    //     }).catch(function() {\r\n    //         user canceled request\r\n    //     });\r\n    //\r\n    //  Providing only required fields\r\n    //     pcModal.openConfirmation({\r\n    //         title: \"Confirmation Title\",\r\n    //         message: \"Are you sure you want to perform that action?\",\r\n    //     }).result.then(function() {\r\n    //         perform your action\r\n    //     }).catch(function() {\r\n    //         user canceled request\r\n    //     });\r\n    window.app.service('pcModal', function ($modal, $animate) {\r\n\r\n        var svc = this;\r\n\r\n        svc.open = function (options) {\r\n            //We use scope to expose a few properties to the component template.\r\n            //NOTE: ngAnnotate doesn't work here, probably because $modal doesn't\r\n            //      seem to like $inject on this controller.\r\n            options.controller = ['$scope', '$modalInstance', function ($scope, $modalInstance) {\r\n                \r\n                $scope.$modalInstance = $modalInstance;\r\n                $scope.$modalData = options.modalData || null;\r\n            }];\r\n            options.size = options.size || 'full';\r\n\r\n            if (options.animate === false) {\r\n                disableAnimate();\r\n            }\r\n\r\n            return $modal.open(options);\r\n        };\r\n\r\n        svc.openConfirmation = function (options) {\r\n            //We use scope to expose a few properties to the component template.\r\n            //NOTE: ngAnnotate doesn't work here, probably because $modal doesn't\r\n            //      seem to like $inject on this controller.\r\n            options.controller = ['$scope', '$modalInstance', function ($scope, $modalInstance) {\r\n                $scope.$modalInstance = $modalInstance;\r\n            }];\r\n            options.size = options.size || 'full';\r\n            options.template = '<div class=\"overlay-content\">' +\r\n              '<h1>' + options.title + '</h1>' +\r\n              '<p>' + options.message + '</p>' +\r\n              '<button class=\"button\" ng-click=\"$modalInstance.close()\">' + (options.yesText || 'confirm') + '</button>' +\r\n              '<button class=\"hollow button\" ng-click=\"$modalInstance.dismiss()\">' + (options.noText || 'cancel') + '</button>' +\r\n              '</div>';\r\n\r\n            if (options.animate === false) {\r\n                disableAnimate();\r\n            }\r\n\r\n            return $modal.open(options);\r\n        };\r\n\r\n        function disableAnimate() {\r\n            var element = angular.element(document.querySelector('.reveal-overlay'));\r\n            $animate.enabled(element, false);\r\n        }\r\n\r\n        return this;\r\n    });\r\n})();","(function() {\r\n\r\n    //A directive that will fire an event whenever the target element or one of its \r\n    //children is no longer focused.  \r\n    window.app.directive('pcOnLostFocus', function($document, $timeout) {\r\n        return {\r\n            restrict: 'A',\r\n            scope: {\r\n                onLostFocus: '&pcOnLostFocus'\r\n            },\r\n            link: link\r\n        };\r\n\r\n        function link($scope, $element) {\r\n            //We need just a bit of delay before we bind, that way it doesn't handle the click\r\n            //that caused this element to appear. \r\n            $timeout(() => {\r\n                $document[0].body.addEventListener('click', onClick);\r\n                // Need to hook into the keydown since that is what the angular for \r\n                // foundations uses.  This way the event propagation can be halted correctly.\r\n                $document[0].body.addEventListener('keydown', onKeyDown);\r\n            }, 250);\r\n            \r\n            $scope.$on('$destroy', unsubscribe);\r\n\r\n            function onClick(e) {\r\n\r\n                if ($element[0] === e.target || $element[0].contains(e.target)) {\r\n                    e.stopPropagation();\r\n                    e.preventDefault();\r\n                }\r\n                else {\r\n                    $scope.$apply(() => {\r\n                        $scope.onLostFocus();\r\n                    });\r\n                }\r\n            }\r\n\r\n            function onKeyDown(e) {\r\n                if (e.key === 'Escape' || e.keyCode === 27) {\r\n                    e.stopPropagation();\r\n                    e.preventDefault();\r\n                    $scope.$apply(() => {\r\n                        $scope.onLostFocus();\r\n                    });\r\n                }\r\n            }\r\n\r\n            function unsubscribe() {\r\n                $document[0].body.removeEventListener('click', onClick);\r\n                $document[0].body.removeEventListener('keydown', onKeyDown);\r\n            }\r\n        }\r\n    });    \r\n})();","window.PowerConnect = window.PowerConnect || {};\r\n(function () {\r\n    window.PowerConnect.Tags = {\r\n        setTag: setTag,\r\n        removeTag: removeTag,\r\n        tagValue: tagValue,\r\n        hasTag: hasTag,\r\n        hasAnyOfTheseTags: hasAnyOfTheseTags,\r\n        getODataTagQueryString: getODataTagQueryString\r\n    };\r\n\r\n    function setTag(tagCollection, name, value) {\r\n        var targetTag = _.find(tagCollection, {name: name});\r\n\r\n        if (targetTag) {\r\n            targetTag.value = value || null;\r\n        } else {\r\n            tagCollection.push({name: name, value: value || null});\r\n        }\r\n    }\r\n\r\n    function removeTag(tagCollection, name) {\r\n        _.remove(tagCollection, function (t) {return t.name === name;});\r\n    }\r\n\r\n    function tagValue(tagCollection, name) {\r\n        var tag = _.find(tagCollection, {name: name});\r\n\r\n        if (tag) {\r\n            return tag.value;\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    function hasTag(tagCollection, name) {\r\n        return _.some(tagCollection, {name: name});\r\n    }\r\n\r\n    function hasAnyOfTheseTags(tagCollection, tags) {\r\n        var found = false;\r\n        _.forEach(tagCollection, function (value) {\r\n            found = _.includes(tags, value.name);\r\n            if (found) {\r\n                return false;\r\n            }\r\n        });\r\n        return found;\r\n    }\r\n\r\n    // This function will build up an OData style filter for tags that can be used in a URL $filter.\r\n    // Null is returned if there are not tags to filter on.\r\n    function getODataTagQueryString(tags) {\r\n        var queryString = null;\r\n\r\n        _.forEach(tags, function (tag) {\r\n            if (queryString === null) {\r\n                queryString = '';\r\n            } else {\r\n                queryString += ' and ';\r\n            }\r\n\r\n            if (tag.value) {\r\n                queryString += 'tags/any(tag: tag/name eq \\'' + tag.name + '\\' and tag/value eq \\'' + tag.value + '\\')';\r\n            } else {\r\n                queryString += 'tags/any(tag: tag/name eq \\'' + tag.name + '\\')';\r\n            }\r\n        });\r\n\r\n        return queryString;\r\n    }\r\n})();\r\n","(function () {\r\n    'use strict';\r\n\r\n    window.app.component('pcToast', {\r\n        bindings: {},\r\n        templateUrl: '/app/commonScripts/utils/pcToast.template.html',\r\n        controller: pcToastCtrl,\r\n        controllerAs: 'vm'\r\n    });\r\n    \r\n    function pcToastCtrl($rootScope, $timeout) {\r\n        var vm = this,\r\n            alertSuccessHandler,\r\n            alertInfoHandler,\r\n            alertErrorHandler;\r\n\r\n        vm.toasts = [];\r\n        vm.close = close;\r\n\r\n        vm.$onInit = onInit;\r\n        vm.$onDestroy = onDestroy;\r\n\r\n        function onInit() {\r\n            alertSuccessHandler = $rootScope.$on(window.PowerConnect.CommonEvents.alertSuccess, handleNewAlerts);\r\n            alertInfoHandler = $rootScope.$on(window.PowerConnect.CommonEvents.alertInfo, handleNewAlerts);\r\n            alertErrorHandler = $rootScope.$on(window.PowerConnect.CommonEvents.alertError, handleNewAlerts);\r\n        }\r\n\r\n        function onDestroy() {\r\n            alertSuccessHandler();\r\n            alertInfoHandler();\r\n            alertErrorHandler();\r\n        }\r\n\r\n        function handleNewAlerts(event, alert) {\r\n            var toast = {};\r\n\r\n            toast.id = (new Date()).getTime();\r\n            toast.success = (event.name === window.PowerConnect.CommonEvents.alertSuccess);\r\n            toast.info = (event.name === window.PowerConnect.CommonEvents.alertInfo);\r\n            toast.error = (event.name === window.PowerConnect.CommonEvents.alertError);\r\n            toast.message = alert.message;\r\n\r\n            vm.toasts.push(toast);\r\n\r\n            $timeout(function () {\r\n                close(toast);\r\n            }, 3000);\r\n        }\r\n\r\n        function close(toast) {\r\n            var index = _.findIndex(vm.toasts, ['id', toast.id]);\r\n            if (index > -1) {\r\n                vm.toasts.splice(index, 1);\r\n            }\r\n        }\r\n    }\r\n})();","(function () {\r\n    'use strict';\r\n\r\n    window.app.component('pcCurtailmentDashboard', {\r\n        bindings: {},\r\n        templateUrl: '/app/curtailments/dashboard/pcCurtailmentDashboard.template.html',\r\n        controller: controller,\r\n        controllerAs: 'vm'\r\n    });\r\n\r\n    function controller(pcApiClient, pcAlert) {\r\n        const vm = this;\r\n\r\n        vm.programs = [];\r\n\r\n        vm.$onInit = onInit;\r\n\r\n        function onInit() {\r\n            const refreshable = pcApiClient.getRefreshClientForComponent(vm);\r\n\r\n            refreshable.poll('ProgramSummaries?$select=id,name,isRunning,startDateUtc,endDateUtc,isoName' +\r\n                            '&$expand=metrics&$orderby=name', 60 * 1000)\r\n                .catch(response => {\r\n                    pcAlert.error({message: window.PowerConnect.ErrorFromResponse.get(response)});\r\n                    vm.isLoaded = true;\r\n                    return Rx.Observable.empty();\r\n                })\r\n                .subscribe(response => {\r\n                    this.programs = response.data.result;\r\n                    vm.isLoaded = true;\r\n                });\r\n        }\r\n    }\r\n\r\n})();","(function () {\r\n    window.app.component('pcProgramCard', {\r\n        templateUrl: '/app/curtailments/dashboard/pcProgramCard.template.html',\r\n        controller: controller,\r\n        controllerAs: 'vm',\r\n        bindings: {\r\n            program: '<'\r\n        }\r\n    });\r\n\r\n    function controller($state) {\r\n        const vm = this;\r\n        \r\n        vm.showDetails = showDetails;\r\n\r\n        function showDetails() {\r\n            $state.go('curtailments.summary', {programId: vm.program.id});\r\n        }\r\n    }\r\n})();","(function () {\r\n    window.app.component('pcProgramCurtailmentStatus', {\r\n        bindings: {\r\n            programSummary: '<'\r\n        },\r\n        templateUrl: '/app/curtailments/layout/pcProgramCurtailmentStatus.template.html',\r\n        controller: controller,\r\n        controllerAs: 'vm'\r\n    });\r\n\r\n    function controller() {\r\n    }\r\n})();","(function () {\r\n    window.app.component('pcProgramSummary', {\r\n        templateUrl: '/app/curtailments/layout/pcProgramSummary.template.html',\r\n        controller: controller,\r\n        controllerAs: 'vm',\r\n        bindings: {\r\n            programId: '<'\r\n        }\r\n    });\r\n\r\n    function controller(pcApiClient, pcAlert) {\r\n        const vm = this,\r\n            refreshInterval = 60 * 1000,\r\n            odata = '$select=id,name,isRunning,startDateUtc,endDateUtc&$expand=metrics';\r\n        \r\n        vm.$onInit = onInit;\r\n\r\n        function onInit() {\r\n            pcApiClient.getRefreshClientForComponent(vm)\r\n                .poll(`ProgramSummaries/${vm.programId}?${odata}`, refreshInterval)\r\n                .catch(response => {\r\n                    pcAlert.error({message: window.PowerConnect.ErrorFromResponse.get(response)});\r\n                    return Rx.Observable.empty();\r\n                })\r\n                .subscribe(response => {\r\n                    vm.programSummary = response.data;\r\n                });\r\n        }\r\n    }\r\n})();","(function () {\r\n    window.app.component('pcCurtailmentSummary', {\r\n        bindings: {\r\n            programId: '<',\r\n        },\r\n        templateUrl: '/app/curtailments/summary/pcCurtailmentSummary.template.html',\r\n        controller: controller,\r\n        controllerAs: 'vm'\r\n    });\r\n\r\n    function controller() {\r\n        const vm = this;\r\n\r\n        vm.isLoaded = true;\r\n    }\r\n})();","(function () {\r\n    'use strict';\r\n\r\n    window.app.component('pcAddEditCustomerModal', {\r\n        templateUrl: '/app/customers/addEdit/pcAddEditCustomerModal.template.html',\r\n        controller: pcAddEditCustomerController,\r\n        controllerAs: 'vm',\r\n        bindings: {\r\n            existingCustomer: '<',\r\n            modalInstance: '<'\r\n        }\r\n    });\r\n\r\n    function pcAddEditCustomerController(pcApiClient, pcAlert) {\r\n        var vm = this;\r\n\r\n        vm._odataOptions = '$select=uuid,name,type&$expand=tags';\r\n\r\n        vm.submit = submit;\r\n        vm.$onInit = $onInit;\r\n        vm.close = close;\r\n\r\n        function $onInit() {\r\n            if (vm.existingCustomer) {\r\n                vm.isInEditMode = true;\r\n                vm.customer = angular.extend({}, vm.existingCustomer);\r\n                vm.customer.skySparkProjectName = PowerConnect.Tags.tagValue(vm.customer.tags, 'skySparkProjectName');\r\n                vm.customer.virtuWattUsername = PowerConnect.Tags.tagValue(vm.customer.tags, 'virtuWattUsername');\r\n                vm.customer.virtuWattPassword = PowerConnect.Tags.tagValue(vm.customer.tags, 'virtuWattPassword');\r\n            } else {\r\n                vm.isInAddMode = true;\r\n            }\r\n        }\r\n\r\n        function submit() {\r\n            vm.isSaving = true;\r\n            vm.error = false;\r\n\r\n            const customerToSave = angular.extend({tags: [], type: 'Customer'}, vm.customer);\r\n            convertFieldsToTags(customerToSave);\r\n\r\n            (vm.isInAddMode ?\r\n                pcApiClient.post('Groups?' + vm._odataOptions, customerToSave) :\r\n                pcApiClient.put('Groups/' + customerToSave.uuid + '?' + vm._odataOptions, customerToSave))\r\n                .then(function (resp) {\r\n                    vm.modalInstance.close(resp.data);\r\n                    pcAlert.success({message: 'Customer ' + (vm.isInAddMode ? 'added' : 'updated')});\r\n                })\r\n                .catch(function () {\r\n                    vm.error = true;\r\n                })\r\n                .finally(function () {\r\n                    vm.isSaving = false;\r\n                });\r\n        }\r\n\r\n        function convertFieldsToTags(customerToSave) {\r\n\r\n            if (customerToSave.skySparkProjectName) {\r\n                PowerConnect.Tags.setTag(customerToSave.tags,\r\n                    'skySparkProjectName',\r\n                    customerToSave.skySparkProjectName);\r\n                delete customerToSave.skySparkProjectName;\r\n            }\r\n            if (customerToSave.virtuWattUsername) {\r\n\r\n                PowerConnect.Tags.setTag(customerToSave.tags, 'virtuWattUsername', customerToSave.virtuWattUsername);\r\n                delete customerToSave.virtuWattUsername;\r\n            }\r\n            if (customerToSave.virtuWattPassword) {\r\n\r\n                PowerConnect.Tags.setTag(customerToSave.tags, 'virtuWattPassword', customerToSave.virtuWattPassword);\r\n                delete customerToSave.virtuWattPassword;\r\n            }\r\n        }\r\n\r\n        function close() {\r\n            if (vm.isDeleting) {\r\n                vm.isDeleting = false;\r\n                return;\r\n            }\r\n            vm.modalInstance.dismiss();\r\n        }\r\n    }\r\n})();","(function () {\r\n    'use strict';\r\n\r\n    window.app.component('pcCustomerDashboard', {\r\n        bindings: {},\r\n        templateUrl: '/app/customers/dashboard/pcCustomerDashboard.template.html',\r\n        controller: pcCustomerDashboardController,\r\n        controllerAs: 'vm'\r\n    });\r\n\r\n    function pcCustomerDashboardController($timeout, pcApiClient, pcModal, pcAlert) {\r\n        const vm = this;\r\n        \r\n        var customerUrl = 'GroupSummaries?' +\r\n            '$expand=tags,metrics($select=totalEnumeratedDevices,totalEnumeratedThings,devicesOffline,thingsOptedOut)' +\r\n            '&$filter=type eq \\'Customer\\'';\r\n\r\n        vm.nextUrl = customerUrl;\r\n        vm.customers = null;\r\n        vm.totalCustomers = 0;\r\n        vm.isLoaded = false;\r\n        vm.isBusy = true;\r\n\r\n        vm.deviceStatus = deviceStatus;\r\n        vm.equipmentOutStatus = equipmentOutStatus;\r\n        vm.showAddCustomerModal = showAddCustomerModal;\r\n        vm.nextPage = nextPage;\r\n        vm.search = search;\r\n\r\n        vm.$onInit = () => {\r\n            _retrieveData(true);\r\n        };\r\n\r\n        function showAddCustomerModal() {\r\n            pcModal.open({\r\n                template: '<pc-add-edit-customer-modal modal-instance=\"$modalInstance\"></pc-add-edit-customer-modal>'\r\n            }).result.then((customer) => {\r\n                vm.totalCustomers += 1;\r\n                vm.customers.splice(_.sortedIndexBy(vm.customers, customer, 'name'), 0, customer);\r\n            });\r\n        }\r\n\r\n        function deviceStatus(customer) {\r\n            return customer.devicesOffine ?\r\n                (customer.devicesOffine + ' of ' + customer.totalEnumeratedDevices + ' Offline') :\r\n                'Online';\r\n        }\r\n\r\n        function equipmentOutStatus(customer) {\r\n            return customer.thingsOptedOut ?\r\n                (customer.thingsOptedOut + ' of ' + customer.totalEnumeratedThings + ' Opted Out') :\r\n                'All Opted In';\r\n        }\r\n\r\n        function nextPage() {\r\n            if (vm.isBusy || !vm.nextUrl) {\r\n                // Either busy or no more data\r\n                return;\r\n            }\r\n \r\n            _retrieveData(false);\r\n        }\r\n        \r\n        function search(text) {\r\n            vm.nextUrl = customerUrl;\r\n\r\n            if (text[0] !== '') {\r\n                vm.nextUrl += ` and ${PowerConnect.OData.containsFilter('name',text)}`;\r\n            }\r\n\r\n            _retrieveData(true);\r\n        }\r\n        \r\n        function _retrieveData(isFiltered) {\r\n            vm.isBusy = true;\r\n            if (isFiltered) {\r\n                // Reset the isLoaded flag so that the spinner will be shown while the\r\n                // new set of data is loaded\r\n                vm.isLoaded = false;\r\n            }\r\n\r\n            pcApiClient.get(vm.nextUrl)\r\n                .then((response) => {\r\n                    if (response) {\r\n                        vm.nextUrl = response.data.nextUrl;\r\n                        vm.totalCustomers = response.data.totalCount;\r\n                        if (response.data.result) {\r\n                            if (vm.customers === null || isFiltered) {\r\n                                vm.customers = response.data.result;\r\n                            } else {\r\n                                vm.customers = _.concat(vm.customers, response.data.result);\r\n                            }\r\n                        }\r\n                    }\r\n                })\r\n                .catch((error) => {\r\n                    pcAlert.error({message: 'Failed to retrieve Customers', error: error});\r\n                })\r\n                .finally(() => {\r\n                    if (vm.isLoaded === false) {\r\n                        // It seems that one initial load that without this delay the infinite\r\n                        // scroll component will load roughtly two pages worth of data.\r\n                        $timeout(() => {vm.isBusy = false;}, 1000);\r\n                    } else {\r\n                        vm.isBusy = false;\r\n                    }\r\n                    vm.isLoaded = true;\r\n                });\r\n        }\r\n    }\r\n})();","(function () {\r\n    'use strict';\r\n    \r\n    window.app.component('pcCustomerSummary', {\r\n        bindings: {\r\n            customerUuid: '<'\r\n        },\r\n        templateUrl: '/app/customers/summary/pcCustomerSummary.template.html',\r\n        controller: controller,\r\n        controllerAs: 'vm'\r\n    });\r\n\r\n    function controller(pcApiClient, $q, pcAlert, pcModal) {\r\n        var vm = this;\r\n\r\n        vm.$onInit = onInit;\r\n        vm.editCustomer = editCustomer;\r\n        vm.addSite = addSite;\r\n        vm.getSiteAddress = getSiteAddress;\r\n\r\n        let customerUrl = `Groups/${vm.customerUuid}?$select=uuid,name&$expand=tags`;\r\n        let sitesUrl = `Groups?parentGroupUuid=${vm.customerUuid}&$select=uuid,name,tags&$expand=tags&$filter=type eq 'Site'`;\r\n\r\n        vm.markers = [];\r\n\r\n        function onInit() {\r\n            $q.all([pcApiClient.get(customerUrl), pcApiClient.get(sitesUrl)])\r\n                .then(responses => {\r\n                    vm.customer = responses[0].data;\r\n                    vm.siteCount = responses[1].data.result.length;\r\n                    vm.sites = responses[1].data.result;\r\n\r\n                    vm.siteMapNumber = 1;\r\n                    \r\n                    _.each(vm.sites, site => {\r\n                        if (!window.PowerConnect.Tags.hasTag(site.tags, 'geoCoord')) {\r\n                            return;\r\n                        }\r\n\r\n                        site.siteMapNumber = vm.siteMapNumber++;\r\n                        \r\n                        addSiteToMarkers(site);\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    pcAlert.error({message: 'Failed to retrieve Sites', error: error});\r\n                })\r\n                .finally(() => {\r\n                    vm.isLoaded = true;\r\n                });\r\n        }\r\n\r\n        function addSiteToMarkers(site) {\r\n            const geoCoord = window.PowerConnect.Tags.tagValue(site.tags, 'geoCoord'); //C(lat,lng)\r\n            const position = PowerConnect.Address.getPositionFromGeoCoord(geoCoord);\r\n\r\n            vm.markers.push({\r\n                position: position,\r\n                title: site.name,\r\n                label: site.siteMapNumber.toString(),\r\n                info: site.name\r\n            });\r\n        }\r\n        \r\n        function editCustomer() {\r\n            pcModal.open({\r\n                template:\r\n                    '<pc-add-edit-customer-modal modal-instance=\"$modalInstance\" existing-customer=\"$modalData.customer\">' +\r\n                    '</pc-add-edit-customer-modal>',\r\n                modalData: {\r\n                    customer: vm.customer\r\n                }\r\n            }).result.then(customer => {\r\n                angular.extend(vm.customer, customer);\r\n            });\r\n        }\r\n\r\n        function addSite() {\r\n            pcModal.open({\r\n                template: `<pc-add-edit-site-modal customer-uuid=\"$modalData.customerUuid\" modal-instance=\"$modalInstance\">\r\n                           </pc-add-edit-site-modal>`,\r\n                modalData: {\r\n                    customerUuid: vm.customer.uuid\r\n                }\r\n            }).result.then(newSite => {\r\n                vm.sites.splice(_.sortedIndexBy(vm.sites, newSite, site => site.name), 0, newSite);\r\n                vm.siteCount++;\r\n                newSite.siteMapNumber = vm.siteMapNumber++;\r\n                addSiteToMarkers(newSite);\r\n            });\r\n        }\r\n\r\n        function getSiteAddress(site) {\r\n            return PowerConnect.Address.getAddressFromTags(site.tags);\r\n        }\r\n    }\r\n\r\n})();","(function () {\r\n    'use strict';\r\n    \r\n    window.app.component('pcGroupActivation', {\r\n        bindings: {\r\n            group: '<',\r\n            strategy: '<?',\r\n            micro: '@',\r\n            activeText: '@?',\r\n            inactiveText: '@?'\r\n        },\r\n        templateUrl: '/app/groups/activation/pcGroupActivation.template.html',\r\n        controller: pcGroupActivationController,\r\n        controllerAs: 'vm'\r\n    });\r\n\r\n    function pcGroupActivationController(pcApiClient, $rootScope, pcAlert) {\r\n        var vm = this;\r\n\r\n        vm.activeText = vm.activeText || 'Deactivate';\r\n        vm.inactiveText = vm.inactiveText || 'Activate';\r\n\r\n        vm.$onInit = onInit;\r\n        vm.$onChanges = onChanges;\r\n        vm.toggleGroupActivation = toggleGroupActivation;\r\n        vm.finished = finished;\r\n        vm.error = error;\r\n\r\n        function onInit() {\r\n            if (!vm.group) {\r\n                return;\r\n            }\r\n\r\n            // This will force jshint to ignore the use of == instead of ===.  In this case\r\n            // we need to use the == and not ===.\r\n            /*jshint eqeqeq:false */\r\n            vm.isGroupActive = vm.strategy ?\r\n                PowerConnect.Tags.tagValue(vm.group.tags, 'activeStrategy') == vm.strategy.id :\r\n                PowerConnect.Tags.hasTag(vm.group.tags, 'startedAtUtc');\r\n        }\r\n\r\n        function onChanges() {\r\n            if (!vm.group) {\r\n                return;\r\n            }\r\n\r\n            /*jshint eqeqeq:false */\r\n            vm.isGroupActive = vm.strategy ?\r\n                PowerConnect.Tags.tagValue(vm.group.tags, 'activeStrategy') == vm.strategy.id :\r\n                PowerConnect.Tags.hasTag(vm.group.tags, 'startedAtUtc');\r\n        }\r\n\r\n        function toggleGroupActivation() {\r\n            vm.activating = !vm.isGroupActive;\r\n            vm.deactivating = vm.isGroupActive;\r\n\r\n            let url = `Groups/${vm.group.uuid}/${vm.isGroupActive ? 'Deactivate' : 'Activate'}`;\r\n            if (vm.strategy && !vm.isGroupActive) {\r\n                // Need to add the strategy id to the request\r\n                url += `/${vm.strategy.id}`;\r\n            }\r\n            return pcApiClient.post(url);\r\n        }\r\n\r\n        function finished() {\r\n            vm.isGroupActive = !vm.isGroupActive;\r\n\r\n            $rootScope.$broadcast(vm.isGroupActive ? \r\n                window.PowerConnect.GroupEvents.activated : \r\n                window.PowerConnect.GroupEvents.deactivated, \r\n                {uuid: vm.group.uuid});\r\n\r\n            pcAlert.success({\r\n                message: (vm.isGroupActive ? 'Activate' : 'Deactivate') + ' was successful'\r\n            });\r\n\r\n            vm.activating = false;\r\n            vm.deactivating = false;\r\n        }\r\n\r\n        function error() {\r\n            vm.activating = false;\r\n            vm.deactivating = false;\r\n        }\r\n    }\r\n\r\n})();","(function () {\r\n    'use strict';\r\n\r\n    window.app.component('pcThingActivation', {\r\n        bindings: {\r\n            thing: '<'\r\n        },\r\n        templateUrl: '/app/groups/activation/pcThingActivation.template.html',\r\n        controller: pcThingActivationController,\r\n        controllerAs: 'vm'\r\n    });\r\n\r\n    function pcThingActivationController(pcApiClient, pcAlert) {\r\n        var vm = this;\r\n\r\n        vm.isActive = false;\r\n        vm.activating = false;\r\n        vm.deactivating = false;\r\n\r\n        vm.isOptedIn = isOptedIn;\r\n        vm.toggleActivation = toggleActivation;\r\n        vm.finished = finished;\r\n        vm.error = error;\r\n\r\n        vm.$onInit = onInit;\r\n        vm.$onChanges = onChanges;\r\n\r\n        function onInit() {\r\n            if (!vm.thing) {\r\n                return;\r\n            }\r\n            \r\n            vm.isActive = PowerConnect.Tags.hasTag(vm.thing.tags, 'isActive');            \r\n        }\r\n\r\n        function onChanges() {\r\n            if (!vm.thing) {\r\n                return;\r\n            }\r\n\r\n            vm.isActive = PowerConnect.Tags.hasTag(vm.thing.tags, 'isActive');\r\n        }\r\n\r\n        function isOptedIn() {\r\n            if (!vm.thing) {\r\n                return;\r\n            }\r\n\r\n            return PowerConnect.Tags.tagValue(vm.thing.tags, 'opt') !== 'out';\r\n        }\r\n\r\n        function toggleActivation() {\r\n            vm.activating = !vm.isActive;\r\n            vm.deactivating = vm.isActive;\r\n\r\n            return pcApiClient.post('Things/' + vm.thing.uuid + '/' + (vm.isActive ? 'Deactivate' : 'Activate'));\r\n        }\r\n\r\n        function finished() {\r\n            vm.isActive = !vm.isActive;\r\n\r\n            pcAlert.success({\r\n                message: (vm.isActive ? 'Activate' : 'Deactivate') + ' was successful'\r\n            });\r\n\r\n            vm.activating = false;\r\n            vm.deactivating = false;\r\n        }\r\n\r\n        function error() {\r\n            vm.activating = false;\r\n            vm.deactivating = false;\r\n        }\r\n    }\r\n})();","(function () {\r\n    'use strict';\r\n\r\n    window.app.component('pcGroupActivity', {\r\n        templateUrl: '/app/groups/activity/pcGroupActivity.template.html',\r\n        controller: controller,\r\n        controllerAs: 'vm',\r\n        bindings: {\r\n            groupUuid: '<' \r\n        }\r\n    });\r\n\r\n    function controller(pcApiClient, $filter) {\r\n        const vm = this;\r\n\r\n        vm.activityTypes = [\r\n            {value:null, display:'Choose a type'},\r\n            {value:'GroupCurtailmentStart', display:'Curtailment Started'},\r\n            {value:'GroupCurtailmentStop', display:'Curtailment Stopped'},\r\n            {value:'GroupActivation', display:'Group Activated'},\r\n            {value:'GroupDeactivation', display:'Group Deactivated'}\r\n        ];\r\n\r\n        vm.$onInit = $onInit;\r\n        vm.formatEntryType = formatEntryType;\r\n        vm.isActivationEntry = isActivationEntry;\r\n        vm.isDeactivationEntry = isDeactivationEntry;\r\n        vm.getDateLabel = getDateLabel;\r\n        vm.applyFilter = applyFilter;\r\n\r\n        function $onInit() {\r\n            loadData().finally(() => vm.isLoaded = true);\r\n        }\r\n\r\n        function loadData() {\r\n\r\n            let uri = `Groups/${vm.groupUuid}/Activity?$select=id,activityType,description,source,sourceId,timestampUtc`;\r\n\r\n            if (vm.filterString) {\r\n                uri += `&$filter=${vm.filterString}`;\r\n            }\r\n\r\n            return pcApiClient.get(uri)\r\n                .then(resp => {\r\n                    vm.groupActivity = groupByDay(resp.data.result);\r\n                });\r\n        }\r\n\r\n        function groupByDay(logs) {\r\n            const groups = _(logs).groupBy(x => moment.utc(x.timestampUtc).local().format('M/D/YYYY'))\r\n                                  .map((value,key) => ({date: key, logs: value}))\r\n                                  .value();\r\n            return groups;\r\n        }\r\n\r\n        function formatEntryType(type) {\r\n            if (!type)  {\r\n                return 'Unknown';\r\n            }\r\n\r\n            return $filter('pcCamelCaseToHuman')(type.replace('Group', ''));\r\n        }\r\n\r\n        //NOTE: If we start to need these helpers in other places, let's move them to filters.\r\n        function isActivationEntry(activityType) {\r\n            return activityType === 'GroupCurtailmentStart' || \r\n                   activityType === 'GroupActivation';\r\n        }\r\n\r\n        function isDeactivationEntry(activityType) {\r\n            return activityType === 'GroupCurtailmentStop' || \r\n                   activityType === 'GroupDeactivation';\r\n        }\r\n\r\n        function getDateLabel(date) {\r\n            const now = moment();\r\n            const target = moment(date, 'MM/DD/YYYY');\r\n            const dayDiff = target.diff(now, 'days'); \r\n\r\n            if (dayDiff === 0) {\r\n                return 'today';\r\n            }\r\n            if (dayDiff === -1) {\r\n                return 'yesterday';\r\n            }\r\n\r\n            return date;\r\n        }\r\n\r\n        function applyFilter() {\r\n            vm.isFiltering = true;\r\n\r\n            const filterClauses = []; \r\n            \r\n            if (vm.filter && vm.filter.startDate) {\r\n                filterClauses.push(`timestampUtc gt ${moment(vm.filter.startDate, 'MM/DD/YYYY').toJSON()}`);\r\n            }\r\n            if (vm.filter && vm.filter.endDate) {\r\n                //Intuitively, users think 'end date' should be inclusive, so we need to add 1 to the date.\r\n                const endDate = moment(vm.filter.endDate, 'MM/DD/YYYY').add(1, 'day');\r\n                filterClauses.push(`timestampUtc lt ${endDate.toJSON()}`);\r\n            }\r\n            if (vm.filter && vm.filter.activityType) {\r\n                filterClauses.push(`activityType eq '${vm.filter.activityType}'`);\r\n            }\r\n\r\n            if (filterClauses.length === 0) {\r\n                vm.filterString = null;\r\n            } else {\r\n                vm.filterString = filterClauses.join(' and ');\r\n            }\r\n\r\n            loadData().finally(() => vm.isFiltering = false);\r\n        }\r\n    }\r\n})();","(function() {\r\n\r\n    window.app.component('pcAddEditGroupModal', {\r\n        templateUrl: '/app/groups/addEdit/pcAddEditGroupModal.template.html',\r\n        controller: controller,\r\n        controllerAs: 'vm',\r\n        bindings: {\r\n            existingGroup: '<',\r\n            modalInstance: '<',\r\n            hideRemove: '@?'\r\n        }\r\n    });\r\n\r\n    function controller(pcApiClient, pcAlert, $rootScope) {\r\n        var vm = this;\r\n\r\n        vm._odataOptions = '$select=uuid,name,type&$expand=tags';\r\n\r\n        vm.submit = submit;\r\n        vm.$onInit = $onInit;\r\n        vm.close = close;\r\n        vm.removeGroup = removeGroup;\r\n\r\n        function $onInit() {\r\n            if (vm.existingGroup) {\r\n                vm.isInEditMode = true;\r\n                vm.group = angular.extend({}, vm.existingGroup);\r\n                vm.group.description = PowerConnect.Tags.tagValue(vm.group.tags, 'description');\r\n                vm.group.isPrivate = PowerConnect.Tags.hasTag(vm.group.tags, 'isPrivate');\r\n            } else {\r\n                vm.isInAddMode = true;\r\n                vm.group = {\r\n                    type: 'Equipment',\r\n                    isPrivate: false\r\n                };\r\n            }\r\n        }\r\n\r\n        function convertDescriptionToTag(groupToSave) {\r\n            PowerConnect.Tags.setTag(groupToSave.tags, 'description', vm.group.description);\r\n\r\n            delete groupToSave.description;\r\n        }\r\n\r\n        function convertIsPrivateToTag(groupToSave) {\r\n\r\n            if (vm.group.isPrivate) {\r\n                PowerConnect.Tags.setTag(groupToSave.tags, 'isPrivate');\r\n            }\r\n            else {\r\n                PowerConnect.Tags.removeTag(groupToSave.tags, 'isPrivate');\r\n            }\r\n\r\n            delete groupToSave.isPrivate;\r\n        }\r\n\r\n        function submit() {\r\n            vm.isSaving = true;\r\n            vm.error = false;\r\n\r\n            var groupToSave = angular.extend({tags:[]}, vm.group);\r\n\r\n            convertDescriptionToTag(groupToSave);\r\n            convertIsPrivateToTag(groupToSave);\r\n\r\n            (vm.isInAddMode ?\r\n                pcApiClient.post('Groups?' + vm._odataOptions, groupToSave) :\r\n                pcApiClient.put('Groups/' + groupToSave.uuid + '?' + vm._odataOptions, groupToSave))\r\n                .then(function(resp) {\r\n                    vm.modalInstance.close(resp.data);\r\n                    pcAlert.success({message: 'Group ' + (vm.isInAddMode ? 'added' : 'updated')});\r\n                })\r\n                .catch(function() {\r\n                    vm.error = true;\r\n                })\r\n                .finally(function() {\r\n                    vm.isSaving = false;\r\n                });\r\n        }\r\n\r\n        function close() {\r\n            if (vm.isDeleting) {\r\n                vm.isDeleting = false;\r\n                return;\r\n            }\r\n            vm.modalInstance.dismiss();\r\n        }\r\n\r\n        function removeGroup() {\r\n            vm.error = null;\r\n            vm.isBusyDeleting = true;\r\n\r\n            pcApiClient.delete('Groups/' + vm.group.uuid + (vm.deleteAll ? '?all=true' : ''))\r\n                .then(function () {\r\n                    pcAlert.success({message: vm.group.name + ' successfully deleted'});\r\n                    $rootScope.$broadcast(window.PowerConnect.GroupEvents.deleted, {uuid: vm.group.uuid});\r\n\r\n                    vm.modalInstance.close();\r\n                })\r\n                .catch(function (response) {\r\n                    if (response.statusText) {\r\n                        vm.error = response.statusText;\r\n                    }\r\n                    else if (response.data && response.data.error) {\r\n                        vm.error = response.data.error;\r\n                    }\r\n                    else {\r\n                        vm.error = 'An error occurred';\r\n                    }\r\n                })\r\n                .finally(function () {\r\n                    vm.isBusyDeleting = false;\r\n                });\r\n        }\r\n    }\r\n})();","(function () {\r\n    window.app.component('pcGroupCard', {\r\n        templateUrl: '/app/groups/dashboard/pcGroupCard.template.html',\r\n        controller: controller,\r\n        controllerAs: 'vm',\r\n        bindings: {\r\n            group: '<'\r\n        }\r\n    });\r\n\r\n    function controller($state, pcModal) {\r\n        var vm = this;\r\n\r\n        vm.showEditModal = showEditModal;\r\n        vm.showDetails = showDetails;\r\n\r\n        function showEditModal() {\r\n            pcModal.open({\r\n                template:\r\n                    '<pc-add-edit-group-modal modal-instance=\"$modalInstance\" existing-group=\"$modalData.group\">' +\r\n                    '</pc-add-edit-group-modal>',\r\n                modalData: {\r\n                    group: vm.group\r\n                }\r\n            }).result.then(function(group) {\r\n                angular.extend(vm.group, group);\r\n            });\r\n        }\r\n\r\n        function showDetails() {\r\n            $state.go('groups.summary', {uuid: vm.group.uuid});\r\n        }\r\n    }\r\n})();","(function () {\r\n    'use strict';\r\n\r\n    window.app.component('pcGroupDashboard', {\r\n        bindings: {},\r\n        templateUrl: '/app/groups/dashboard/pcGroupDashboard.template.html',\r\n        controller: pcGroupDashboardController,\r\n        controllerAs: 'vm'\r\n    });\r\n\r\n    function pcGroupDashboardController(pcApiClient, pcModal, $rootScope, pcAlert) {\r\n        const vm = this,\r\n            groupUrl = `GroupSummaries?$select=uuid,name,type&$expand=tags,metrics&$filter=type eq 'Equipment'`;\r\n        let groupDeletedHandle;\r\n        \r\n        vm.groups = null;\r\n        vm.isLoaded = false;\r\n\r\n        vm.showAddGroupModal = showAddGroupModal;\r\n        vm.$onInit = function () {\r\n            setupDataRefresh();\r\n\r\n            groupDeletedHandle = $rootScope.$on(window.PowerConnect.GroupEvents.deleted, function (event, data) {\r\n                _.remove(vm.groups, {uuid: data.uuid});\r\n            });\r\n        };\r\n\r\n        vm.$onDestroy = function () {\r\n            groupDeletedHandle();\r\n        };\r\n\r\n        function setupDataRefresh() {\r\n            const refreshable = pcApiClient.getRefreshClientForComponent(vm);\r\n\r\n            refreshable.poll(groupUrl, 30 * 1000)\r\n                .catch(error => {\r\n                    pcAlert.error({message: 'Failed to retrieve groups', error: error});\r\n                    vm.isLoaded = true;\r\n                    return Rx.Observable.empty();\r\n                })\r\n                .subscribe(response => {\r\n                    if (response) {\r\n                        vm.groups = response.data.result;\r\n                    }\r\n                    vm.isLoaded = true;\r\n                });\r\n        }\r\n\r\n        function showAddGroupModal() {\r\n            pcModal.open({\r\n                template: '<pc-add-edit-group-modal modal-instance=\"$modalInstance\"></pc-add-edit-group-modal>',\r\n            }).result.then(function (group) {\r\n                vm.groups.splice(_.sortedIndexBy(vm.groups, group, 'name'), 0, group);\r\n            });\r\n        }\r\n    }\r\n})();","(function () {\r\n    'use strict';\r\n    \r\n    window.app.component('pcGroupHeader', {\r\n        bindings: {\r\n            groupUuid: '<',\r\n            counter: '<?'\r\n        },\r\n        templateUrl: '/app/groups/layout/pcGroupHeader.template.html',\r\n        controller: pcGroupHeaderController,\r\n        controllerAs: 'vm'\r\n    });\r\n\r\n    function pcGroupHeaderController($state, pcModal, pcApiClient, pcAlert) {\r\n        var vm = this;\r\n        var groupUrl = `Groups/${vm.groupUuid}?$select=uuid,name,type&$expand=tags`;\r\n\r\n        vm.$onInit = function () {\r\n            pcApiClient.get(groupUrl)\r\n                .then(function(response) {\r\n                    if (response) {\r\n                        vm.group = response.data;\r\n                    }\r\n                })\r\n                .catch(function(error) {\r\n                    pcAlert.error({message: 'Failed to retrieve group', error: error});\r\n                });\r\n        };\r\n\r\n        vm.showEditModal = showEditModal;\r\n\r\n        function showEditModal() {\r\n            pcModal.open({\r\n                template:\r\n                    '<pc-add-edit-group-modal modal-instance=\"$modalInstance\" ' + \r\n                        'existing-group=\"$modalData.group\" hide-remove=\"true\">' +\r\n                    '</pc-add-edit-group-modal>',\r\n                modalData: {\r\n                    group: vm.group\r\n                }\r\n            }).result.then(function(group) {\r\n                angular.extend(vm.group, group);\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n})();","(function () {\r\n    'use strict';\r\n\r\n    window.app.component('pcAddGroupMembershipModal', {\r\n        bindings: {\r\n            group: '<',\r\n            modalInstance: '<'\r\n        },\r\n        templateUrl: '/app/groups/membership/pcAddGroupMembershipModal.template.html',\r\n        controller: pcAddGroupMembershipModalController,\r\n        controllerAs: 'vm'\r\n    });\r\n\r\n    function pcAddGroupMembershipModalController() {\r\n        var vm = this;\r\n\r\n        vm.tagsToFilterOn = [];\r\n    }\r\n})();","(function () {\r\n    'use strict';\r\n\r\n    window.app.component('pcGroupMembership', {\r\n        bindings: {\r\n            groupUuid: '<'\r\n        },\r\n        templateUrl: '/app/groups/membership/pcGroupMembership.template.html',\r\n        controller: pcGroupMembershipController,\r\n        controllerAs: 'vm'\r\n    });\r\n\r\n    function pcGroupMembershipController($state, pcApiClient, pcAlert, pcModal) {\r\n        const vm = this;\r\n        var refreshableDataObservable;\r\n                           \r\n        vm.group = null;\r\n        vm.tagsToFilterOn = [];\r\n        vm.isLoaded = false;\r\n\r\n        vm.addMembers = addMembers;\r\n        vm.getMembershipCount = getMembershipCount;\r\n        vm.onTagsChanged = onTagsChanged;\r\n        \r\n        vm.$onInit = onInit;\r\n\r\n        function addMembers() {\r\n            pcModal.open({\r\n                template: '<pc-add-group-membership-modal modal-instance=\"$modalInstance\" group=\"$modalData.group\">' +\r\n                          '</pc-add-group-membership-modal>',\r\n                modalData: {\r\n                    group: vm.group\r\n                }\r\n            }).result.then(() => {\r\n                refreshableDataObservable.refreshNow();\r\n            });\r\n        }\r\n\r\n        function getMembershipCount() {\r\n            if (!vm.group) {\r\n                return 0;\r\n            }\r\n            return vm.group.groups.length + vm.group.things.length;\r\n        }\r\n        \r\n        function onTagsChanged() {\r\n            refreshableDataObservable.refreshNow();\r\n        }\r\n\r\n        function onInit() {\r\n            refreshableDataObservable = pcApiClient.getRefreshClientForComponent(vm);\r\n\r\n            setupDataRefresh();\r\n        }\r\n\r\n        function setupDataRefresh() {\r\n            refreshableDataObservable.poll(_getUrl, 30 * 1000)\r\n                .catch(error => {\r\n                    pcAlert.error({message: 'Failed to get membership data', error: error});\r\n                    vm.isLoaded = true; \r\n                    return Rx.Observable.empty();\r\n                })\r\n                .subscribe(response => {\r\n                    if (null == response.data || response.data.length === 0) {\r\n                        // Nothing was found\r\n                        vm.group = null;\r\n                        return;\r\n                    }\r\n                    \r\n                    vm.group = response.data;\r\n                    vm.isLoaded = true; \r\n                });\r\n        }\r\n        \r\n        // This function will generate a url based on the static information and any tags\r\n        // that need to be filtered on.\r\n        // The url will look like the following if no tags are provided:\r\n        // Groups/<uuid>/Membership?$select=uuid,name,type+&$expand=things($select=uuid,name;$expand=groups(\r\n        //   $select=name),tags),groups($select=uuid,name;expand=tags)\r\n        //\r\n        // The url will look like the following if a tag is provided:\r\n        // Groups/<uuid>/Membership?$select=uuid,name,type+&$expand=things($select=uuid,name;$expand=groups(\r\n        //  $select=name),tags;$filter=tags/any(tag: tag/name eq 'Marker')), groups($select=uuid,name;expand=\r\n        //  tags;$filter=tags/any(tag: tag/name eq 'Marker'))\r\n        function _getUrl() {\r\n            var baseUrl = 'Groups/' + vm.groupUuid + '/Membership' +\r\n                          '?$select=uuid,name,type' +\r\n                          '&$expand=';\r\n            var thingsExpand = 'things($select=uuid,name;$expand=groups($select=name),';\r\n            var groupsExpand = ',groups($select=uuid,name;$expand=';\r\n            var tagExpandString = null;\r\n            var tagFilterString = vm.tagsToFilterOn.length > 0 ?\r\n                    PowerConnect.Tags.getODataTagQueryString(vm.tagsToFilterOn) :\r\n                    null;\r\n                    \r\n            tagExpandString = tagFilterString !== null ?\r\n                                tagExpandString = 'tags;$filter=' + tagFilterString + ')' :\r\n                                tagExpandString = 'tags)';\r\n\r\n            return baseUrl + thingsExpand + tagExpandString + groupsExpand + tagExpandString;\r\n        }\r\n    }\r\n})();\r\n","(function () {\r\n    'use strict';\r\n\r\n    window.app.component('pcMembershipAddSelector', {\r\n        bindings: {\r\n            group: '<',\r\n            tags: '<',\r\n            type: '@',\r\n            title: '@'\r\n        },\r\n        templateUrl: '/app/groups/membership/pcMembershipAddSelector.template.html',\r\n        controller: pcMembershipAddSelectorController,\r\n        controllerAs: 'vm'\r\n    });\r\n\r\n    function pcMembershipAddSelectorController($scope, $log, pcApiClient, pcAlert) {\r\n        var vm = this;\r\n\r\n        vm.items = null;\r\n        \r\n        vm.selectAll = selectAll;\r\n        vm.addSelected = addSelected;\r\n        \r\n        vm.$onInit = onInit;\r\n        \r\n        function onInit() {\r\n            if (vm.type !== 'groups' && vm.type !== 'things') {\r\n                $log.error('Invalid selector type (' + vm.type + ') being used.  Valid options are groups and things');\r\n                return;\r\n            }\r\n\r\n            // $onChanges does not appear to handle when data inside the vm.tags array changes\r\n            // It was only called once when the first tag was added, but was never called again\r\n            $scope.$watchCollection(function() {\r\n                return vm.tags;\r\n            }, _refreshItems);\r\n        }\r\n\r\n        function addSelected() { \r\n            var itemsToAdd = _(vm.items).filter('selected').map('uuid').value();\r\n\r\n            if (itemsToAdd.length === 0) {\r\n                pcAlert.info({message: 'No selected items to add'});\r\n                return;\r\n            }\r\n\r\n            var data = {\r\n                childGroupUuids: vm.type === 'groups' ? itemsToAdd : [],\r\n                thingUuids: vm.type === 'things' ? itemsToAdd : []\r\n            };\r\n\r\n            pcApiClient.post('/Groups/' + vm.group.uuid + '/Membership/Add', data)\r\n                .then(() => {\r\n                    pcAlert.success({message: 'Selected ' + vm.type + ' added'});\r\n\r\n                    var newItems = _.map(itemsToAdd, item => ({uuid: item}));\r\n\r\n                    //ES2015 ALL UP IN YOUR GRILL\r\n                    vm.group[vm.type].push(...newItems);\r\n\r\n                    vm.items = _getShowableItems(vm.items);\r\n                })\r\n                .catch(err => {\r\n                    pcAlert.error({message: 'Failed to add selected ' + vm.type, error: err});\r\n                });\r\n        }\r\n\r\n        function selectAll() {\r\n            _.forEach(vm.items, item => {item.selected = true;});\r\n        }\r\n\r\n        function _refreshItems() {\r\n            var url = _getUrl();\r\n\r\n            if (!url) {\r\n                vm.items = [];\r\n                return;\r\n            }\r\n\r\n            pcApiClient.get(url)\r\n                .then(results => {\r\n                    vm.items = (!results.data || !results.data.result) ?\r\n                                [] :\r\n                                _getShowableItems(results.data.result);\r\n                })\r\n                .catch(err => {\r\n                    pcAlert.error({message: 'Failed to get filtered list of ' + vm.type, error: err});\r\n                });\r\n        }\r\n\r\n        function _getShowableItems(potentialItems) {\r\n            return _.filter(potentialItems, potentialListItem => \r\n                        !_.find(vm.group[vm.type], existingItem => existingItem.uuid === potentialListItem.uuid)\r\n                    );\r\n        }\r\n\r\n        function _getUrl() {\r\n            // NOTE: At some point we may want to bring back a limited set of data when no tags\r\n            //       have been specified to give the user some data to start with.  We may also\r\n            //       want to limit the overall data that is returned to prevent this page from\r\n            //       becoming unusable due to to much data.\r\n            if (vm.tags.length === 0) {\r\n                return null;\r\n            }\r\n\r\n            var queryFilter = PowerConnect.Tags.getODataTagQueryString(vm.tags);\r\n\r\n            return vm.type === 'groups' ?\r\n                'groups?$select=uuid,name&$expand=tags&$filter=' + queryFilter + ' and uuid ne \\'' + vm.group.uuid + '\\'' : \r\n                'things?$select=uuid,name&$expand=tags&$filter=' + queryFilter;\r\n        }\r\n    }\r\n})();","(function () {\r\n    'use strict';\r\n\r\n    window.app.component('pcMembershipEditButtons', {\r\n        bindings: {\r\n            groupUuid: '<',\r\n            editMode: '=', //We need two way binding so the owning component knows how to toggle other UI elements\r\n            collection: '=',\r\n            type: '@' //group or thing\r\n        },\r\n        templateUrl: '/app/groups/membership/pcMembershipEditButtons.template.html',\r\n        controller: pcMembershipEditButtonsController,\r\n        controllerAs: 'vm'\r\n    });\r\n\r\n    function pcMembershipEditButtonsController(pcModal, pcApiClient, pcAlert) {\r\n        var vm = this;\r\n\r\n        vm.editMode = false;\r\n\r\n        vm.allSelected = allSelected;\r\n        vm.selectAll = selectAll;\r\n        vm.done = done;\r\n        vm.removeSelected = removeSelected;\r\n\r\n        function allSelected() {\r\n            return _.every(vm.collection, {remove: true});\r\n        }\r\n\r\n        function selectAll() {\r\n            if (allSelected()) {\r\n                _.forEach(vm.collection, function(item) {\r\n                    item.remove = false;\r\n                });\r\n\r\n                return;\r\n            }\r\n\r\n            _.forEach(vm.collection, function(item) {\r\n                item.remove = true;\r\n            });\r\n        }\r\n\r\n        function done() {\r\n            vm.editMode = false;\r\n\r\n            _.forEach(vm.collection, function(item) {\r\n                item.remove = false;\r\n            });\r\n        }\r\n\r\n        function removeSelected() {\r\n            vm.working = true;\r\n            var selectedCount = _.filter(vm.collection, {remove: true}).length;\r\n\r\n            if (selectedCount === 0) {\r\n                return;\r\n            }\r\n\r\n            pcModal.openConfirmation({\r\n                    title: 'Remove',\r\n                    message: 'Are you sure you want to Remove the selected ' + selectedCount + \r\n                            ' ' + vm.type + 's from this group?',\r\n                    yesText: 'Remove'\r\n                })\r\n                .result.then(function() {\r\n                    var uuidsToPost = _.chain(vm.collection).filter({remove: true}).map('uuid').value();\r\n\r\n                    var finalDataToPost = {};\r\n                    finalDataToPost[(vm.type === 'group' ? 'childGroup' : vm.type) + 'Uuids'] = uuidsToPost;\r\n\r\n                    pcApiClient.post('Groups/' + vm.groupUuid + '/Membership/Remove', finalDataToPost)\r\n                        .then(function() {\r\n                            _.remove(vm.collection, {remove: true});\r\n                            pcAlert.success({\r\n                                message: 'Remove was successful'\r\n                            });\r\n                            done();\r\n                        })\r\n                        .catch(function(err) {\r\n                            pcAlert.error({\r\n                                message: (err.data && err.data.message) ? err.data.message : 'Remove failed'\r\n                            });\r\n                        })\r\n                        .finally(function() {\r\n                            vm.working = false;\r\n                        });\r\n                })\r\n                .catch(function() {\r\n                    vm.working = false;\r\n                });\r\n        }\r\n    }\r\n})();","(function () {\r\n\r\n    window.app.component('pcAddEditGroupScheduleModal', {\r\n        templateUrl: '/app/groups/schedule/pcAddEditGroupScheduleModal.template.html',\r\n        controller: controller,\r\n        controllerAs: 'vm',\r\n        bindings: {\r\n            existingGroupSchedule: '<',\r\n            groupUuid: '<',\r\n            modalInstance: '<'\r\n        }\r\n    });\r\n\r\n    function controller(pcApiClient, pcAlert, pcModal, $rootScope) {\r\n        var vm = this;\r\n\r\n        vm._odataOptions = '$select=id,name,durationMinutes,startDateUtc,notificationsEnabled,notificationRecipients';\r\n\r\n        vm.submit = submit;\r\n        vm.$onInit = $onInit;\r\n        vm.close = close;\r\n        vm.removeGroupSchedule = removeGroupSchedule;\r\n\r\n        vm.durationValues = [\r\n            {value: '', display: '~Select'},\r\n            {value: '15', display: '15'},\r\n            {value: '30', display: '30'},\r\n            {value: '45', display: '45'},\r\n            {value: '60', display: '60'},\r\n            {value: '75', display: '75'},\r\n            {value: '90', display: '90'},\r\n            {value: '105', display: '105'},\r\n            {value: '120', display: '120'},\r\n            {value: '135', display: '135'},\r\n            {value: '150', display: '150'},\r\n            {value: '165', display: '165'},\r\n            {value: '180', display: '180'}\r\n        ];\r\n\r\n        vm.recurrenceValues = [\r\n            {value: 'Never', display: 'Never'}\r\n        ];\r\n\r\n        function $onInit() {\r\n            vm.isDeleting = false;\r\n            if (vm.existingGroupSchedule) {\r\n                vm.isInEditMode = true;\r\n                vm.groupSchedule = angular.extend({}, vm.existingGroupSchedule);\r\n                parseInputModelFields();\r\n            } else {\r\n                vm.isInAddMode = true;\r\n                vm.groupSchedule = {\r\n                    recurrence: 'Never'\r\n                };\r\n            }\r\n        }\r\n\r\n        function parseInputModelFields() {\r\n\r\n            if (vm.existingGroupSchedule.durationMinutes) {\r\n                vm.groupSchedule.durationMinutes = vm.existingGroupSchedule.durationMinutes.toString();\r\n            }\r\n\r\n            var startDateLocal = moment.utc(vm.existingGroupSchedule.startDateUtc, 'YYYY-MM-DD hh:mm:ss').local();\r\n\r\n            vm.startDate = startDateLocal\r\n                .format('MM/DD/YYYY');\r\n            vm.startTime = startDateLocal\r\n                .format('h:mm a');\r\n\r\n            vm.notificationRecipientTags = buildRecipientTags();\r\n        }\r\n\r\n        function buildRecipientTags() {\r\n            var notificationRecipients = [];\r\n\r\n            if (vm.groupSchedule.notificationRecipients === null) {\r\n                return notificationRecipients;\r\n            } else {\r\n                var recipients = vm.groupSchedule.notificationRecipients.split(';');\r\n\r\n                _.forEach(recipients,\r\n                    function (recipient) {\r\n                        notificationRecipients.push({\r\n                            name: recipient\r\n                        });\r\n                    });\r\n            }\r\n            return notificationRecipients;\r\n        }\r\n\r\n        function submit() {\r\n            vm.isSaving = true;\r\n            vm.error = false;\r\n\r\n            buildReturnModelFields();\r\n\r\n            const groupScheduleToSave = angular.extend({}, vm.groupSchedule);\r\n\r\n            const schedulesUrl = `groups/${vm.groupUuid}/schedules`;\r\n\r\n            (vm.isInAddMode ?\r\n                pcApiClient.post(`${schedulesUrl}?${vm._odataOptions}`, groupScheduleToSave)\r\n                : pcApiClient.put(`${schedulesUrl}/${groupScheduleToSave.id}?${vm._odataOptions}`, groupScheduleToSave))\r\n                .then(resp => {\r\n                    let schedule = resp.data;\r\n                    schedule.recurrence = 'Never';\r\n                    vm.modalInstance.close(schedule);\r\n                    pcAlert.success({message: `Group schedule ${(vm.isInAddMode ? 'added' : 'updated')}`});\r\n                })\r\n                .catch(response => {\r\n                    vm.error = window.PowerConnect.ErrorFromResponse.get(response);\r\n                })\r\n                .finally(function() {\r\n                    vm.isSaving = false;\r\n                });\r\n        }\r\n\r\n        function buildReturnModelFields() {\r\n            var startDate = vm.startDate + ' ' + vm.startTime;\r\n            vm.groupSchedule.startDateUtc = moment(startDate, 'M/D/YYYY h:mm:ss a').utc().format('YYYY-MM-DDTHH:mm:ssZ');\r\n\r\n            vm.groupSchedule.notificationRecipients = buildRecipientStringFromTags();\r\n\r\n            if (vm.groupSchedule.durationMinutes && vm.groupSchedule.durationMinutes.length === 0) {\r\n                vm.groupSchedule.durationMinutes = null;\r\n            }\r\n        }\r\n\r\n        function buildRecipientStringFromTags() {\r\n            var recipientString = null;\r\n\r\n            _.forEach(vm.notificationRecipientTags, function (tag) {\r\n                if (recipientString === null) {\r\n                    recipientString = tag.name;\r\n                } else {\r\n                    recipientString += ';' + tag.name;\r\n                }\r\n            });\r\n\r\n            return recipientString;\r\n        }\r\n\r\n        function close() {\r\n            if (vm.isDeleting) {\r\n                vm.isDeleting = false;\r\n                return;\r\n            }\r\n            vm.modalInstance.dismiss();\r\n        }\r\n\r\n        function removeGroupSchedule() {\r\n            vm.error = null;\r\n\r\n            pcApiClient.delete('groups/' + vm.groupUuid + '/schedules/' + vm.groupSchedule.id)\r\n                .then(() => {\r\n                    pcAlert.success({message: vm.groupSchedule.name + ' successfully deleted'});\r\n                    $rootScope.$broadcast(window.PowerConnect.GroupScheduleEvents.deleted, {id: vm.groupSchedule.id});\r\n\r\n                    vm.modalInstance.close();\r\n                })\r\n                .catch(response => {\r\n                    vm.error = window.PowerConnect.ErrorFromResponse.get(response);\r\n                });\r\n        }\r\n    }\r\n})();","(function () {\r\n    'use strict';\r\n\r\n    window.app.component('pcGroupSchedules', {\r\n        templateUrl: '/app/groups/schedule/pcGroupSchedules.template.html',\r\n        controller: pcGroupSchedulesController,\r\n        controllerAs: 'vm',\r\n        bindings: {\r\n            groupUuid: '<'\r\n        }\r\n    });\r\n\r\n    function pcGroupSchedulesController(pcModal, pcApiClient, $rootScope, pcAlert) {\r\n        const vm = this;\r\n        let deletedHandle;\r\n\r\n        vm.$onInit = function () {\r\n            vm.isLoaded = false;\r\n\r\n            setupDataRefresh();\r\n\r\n            deletedHandle = $rootScope.$on(window.PowerConnect.GroupScheduleEvents.deleted, function (event, data) {\r\n                _.remove(vm.groupSchedules, {id: data.id});\r\n            });\r\n        };\r\n\r\n        vm.$onDestroy = function () {\r\n            deletedHandle();\r\n        };\r\n\r\n        vm.showAddModal = showAddModal;\r\n\r\n        function setupDataRefresh() {\r\n            const groupSchedulesUrl = 'groups/' + vm.groupUuid +\r\n                '/schedules?$select=id,name,durationMinutes,startDateUtc,notificationsEnabled,notificationRecipients';\r\n\r\n            const refreshable = pcApiClient.getRefreshClientForComponent(vm);\r\n\r\n            refreshable.poll(groupSchedulesUrl, 30 * 1000)\r\n                .catch(error => {\r\n                    pcAlert.error({message: 'Failed to retrieve group schedule', error: error});\r\n                    vm.isLoaded = true;\r\n                    return Rx.Observable.empty();\r\n                })\r\n                .subscribe(response => {\r\n                    if (response) {\r\n                        vm.groupSchedules = response.data.result;\r\n                        _.forEach(vm.groupSchedules,\r\n                            function(groupSchedule) {\r\n                                groupSchedule.recurrence = 'Never';\r\n                            });\r\n                    }\r\n                    vm.isLoaded = true;\r\n                });\r\n        }\r\n\r\n        function showAddModal() {\r\n            pcModal.open({\r\n                template:\r\n                    '<pc-add-edit-group-schedule-modal modal-instance=\"$modalInstance\"' +\r\n                    'group-uuid=\"$modalData.groupUuid\">' +\r\n                    '</pc-add-edit-group-schedule-modal>',\r\n                modalData: {\r\n                    groupSchedule: vm.groupSchedule,\r\n                    groupUuid: vm.groupUuid\r\n                }\r\n            }).result.then(function (groupSchedule) {\r\n                vm.groupSchedules.splice(_.sortedIndexBy(vm.groupSchedules, groupSchedule, 'name'), 0, groupSchedule);\r\n            });\r\n        }\r\n    }\r\n})();","(function () {\r\n    'use strict';\r\n    window.app.component('pcScheduleRow', {\r\n        templateUrl: '/app/groups/schedule/pcScheduleRow.template.html',\r\n        controller: pcScheduleRowController,\r\n        controllerAs: 'vm',\r\n        bindings: {\r\n            groupSchedule: '<',\r\n            groupUuid: '<'\r\n        }\r\n    });\r\n\r\n    function pcScheduleRowController(pcModal) {\r\n        var vm = this;\r\n        vm.showEditModal = showEditModal;\r\n\r\n        function showEditModal() {\r\n            pcModal.open({\r\n                template:\r\n                    '<pc-add-edit-group-schedule-modal modal-instance=\"$modalInstance\"' +\r\n                    'existing-group-schedule=\"$modalData.groupSchedule\"' +\r\n                    'group-uuid=\"$modalData.groupUuid\">' +\r\n                    '</pc-add-edit-group-schedule-modal>',\r\n                modalData: {\r\n                    groupSchedule: vm.groupSchedule,\r\n                    groupUuid: vm.groupUuid\r\n                }\r\n            }).result.then(function (groupSchedule) {\r\n                angular.extend(vm.groupSchedule, groupSchedule);\r\n            });\r\n        }\r\n\r\n    }\r\n})();","(function () {\r\n    'use strict';\r\n    \r\n    window.app.component('pcGroupSignalState', {\r\n        bindings: {\r\n            group: '<',\r\n            loaded: '&?'\r\n        },\r\n        templateUrl: '/app/groups/summary/pcGroupSignalState.template.html',\r\n        controller: pcGroupSignalStateController,\r\n        controllerAs: 'vm'\r\n    });\r\n\r\n    function pcGroupSignalStateController(pcApiClient, $rootScope, pcAlert) {\r\n        var vm = this,\r\n            activatedHandle,\r\n            deactivatedHandle,\r\n            refreshableDataObservable;\r\n\r\n        vm.$onInit = onInit;\r\n        vm.$onChanges = onChanges;\r\n        vm.$onDestroy = onDestroy;\r\n\r\n        function onInit() {\r\n            activatedHandle = $rootScope.$on(window.PowerConnect.GroupEvents.activated, handleActivationStateChange);\r\n            deactivatedHandle = $rootScope.$on(window.PowerConnect.GroupEvents.deactivated, handleActivationStateChange);\r\n        }\r\n\r\n        function onDestroy() {\r\n            activatedHandle();\r\n            deactivatedHandle();\r\n        }\r\n\r\n        function handleActivationStateChange(event, data) {\r\n            if (data.uuid !== vm.group.uuid) {\r\n                return;\r\n            }\r\n\r\n            vm.isGroupActive = (event.name === window.PowerConnect.GroupEvents.activated);\r\n            \r\n            refreshOrSetup();\r\n        }\r\n\r\n        function onChanges() {\r\n            if (!vm.group) {\r\n                return;\r\n            }\r\n            \r\n            setActiveBasedOnTags();\r\n\r\n            refreshOrSetup();\r\n        }\r\n\r\n        //NOTE: This component often gets its group bound later. Rather than make more destructive\r\n        //      changes to make it more independent, this is an easier and quicker solution.\r\n        function refreshOrSetup() {\r\n            if (!refreshableDataObservable) {\r\n                setupDataRefresh();\r\n            }\r\n            else {\r\n                refreshableDataObservable.refreshNow();\r\n            }\r\n        }\r\n\r\n        function setupDataRefresh() {\r\n            var groupInfoUrl = 'Groups/' + vm.group.uuid + \r\n                                '?$select=uuid' + \r\n                                '&$expand=tags';\r\n            var membershipUrl = 'Groups/' + vm.group.uuid + '/Membership/Enumerated' + \r\n                                '?$select=thingCount' + \r\n                                '&$expand=things($expand=tags)';\r\n\r\n            refreshableDataObservable = pcApiClient.getRefreshClientForComponent(vm);\r\n\r\n            Rx.Observable.zip(\r\n                refreshableDataObservable.poll(groupInfoUrl, 30 * 1000),\r\n                refreshableDataObservable.poll(membershipUrl, 30 * 1000),\r\n                (groupInfoResult, membershipResult) => ({groupInfo: groupInfoResult.data, membership: membershipResult.data})\r\n            )\r\n            .catch(error => {\r\n                pcAlert.error({message: 'Failed to get signal state data', error: error});\r\n\r\n                if (vm.loaded) {\r\n                    vm.loaded();\r\n                }\r\n\r\n                return Rx.Observable.empty();\r\n            })\r\n            .subscribe(result => {\r\n                vm.group = result.groupInfo;\r\n                var membership = result.membership;\r\n\r\n                setActiveBasedOnTags();\r\n                \r\n                vm.info = vm.isGroupActive ? buildSignalStateInfo(vm.group, membership) : undefined;\r\n\r\n                if (vm.loaded) {\r\n                    vm.loaded();\r\n                }\r\n            });\r\n        }\r\n\r\n        function buildSignalStateInfo(group, membership) {\r\n            return {\r\n                lastStartedBy: PowerConnect.Tags.tagValue(vm.group.tags, 'lastStartedBy'),\r\n                startedAt: PowerConnect.Tags.tagValue(vm.group.tags, 'startedAtUtc'),\r\n                thingsActivated: PowerConnect.Tags.tagValue(vm.group.tags, 'thingsActivated'),\r\n                thingsActive: calculateThingsActive(membership.things),\r\n                thingCount: membership.thingCount ? membership.thingCount : 0,\r\n                startedAtUtc: PowerConnect.Tags.tagValue(group.tags, 'startedAtUtc')\r\n            };\r\n        }\r\n\r\n        function setActiveBasedOnTags() {\r\n            vm.isGroupActive = PowerConnect.Tags.hasTag(vm.group.tags, 'startedAtUtc');\r\n        }\r\n\r\n        function calculateThingsActive(things) {\r\n            return _.filter(things, function(thing) {\r\n                return PowerConnect.Tags.hasTag(thing.tags, 'isActive');\r\n            }).length;\r\n        }\r\n    }\r\n\r\n})();","(function () {\r\n    'use strict';\r\n\r\n    window.app.component('pcGroupSummary', {\r\n        templateUrl: '/app/groups/summary/pcGroupSummary.template.html',\r\n        controller: pcGroupSummaryController,\r\n        controllerAs: 'vm',\r\n        bindings: {\r\n            groupUuid: '<' \r\n        }\r\n    });\r\n\r\n    function pcGroupSummaryController(pcApiClient, pcAlert, $rootScope) {\r\n        const vm = this;\r\n        let activatedHandle, deactivatedHandle, refreshableDataObservable;\r\n\r\n        vm.isLoaded = false;\r\n        vm.generalInfoIsLoaded = false;\r\n        vm.signalStateIsLoaded = false;\r\n        vm.activityIsLoaded = false;\r\n\r\n        vm.signalStateLoaded = signalStateLoaded;\r\n        vm.activityLoaded = activityLoaded;\r\n        vm.$onInit = onInit;\r\n        vm.$onDestroy = onDestroy;\r\n\r\n        function signalStateLoaded() {\r\n            vm.signalStateIsLoaded = true;\r\n            setLoaded();\r\n        }\r\n\r\n        function activityLoaded() {\r\n            vm.activityIsLoaded = true;\r\n            setLoaded();\r\n        }\r\n        \r\n        function onInit() {\r\n            activatedHandle = $rootScope.$on(window.PowerConnect.GroupEvents.activated, handleActivationStateChange);\r\n            deactivatedHandle = $rootScope.$on(window.PowerConnect.GroupEvents.deactivated, handleActivationStateChange);\r\n\r\n            refreshableDataObservable = pcApiClient.getRefreshClientForComponent(vm);\r\n\r\n            setupDataRefresh();\r\n        }\r\n        \r\n        function onDestroy() {\r\n            activatedHandle();\r\n            deactivatedHandle();\r\n        }\r\n\r\n        function handleActivationStateChange(event, data) {\r\n            if (data.uuid !== vm.groupUuid) {\r\n                return;\r\n            }\r\n\r\n            refreshableDataObservable.refreshNow();\r\n        }\r\n\r\n        function setLoaded() {\r\n            vm.isLoaded = vm.generalInfoIsLoaded && vm.signalStateIsLoaded && vm.activityIsLoaded;\r\n        }\r\n\r\n        function setupDataRefresh() {\r\n            const groupUrl = `GroupSummaries/${vm.groupUuid}?$select=uuid,name,type&$expand=metrics,tags`;\r\n\r\n            refreshableDataObservable.poll(groupUrl, 30 * 1000)\r\n                .catch(error => {\r\n                    pcAlert.error({message: 'Failed to retrieve group summary data', error: error});\r\n                    vm.generalInfoIsLoaded = true;\r\n                    setLoaded();\r\n                    return Rx.Observable.empty();\r\n                })\r\n                .subscribe(response => {\r\n                    vm.group = response.data;\r\n                    vm.group.totalMembershipCount = vm.group.metrics.totalChildGroups + vm.group.metrics.totalThings;\r\n                    vm.generalInfoIsLoaded = true;\r\n                    setLoaded();\r\n                });\r\n        }\r\n    }\r\n})();","(function () {\r\n    'use strict';\r\n\r\n    window.app.component('pcAddEditSiteModal', {\r\n        templateUrl: '/app/customers/sites/addEdit/pcAddEditSiteModal.template.html',\r\n        controller: pcAddEditSiteController,\r\n        controllerAs: 'vm',\r\n        bindings: {\r\n            customerUuid: '<',\r\n            siteUuid: '<',\r\n            modalInstance: '<'\r\n        }\r\n    });\r\n\r\n    function pcAddEditSiteController($q, pcApiClient, pcAlert) {\r\n        const _odataOptions = '$select=uuid,name,type&$expand=tags';\r\n        const vm = this;\r\n\r\n        vm.isLoaded = false;\r\n        vm.isInAddMode = !vm.siteUuid;\r\n\r\n        vm.timezones = [];\r\n        vm.isos = [];\r\n        vm.siteTypes = [];\r\n\r\n        vm.siteType = null;\r\n        vm.timezone = null;\r\n        vm.iso = null;\r\n\r\n        // Address properties\r\n        vm.searchAddress = null;\r\n        vm.geoAddress = null;\r\n\r\n        vm.submit = submit;\r\n        vm.$onInit = $onInit;\r\n        vm.close = close;\r\n\r\n        function submit() {\r\n            vm.errorMsg = null;\r\n            vm.error = false;\r\n           \r\n            if (!vm.geoAddress) {\r\n                vm.error = true;\r\n                vm.errorMsg = 'Please select an address from the list of available address.';\r\n                return;\r\n            }\r\n\r\n            vm.isSaving = true;\r\n            \r\n            // The extends will only add the tags and features arrays if not already in site\r\n            // If they exist in site then those will be copied over to siteToSave\r\n            const siteToSave = angular.extend({tags: [], features: [], type: 'Site'}, vm.site); \r\n            \r\n            PowerConnect.Tags.setTag(siteToSave.tags,'siteTypeId',vm.siteType);\r\n            PowerConnect.Tags.setTag(siteToSave.tags, 'tz', vm.timezone);\r\n            PowerConnect.Tags.setTag(siteToSave.tags, 'isoRef', vm.iso);\r\n\r\n            if (!vm.isInAddMode) {\r\n                // clear out the features\r\n                siteToSave.features = [];\r\n            }\r\n            siteToSave.features.push(..._.filter(vm.features, 'isActive').map(x => x.id));\r\n\r\n            _convertGeoAddressToTags(siteToSave);\r\n            \r\n            if (vm.isInAddMode) {\r\n                siteToSave.parentGroupUuid = vm.customerUuid;\r\n            }\r\n\r\n            (vm.isInAddMode ?\r\n                pcApiClient.post(`Groups?${_odataOptions}`, siteToSave) :\r\n                pcApiClient.put(`Groups/${siteToSave.uuid}?${_odataOptions}`, siteToSave))\r\n                .then(response => {\r\n                    vm.modalInstance.close(response.data);\r\n                    pcAlert.success({message: `Site ${(vm.isInAddMode ? 'added' : 'updated')}`});\r\n                })\r\n                .catch(() => {\r\n                    vm.error = true;\r\n                })\r\n                .finally(() => {\r\n                    vm.isSaving = false;\r\n                });\r\n        }\r\n\r\n        function _convertGeoAddressToTags(siteToSave) {\r\n            // Depending on the information provided to the google address search the resulting\r\n            // returned address may or may not have one or more fields\r\n            if (vm.geoAddress.address1) {\r\n                PowerConnect.Tags.setTag(siteToSave.tags,'geoStreet',vm.geoAddress.address1);\r\n            }\r\n            if (vm.geoAddress.city) {\r\n                PowerConnect.Tags.setTag(siteToSave.tags,'geoCity',vm.geoAddress.city);\r\n            }\r\n            if (vm.geoAddress.state) {\r\n                PowerConnect.Tags.setTag(siteToSave.tags,'geoState',vm.geoAddress.state);\r\n            }\r\n            if (vm.geoAddress.zip) {\r\n                PowerConnect.Tags.setTag(siteToSave.tags,'geoPostalCode',vm.geoAddress.zip);\r\n            }\r\n            \r\n            // This field will always be returned as part of the google address response\r\n            let geoCoord = PowerConnect.Address.getGeoCoordFromPosition(vm.geoAddress.position);\r\n            PowerConnect.Tags.setTag(siteToSave.tags,'geoCoord', geoCoord);\r\n        }\r\n\r\n        function close() {\r\n            vm.modalInstance.dismiss();\r\n        }\r\n\r\n        function $onInit() {\r\n            let listOfEndpoints = [\r\n                _loadFeatures(),\r\n                _getDropDownList('Timezones?$select=description,olsonTz', vm.timezones),\r\n                _getDropDownList('Isos', vm.isos),\r\n                _getDropDownList('SiteTypes', vm.siteTypes)\r\n            ];\r\n\r\n            if (!vm.isInAddMode) {\r\n                listOfEndpoints.push(_loadExistingSite());\r\n            }\r\n\r\n            _loadResources(listOfEndpoints);\r\n        }\r\n\r\n        function _loadResources(listOfEndpoints) {\r\n            var deferredRequest = $q.defer();\r\n\r\n            $q.all(listOfEndpoints)\r\n            .then(() => {\r\n                _setActiveFeatures();\r\n                deferredRequest.resolve();\r\n            })\r\n            .catch(err => {\r\n                deferredRequest.reject(err);\r\n            })\r\n            .finally(() => {\r\n                vm.isLoaded = true;\r\n            });\r\n\r\n            return deferredRequest.promise;\r\n        }\r\n\r\n        function _loadFeatures() {\r\n            return pcApiClient.get('Features')\r\n                .then(response => {\r\n                    if (response && response.data && response.data.result) {\r\n                        vm.features = response.data.result;\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    pcAlert.error({message: 'Failed to load features', error: error});\r\n                });\r\n        \r\n        }\r\n\r\n        function _getDropDownList(resource, dropdownCollection) {\r\n            return pcApiClient.get(resource)\r\n                .then((response) => {\r\n                    if (response && response.data && response.data.result) {\r\n                        dropdownCollection.push.apply(dropdownCollection, _.map(response.data.result, value => (\r\n                            {\r\n                                value: value.id || value.olsonTz,\r\n                                display: value.description || value.name\r\n                            }\r\n                        )));\r\n                    }  \r\n                })\r\n                .catch(error => {\r\n                    pcAlert.error({message: `Failed to load ${resource}`, error: error});\r\n                });\r\n        }\r\n\r\n        function _loadExistingSite() {\r\n            return pcApiClient.get(`Groups/${vm.siteUuid}?$expand=tags,features`)\r\n                .then(response => {\r\n                    vm.site = response.data;\r\n\r\n                    vm.siteType = parseInt(PowerConnect.Tags.tagValue(vm.site.tags, 'siteTypeId'));\r\n                    vm.timezone = PowerConnect.Tags.tagValue(vm.site.tags, 'tz');\r\n                    vm.iso = parseInt(PowerConnect.Tags.tagValue(vm.site.tags, 'isoRef'));\r\n                    vm.searchAddress = PowerConnect.Address.getAddressFromTags(vm.site.tags); \r\n                    vm.geoAddress =  PowerConnect.Address.getAddressObjectFromTags(vm.site.tags);\r\n                })\r\n                .catch(error => {\r\n                    pcAlert.error({message: 'Failed to retrieve site to edit!', error: error});\r\n                    vm.modalInstance.dismiss();\r\n                });\r\n        }\r\n\r\n        function _setActiveFeatures() {\r\n            // loop through the group features and see if any are active\r\n            // If the site is not loaded or does not have any features then all\r\n            // featues will be marked as not active\r\n            _.forEach(vm.features, (feature, key) => {\r\n                vm.features[key].isActive = false;\r\n                if (vm.site && vm.site.features) {\r\n                    if (_.some(vm.site.features, {id: feature.id})) {\r\n                        feature.isActive = true;\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n})();","(function () {\r\n    'use strict';\r\n\r\n    window.app.component('pcAddEditContactModal', {\r\n        templateUrl: '/app/customers/sites/contacts/pcAddEditContactModal.template.html',\r\n        controller: controller,\r\n        controllerAs: 'vm',\r\n        bindings: {\r\n            contactId: '<?',\r\n            modalInstance: '<',\r\n            parentGroupUuid: '<',   //Used when editing\r\n            customerUuid: '<',      //Used when adding\r\n            siteUuid: '<'           //Used when adding\r\n        }\r\n    });\r\n\r\n    function controller(pcApiClient, pcAlert, $q) {\r\n        const vm = this,\r\n            _odataOptions = '$select=id,firstName,lastName,title,notificationPreference,email,emailFormat,' +\r\n                                     'workPhone,extension,mobilePhone,wirelessCarrierId';\r\n\r\n        vm.isLoaded = false;\r\n        vm.isInAddMode = !vm.contactId;\r\n\r\n        vm.wirelessCarriers = [];\r\n        \r\n        vm.emailFormats = [{value: 2, display: 'HTML'}, {value: 1, display: 'Text'}];\r\n        vm.notificationPreferences = [\r\n            {value: 'None', display: 'None'},\r\n            {value: 'Email', display: 'Email'},\r\n            {value: 'Sms', display: 'SMS'},\r\n            {value: 'EmailSms', display: 'Email And SMS'},\r\n        ];\r\n        vm.parents = [{value: vm.customerUuid, display: 'Customer'},\r\n            {value: vm.siteUuid, display: 'Site'}];\r\n\r\n        vm.$onInit = onInit;\r\n        vm.submit = submit;\r\n\r\n        function onInit() {\r\n            const deferredRequest = $q.defer();\r\n\r\n            const calls = [_loadWirelessCarriers()];\r\n\r\n            if (!vm.isInAddMode) {\r\n                calls.push(_loadSite());\r\n            }\r\n\r\n            $q.all(calls)\r\n                .then(() => {\r\n                    deferredRequest.resolve();\r\n                })\r\n                .catch(err => {\r\n                    deferredRequest.reject(err);\r\n                })\r\n                .finally(() => {\r\n                    vm.isLoaded = true;\r\n                });\r\n        }\r\n\r\n        function _loadSite() {\r\n            return pcApiClient.get(`Groups/${vm.parentGroupUuid}/Contacts?` + \r\n                                _odataOptions + \r\n                                `&$filter=id eq ${vm.contactId}`)\r\n                .then(response => {\r\n                    if (response && response.data && response.data.result && response.data.result.length === 1) {\r\n                        vm.contact = response.data.result[0];\r\n                    }\r\n                    else {\r\n                        pcAlert.error({message: 'Contact not found!'});\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    pcAlert.error({message: 'Failed to load contact', error: error});\r\n                });\r\n        }\r\n\r\n        function _loadWirelessCarriers() {\r\n            return pcApiClient.get('WirelessCarriers')\r\n                .then(response => {\r\n                    if (response && response.data && response.data.result) {\r\n                        vm.wirelessCarriers.push.apply(vm.wirelessCarriers, _.map(response.data.result, value => (\r\n                            {\r\n                                value: value.id,\r\n                                display: value.name\r\n                            }\r\n                        )));\r\n                    }  \r\n                })\r\n                .catch(error => {\r\n                    pcAlert.error({message: 'Failed to load wireless carriers', error: error});\r\n                });\r\n        }\r\n\r\n        function submit() {\r\n            vm.error = false;\r\n            vm.isSaving = true;\r\n\r\n            //UI-Mask will make phone numbers be blank.\r\n            if (vm.contact.workPhone === '') {\r\n                delete vm.contact.workPhone;\r\n                delete vm.contact.extension;\r\n            }\r\n\r\n            if (vm.contact.mobilePhone === '') {\r\n                delete vm.contact.mobilePhone;\r\n                delete vm.contact.wirelessCarrier;\r\n            }\r\n\r\n            (vm.isInAddMode ?\r\n                pcApiClient.post(`Groups/${vm.contact.parentGroupUuid}/Contacts?${_odataOptions}`, vm.contact) :\r\n                pcApiClient.put(`Groups/${vm.parentGroupUuid}/Contacts/${vm.contactId}?${_odataOptions}`, vm.contact))\r\n                .then(response => {\r\n                    vm.modalInstance.close(response.data);\r\n                    pcAlert.success({message: `Contact ${(vm.isInAddMode ? 'added' : 'updated')}`});\r\n                })\r\n                .catch(response => {\r\n                    vm.error = window.PowerConnect.ErrorFromResponse.get(response);\r\n                })\r\n                .finally(() => {\r\n                    vm.isSaving = false;\r\n                });\r\n        }\r\n    }\r\n})();","(function () {\r\n    'use strict';\r\n    \r\n    window.app.component('pcSiteContacts', {\r\n        bindings: {\r\n            siteUuid: '<',\r\n            customerUuid: '<'\r\n        },\r\n        templateUrl: '/app/customers/sites/contacts/pcSiteContacts.template.html',\r\n        controller: controller,\r\n        controllerAs: 'vm'\r\n    });\r\n\r\n    function controller($q, $timeout, pcApiClient, pcAlert, pcModal) {\r\n        const vm = this;\r\n\r\n        const select = 'id, firstName, lastName, email, workPhone, mobilePhone, title';\r\n        const siteContactsUrl = `Groups/${vm.siteUuid}/Contacts?$select=${select}`;\r\n        const customerContactsUrl = `Groups/${vm.customerUuid}/Contacts?$select=${select}`;\r\n\r\n        vm.search = search;\r\n        vm.nextPage = nextPage;\r\n        vm.showAddContactModal = showAddContactModal;\r\n        vm.showEditContactModal = showEditContactModal;\r\n\r\n        //Exposed for testing.\r\n        vm.setFirstPageLoad = setFirstPageLoad;\r\n        \r\n        vm.$onInit = () => {\r\n            setFirstPageLoad();\r\n            retrieveData(true);\r\n        };\r\n\r\n        function setFirstPageLoad() {\r\n            vm.nextSiteContactsUrl = siteContactsUrl;\r\n            vm.nextCustomerContactsUrl = customerContactsUrl;\r\n            vm.contacts = null;\r\n            vm.totalSiteContacts = 0;\r\n            vm.totalCustomerContacts = 0;\r\n            vm.isLoaded = false;\r\n            vm.isBusy = false;\r\n        }\r\n\r\n        function nextPage() {\r\n            if (vm.isBusy || (!vm.nextSiteContactsUrl && !vm.nextCustomerContactsUrl)) {\r\n                // Either busy or no more data\r\n                return;\r\n            }\r\n \r\n            retrieveData(false);\r\n        }\r\n\r\n        function search(text) {\r\n            vm.nextSiteContactsUrl = siteContactsUrl;\r\n            vm.nextCustomerContactsUrl = customerContactsUrl;\r\n\r\n            vm.isFiltered = false;\r\n            vm.searchText = text;\r\n\r\n            if (text && text.length > 0) {\r\n                let filter = `${PowerConnect.OData.containsFilter('firstName',text, 'or')}`;\r\n                filter += ` or ${PowerConnect.OData.containsFilter('lastName',text, 'or')}`;\r\n            \r\n                vm.nextSiteContactsUrl += `&$filter=${filter}`;\r\n                vm.nextCustomerContactsUrl += `&$filter=${filter}`;\r\n\r\n                vm.isFiltered = true;\r\n            }\r\n\r\n            retrieveData(true);\r\n        }\r\n\r\n        function retrieveData(setLoader) {\r\n            vm.isBusy = true;\r\n            if (setLoader) {\r\n                // Reset the isLoaded flag so that the spinner will be shown while the\r\n                // new set of data is loaded\r\n                vm.isLoaded = false;\r\n                vm.contacts = null;\r\n            }\r\n\r\n            const listOfEndpoints = [];\r\n\r\n            if (vm.nextCustomerContactsUrl) {\r\n                listOfEndpoints.push(loadCustomerContacts());\r\n            }\r\n\r\n            if (vm.nextSiteContactsUrl) {\r\n                listOfEndpoints.push(loadSiteContacts());\r\n            }\r\n\r\n            $q.all(listOfEndpoints)\r\n                .finally(() => {\r\n                    if (vm.isLoaded === false) {\r\n                        // When page data is initially loaded (whether because of filtering change or page load)\r\n                        // the infinite scroll component requires this delay or it will load roughtly two pages\r\n                        // worth of data.\r\n                        $timeout(() => {\r\n                            vm.isBusy = false;\r\n                        }, 1000);\r\n                    } else {\r\n                        vm.isBusy = false;\r\n                    }\r\n                    vm.isLoaded = true;\r\n                });\r\n        }\r\n\r\n        function loadCustomerContacts() {\r\n            return pcApiClient.get(vm.nextCustomerContactsUrl)\r\n                .then(response => {\r\n                    updateContacts(response.data.result, 'Customer');\r\n                    vm.nextCustomerContactsUrl = response.data.nextUrl;\r\n                    vm.totalCustomerContacts = response.data.totalCount; \r\n                })\r\n                .catch(error => {\r\n                    pcAlert.error({message: 'Failed to retrieve customer contacts', error: error});\r\n                });\r\n        }\r\n\r\n        function loadSiteContacts() {\r\n            return pcApiClient.get(vm.nextSiteContactsUrl)\r\n                .then(response => {\r\n                    updateContacts(response.data.result, 'Site');\r\n                    vm.nextSiteContactsUrl = response.data.nextUrl;\r\n                    vm.totalSiteContacts = response.data.totalCount; \r\n                })\r\n                .catch(error => {\r\n                    pcAlert.error({message: 'Failed to retrieve site contacts', error: error});\r\n                });\r\n        }\r\n\r\n        function updateContacts(contacts, contactType) {\r\n            if (!vm.contacts) {\r\n                vm.contacts = _.map(contacts, x => addType(x, contactType));\r\n            }\r\n            else {\r\n                vm.contacts = _.chain(_.map(contacts, x => addType(x, contactType)))\r\n                            .concat(vm.contacts)\r\n                            .orderBy(['firstName', 'lastName'])\r\n                            .value();\r\n            }\r\n        }\r\n\r\n        function addType(contact, type) {\r\n            contact.type = type;\r\n            return contact;\r\n        }\r\n        \r\n        function showAddContactModal() {\r\n            pcModal.open({\r\n                template: `<pc-add-edit-contact-modal modal-instance=\"$modalInstance\" \r\n                                customer-uuid=\"$modalData.customerUuid\"\r\n                                site-uuid=\"$modalData.siteUuid\"\r\n                            </pc-add-edit-contact-modal>`,\r\n                modalData: {\r\n                    customerUuid: vm.customerUuid,\r\n                    siteUuid: vm.siteUuid\r\n                }\r\n            }).result.then(() => {\r\n                //Why not just add it to the list? Because of the infinite scrolling. We don't know where they might be in the\r\n                //sorted/searched list. Therefore we don't know where to add it. The only thing we can do to make sure\r\n                //the screen stays consistent is to reload.\r\n                vm.setFirstPageLoad();\r\n                vm.search(vm.searchText);\r\n            });\r\n        }\r\n\r\n        function showEditContactModal(contact) {\r\n            pcModal.open({\r\n                template: `<pc-add-edit-contact-modal modal-instance=\"$modalInstance\"\r\n                                contact-id=\"$modalData.contactId\"\r\n                                parent-group-uuid=\"$modalData.parentGroupUuid\"\r\n                            </pc-add-edit-contact-modal>`,\r\n                modalData: {\r\n                    contactId: contact.id,\r\n                    parentGroupUuid: contact.type === 'Customer' ? vm.customerUuid : vm.siteUuid\r\n                }\r\n            }).result.then(updatedContact => {\r\n                angular.extend(contact, updatedContact);\r\n            });\r\n        }\r\n    }\r\n})();\r\n","(function () {\r\n    'use strict';\r\n    \r\n    window.app.component('pcSiteHeader', {\r\n        bindings: {\r\n            siteUuid: '<',\r\n            customerUuid: '<'\r\n        },\r\n        templateUrl: '/app/customers/sites/layout/pcSiteHeader.template.html',\r\n        controller: pcSiteHeaderController,\r\n        controllerAs: 'vm'\r\n    });\r\n\r\n    function pcSiteHeaderController($window, $q, pcApiClient, pcAlert) {\r\n        var vm = this;\r\n\r\n        vm.customer = null;\r\n        vm.site = null;\r\n\r\n        vm.back = back;\r\n        vm.$onInit = onInit;\r\n\r\n        function back() {\r\n            $window.history.back();\r\n        }\r\n\r\n        function onInit() {\r\n            $q.all([pcApiClient.get(`Groups/${vm.customerUuid}`),\r\n                    pcApiClient.get(`Groups/${vm.siteUuid}`)])\r\n                .then(responses => {\r\n                    vm.customer = responses[0].data;\r\n                    vm.site = responses[1].data;\r\n                })\r\n                .catch(error => {\r\n                    pcAlert.error({message: 'Failed to retrieve customer and/or site', error: error});\r\n                });\r\n        }\r\n    }\r\n\r\n})();","(function () {\r\n    'use strict';\r\n    \r\n    window.app.component('pcSiteBids', {\r\n        bindings: {\r\n            siteUuid: '<',\r\n            loaded: '&?'\r\n        },\r\n        templateUrl: '/app/customers/sites/summary/pcSiteBids.template.html',\r\n        controller: controller,\r\n        controllerAs: 'vm'\r\n    });\r\n\r\n    function controller(pcApiClient, $q, pcAlert) {\r\n        var vm = this;\r\n\r\n        vm.$onInit = onInit;\r\n\r\n        const bidsUrl = `Groups/${vm.siteUuid}/Bids?$select=id,programName,periodDescription,bidHourDescription,strategyName`;\r\n\r\n        function onInit() {\r\n            pcApiClient.get(bidsUrl)\r\n                .then(response => {\r\n                    vm.siteBids = response.data.result;\r\n                })\r\n                .catch(error => {\r\n                    pcAlert.error({message: 'Failed to retrieve bids', error: error});\r\n                })\r\n                .finally(() => {\r\n                    if (vm.loaded) {\r\n                        vm.loaded();\r\n                    }\r\n                });\r\n        }\r\n    }\r\n})();\r\n","(function () {\r\n    'use strict';\r\n\r\n    window.app.component('pcSiteOptButton', {\r\n        bindings: {\r\n            which: '@',     //Should be 'in' or 'out'\r\n            siteUuid: '<'\r\n        },\r\n        templateUrl: '/app/customers/sites/summary/pcSiteOptButton.template.html',\r\n        controller: controller,\r\n        controllerAs: 'vm'\r\n    });\r\n\r\n    function controller(pcApiClient, pcAlert) {\r\n        var vm = this;\r\n\r\n        vm.click = click;\r\n        vm.finished = finished;\r\n        vm.error = error;\r\n\r\n        function click() {\r\n            vm.working = true;\r\n            return pcApiClient.post(vm.which === 'in' ? `Groups/${vm.siteUuid}/OptIn` : `Groups/${vm.siteUuid}/OptOut`);\r\n        }\r\n\r\n        function finished() {\r\n            vm.working = false;\r\n            pcAlert.success({message: `All equipment has been opted ${vm.which}`});\r\n        }\r\n\r\n        function error() {\r\n            vm.working = false;\r\n        }\r\n    }\r\n})();","(function () {\r\n    'use strict';\r\n    \r\n    window.app.component('pcSiteReductionHistory', {\r\n        bindings: {\r\n            siteUuid: '<',\r\n            loaded: '&?'\r\n        },\r\n        templateUrl: '/app/customers/sites/summary/pcSiteReductionHistory.template.html',\r\n        controller: controller,\r\n        controllerAs: 'vm'\r\n    });\r\n\r\n    function controller(pcApiClient, pcAlert) {\r\n        var vm = this;\r\n\r\n        vm.$onInit = onInit;\r\n\r\n        const historyUrl = `Groups/${vm.siteUuid}/ReductionHistory?$select=uuid,eventType,programName,startDateUtc,endDateUtc`;\r\n\r\n        function onInit() {\r\n            pcApiClient.get(historyUrl)\r\n                .then((response) => {\r\n                    vm.siteHistory = response.data.result;\r\n                })\r\n                .catch((error) => {\r\n                    pcAlert.error({message: 'Failed to retrieve reduction history', error: error});\r\n                })\r\n                .finally(() => {\r\n                    if (vm.loaded) {\r\n                        vm.loaded();\r\n                    }\r\n                });\r\n        }\r\n\r\n    }\r\n\r\n})();\r\n","(function() {\r\n    'use strict';\r\n    window.app.component('pcSiteStrategies', {\r\n        bindings: {\r\n            siteUuid: '<',\r\n            loaded: '&?'\r\n        },\r\n        templateUrl: '/app/customers/sites/summary/pcSiteStrategies.template.html',\r\n        controller: pcSiteSummaryController,\r\n        controllerAs: 'vm'\r\n    });\r\n    \r\n    function pcSiteSummaryController($q, pcApiClient, pcAlert) {\r\n        var vm = this;\r\n\r\n        const siteUrl = `Groups/${vm.siteUuid}?$select=uuid,name&$expand=tags`;\r\n        const strategyUrl = `Groups/${vm.siteUuid}/Strategies`;\r\n        \r\n        vm.$onInit = onInit;\r\n        \r\n        function onInit() {\r\n            $q.all([pcApiClient.get(siteUrl), pcApiClient.get(strategyUrl)])\r\n                .then(responses => {\r\n                    vm.site = responses[0].data;\r\n                    vm.strategies = responses[1].data.result;\r\n                })\r\n                .catch(error => {\r\n                    pcAlert.error({message: 'Failed to retrieve site related data', error: error});\r\n                })\r\n                .finally(() => {\r\n                    if (vm.loaded) {\r\n                        vm.loaded();\r\n                    }\r\n                });\r\n        }\r\n    }\r\n})();","(function () {\r\n    'use strict';\r\n    \r\n    window.app.component('pcSiteSummary', {\r\n        bindings: {\r\n            siteUuid: '<',\r\n            customerUuid: '<'\r\n        },\r\n        templateUrl: '/app/customers/sites/summary/pcSiteSummary.template.html',\r\n        controller: controller,\r\n        controllerAs: 'vm'\r\n    });\r\n\r\n    function controller(pcApiClient, $q, pcAlert, pcModal) {\r\n        const vm = this;\r\n        const siteUrl = `GroupSummaries/${vm.siteUuid}?$select=uuid,name,type&$expand=metrics,tags`;\r\n        const customerUrl = `Groups/${vm.customerUuid}?$select=uuid,name`;\r\n\r\n        vm.generalInfoIsLoaded = false;\r\n        vm.siteBidsIsLoaded = false;\r\n        vm.siteReductionHistoryIsLoaded = false;\r\n        vm.siteStrategiesIsLoaded = false;\r\n\r\n        vm.siteBidsLoaded = siteBidsLoaded;\r\n        vm.siteReductionHistoryLoaded = siteReductionHistoryLoaded;\r\n        vm.siteStrategiesLoaded = siteStrategiesLoaded;\r\n\r\n        vm.defaultTimezone = moment.tz.guess();\r\n        vm.$onInit = onInit;\r\n        \r\n        vm.editSite = editSite;\r\n\r\n        function onInit() {\r\n            $q.all([pcApiClient.get(customerUrl), pcApiClient.get(siteUrl)])\r\n                .then((responses) => {\r\n                    vm.customerName = responses[0].data.name;\r\n\r\n                    vm.site = responses[1].data;\r\n                    vm.siteAddress = PowerConnect.Address.getAddressFromTags(vm.site.tags);\r\n\r\n                    getLocalTimeAtSite();\r\n\r\n                })\r\n                .catch((error) => {\r\n                    pcAlert.error({message: 'Failed to retrieve site', error: error});\r\n                })\r\n                .finally(() => {\r\n                    vm.generalInfoIsLoaded = true;\r\n                    setLoaded();\r\n                });\r\n        }\r\n\r\n        function editSite() {\r\n            pcModal.open({\r\n                template:\r\n                    `<pc-add-edit-site-modal modal-instance=\"$modalInstance\" customer-uuid=\"$modalData.customerUuid\"\r\n                     site-uuid=\"$modalData.siteUuid\">\r\n                    </pc-add-edit-site-modal>`,\r\n                modalData: {\r\n                    customerUuid: vm.customerUuid,\r\n                    siteUuid: vm.site.uuid\r\n                }\r\n            }).result.then(site => {\r\n                angular.extend(vm.site, site);\r\n            });\r\n        }\r\n\r\n        function getLocalTimeAtSite() {\r\n            const olsonTz = PowerConnect.Tags.tagValue(vm.site.tags, 'tz') || vm.defaultTimezone;\r\n\r\n            vm.site.localTimeUtc = moment().utc().format('H:mm z');\r\n            vm.site.localTime = moment().tz(olsonTz).format('h:mm a z');\r\n        }\r\n\r\n        function siteBidsLoaded() {\r\n            vm.siteBidsIsLoaded = true;\r\n            setLoaded();\r\n        }\r\n\r\n        function siteReductionHistoryLoaded() {\r\n            vm.siteReductionHistoryIsLoaded = true;\r\n            setLoaded();\r\n        }\r\n\r\n        function siteStrategiesLoaded() {\r\n            vm.siteStrategiesIsLoaded = true;\r\n            setLoaded();\r\n        }\r\n\r\n        function setLoaded() {\r\n            vm.isLoaded = vm.generalInfoIsLoaded && vm.siteBidsIsLoaded && vm.siteReductionHistoryIsLoaded &&\r\n                          vm.siteStrategiesIsLoaded;\r\n        }\r\n    }\r\n})();\r\n","angular.module(\"app\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"/app/groups/pcRecentGroupActivity.template.html\",\"<div> <pc-empty-section ng-if=\\\"!vm.groupActivity.length\\\" icon=\\\"icon-section-groups\\\" title=\\\"No Activity for this Group\\\"> </pc-empty-section> <div class=\\\"activity-summary-row\\\" ng-repeat=\\\"groupActivity in vm.groupActivity track by groupActivity.id\\\"> <div class=\\\"counter\\\"><div class=\\\"counter-label\\\">{{groupActivity.timestampUtc | pcLocalTime:\\'D\\'}}</div></div> <div class=\\\"title\\\"> <label>{{groupActivity.activityType | pcCamelCaseToHuman}}</label> <div class=\\\"title-name\\\">{{groupActivity.timestampUtc | pcLocalTime}}</div> </div> <div class=\\\"stat-holder large\\\"> <label>{{groupActivity.activityType | pcCamelCaseToHuman}} By</label> <div class=\\\"stat-value\\\">{{groupActivity.sourceId}}</div> </div> <div class=\\\"stat-holder small\\\"> <label>&nbsp;</label> <div class=\\\"stat-value\\\">&nbsp;</div> </div> </div> </div>\");\n$templateCache.put(\"/app/layout/pcHeader.template.html\",\"<header ng-if=\\\"vm.isVisible()\\\"> <div class=\\\"app-logo\\\"> <a ui-sref=\\\"{{vm.config.homeRoute}}\\\"><img src=\\\"img/noc-logo@2x.png\\\" alt=\\\"Murata - Network Operations\\\"></a> </div> <ul class=\\\"menu\\\"> <li><a ui-sref=\\\"groups.dashboard\\\" ui-sref-active=\\\"{\\'active\\': \\'groups\\'}\\\">Groups</a></li> <li><a ui-sref=\\\"customers.dashboard\\\" ui-sref-active=\\\"{\\'active\\': \\'customers\\'}\\\">Customers</a></li> <li><a ui-sref=\\\"curtailments.dashboard\\\" ui-sref-active=\\\"{\\'active\\': \\'curtailments\\'}\\\">Curtailments</a></li> </ul> <dropdown-toggle close-on-click=\\\"true\\\" pane-align=\\\"right\\\" class=\\\"menu account\\\"> <toggle class=\\\"toggle-item\\\"><a href=\\\"\\\"><i class=\\\"icon-user\\\"></i></a></toggle> <pane> <ul class=\\\"menu vertical\\\"> <li><a ng-click=\\\"vm.logout()\\\">Logout</a></li> </ul> </pane> </dropdown-toggle> </header>\");\n$templateCache.put(\"/app/mapExample/layout.template.html\",\"<div class=\\\"content-holder\\\"> <h1>Mapping examples</h1> <div ui-view></div> </div>\");\n$templateCache.put(\"/app/mapExample/mapExample.template.html\",\"<style>.my-map .map {\\r\\n        height: 500px;\\r\\n        width: 100%;\\r\\n    }</style> <div class=\\\"row\\\"> <div class=\\\"small-8 columns\\\"> <pc-map class=\\\"my-map\\\" markers=\\\"vm.markers\\\"></pc-map> </div> <div class=\\\"small-4 columns\\\"> <div> Search: <input type=\\\"text\\\" ng-model=\\\"vm.search\\\" pc-address-autocomplete=\\\"vm.searchAddressObject\\\" bias-on-users-location=\\\"true\\\"><br> <span>Search term: {{vm.search}}</span><br> <span>Search object: {{vm.searchAddressObject}}</span> </div> <hr> <div> Geocode address: <input type=\\\"text\\\" ng-model=\\\"vm.geocodeAddress\\\"> <button class=\\\"button\\\" ng-click=\\\"vm.geocode()\\\">Geocode</button> <span>{{vm.position}}</span> <span>{{vm.geocodeResult}}</span> </div> </div> </div> <div class=\\\"row\\\"> <div class=\\\"small-8 columns\\\"> <pc-map class=\\\"my-map\\\" markers=\\\"vm.markers\\\"></pc-map> </div> </div>\");\n$templateCache.put(\"/app/security/pcForgotPasswordForm.template.html\",\"<form name=\\\"vm.form\\\" ng-submit=\\\"vm.form.$valid && vm.submit()\\\"> <section class=\\\"account-form\\\"> <div class=\\\"row\\\"> <div class=\\\"medium-6 medium-centered large-5 large-centered columns text-center\\\"> <img src=\\\"img/noc-logo@2x.png\\\" class=\\\"account-logo\\\"> <div ng-show=\\\"vm.error != null\\\" class=\\\"alert callout\\\" data-closable> {{vm.error}} </div> <section ng-if=\\\"vm.submitted\\\"> <div class=\\\"message-box\\\"> If there is an account associated with the email you provided, you will receive an email shortly. Please check you junk folder if you do not receive it. </div> </section> <section ng-if=\\\"!vm.submitted\\\"> <div class=\\\"message-box\\\"> Enter your email address below and if we find an account linked to that email, we will send you a link to reset your password </div> <input type=\\\"text\\\" name=\\\"email\\\" placeholder=\\\"Email\\\" ng-model=\\\"vm.email\\\" required> <p> <button class=\\\"button\\\" type=\\\"submit\\\" pc-busy-button=\\\"vm.submitting\\\"> {{vm.buttonText}} </button> </p> </section> <p class=\\\"forgot-password text-center\\\"><a ui-sref=\\\"login\\\">Back to Login?</a></p> </div> </div> </section> </form>\");\n$templateCache.put(\"/app/security/pcLoginForm.template.html\",\"<form name=\\\"vm.form\\\" ng-submit=\\\"vm.form.$valid && vm.submit()\\\"> <section class=\\\"account-form\\\"> <div class=\\\"row\\\"> <div class=\\\"medium-6 medium-centered large-4 large-centered columns text-center\\\"> <img src=\\\"img/noc-logo@2x.png\\\" class=\\\"account-logo\\\"> <div ng-show=\\\"vm.error\\\" class=\\\"alert callout\\\" data-closable> {{vm.error}} </div> <div class=\\\"label-animation\\\" ng-class=\\\"{\\'focused\\': emailFocus, \\'touched\\': vm.form.email.$viewValue }\\\"> <label for=\\\"email\\\">Email</label> <input type=\\\"text\\\" name=\\\"email\\\" ng-model=\\\"vm.username\\\" ng-focus=\\\"emailFocus = true\\\" ng-blur=\\\"emailFocus = false\\\" required> </div> <div class=\\\"label-animation\\\" ng-class=\\\"{\\'focused\\': passwordFocus, \\'touched\\': vm.form.password.$viewValue }\\\"> <label for=\\\"password\\\">Password</label> <input ng-focus=\\\"passwordFocus = true\\\" ng-blur=\\\"passwordFocus = false\\\" type=\\\"password\\\" name=\\\"password\\\" ng-model=\\\"vm.password\\\" required> </div> <input id=\\\"remember-login\\\" type=\\\"checkbox\\\" ng-model=\\\"vm.rememberMe\\\"><label for=\\\"remember-login\\\">Remember Login?</label> <p> <button class=\\\"button login\\\" type=\\\"submit\\\" pc-busy-button=\\\"vm.loggingIn\\\"> {{vm.loginText}} </button> </p> <p class=\\\"forgot-password text-center\\\"><a ui-sref=\\\"forgotPassword\\\">Forgot your password?</a></p> </div> </div> </section> </form>\");\n$templateCache.put(\"/app/security/pcResetPasswordForm.template.html\",\"<form name=\\\"vm.form\\\" ng-submit=\\\"vm.form.$valid && vm.submit()\\\"> <section class=\\\"account-form\\\"> <div class=\\\"row\\\"> <div class=\\\"medium-6 medium-centered large-5 large-centered columns text-center\\\"> <img src=\\\"img/noc-logo@2x.png\\\" class=\\\"account-logo\\\"> <div ng-show=\\\"vm.error\\\" class=\\\"alert callout\\\" data-closable> {{vm.error}} </div> <div ng-show=\\\"vm.form.password_again.$touched && vm.form.password_again.$invalid\\\" class=\\\"alert callout\\\" data-closable> Passwords do not match </div> <div class=\\\"message-box\\\">Please enter a new password for account {{vm.username}}.</div> <input type=\\\"password\\\" name=\\\"password\\\" placeholder=\\\"New Password\\\" ng-model=\\\"vm.password\\\" required> <input type=\\\"password\\\" name=\\\"password_again\\\" placeholder=\\\"Password Again\\\" ng-model=\\\"vm.confirmPassword\\\" required pc-compare-to=\\\"vm.password\\\"> <p> <button class=\\\"button\\\" type=\\\"submit\\\" pc-busy-button=\\\"vm.submitting\\\"> {{vm.buttonText}} </button> </p> <p class=\\\"forgot-password text-center\\\"> <a ui-sref=\\\"login\\\">Back to Login?</a> </p> </div> </div> </section> </form>\");\n$templateCache.put(\"/app/shared/pcConfirmButton.template.html\",\"<button ng-click=\\\"vm.click()\\\" class=\\\"{{vm.buttonClass}}\\\" ng-class=\\\"vm.buttonNgClass\\\" pc-busy-button=\\\"vm.working\\\"> <ng-transclude></ng-transclude> </button>\");\n$templateCache.put(\"/app/shared/pcDropdown.template.html\",\"<div class=\\\"pc-select-dropdown\\\"> <input type=\\\"text\\\" ng-model=\\\"vm.model\\\" ng-attr-name=\\\"{{vm.name}}\\\" ng-required=\\\"vm.required\\\" style=\\\"display: none\\\"> <button class=\\\"select\\\" ng-class=\\\"{\\'required\\': vm.required}\\\" type=\\\"button\\\" ng-click=\\\"vm.showMenu = !vm.showMenu; $event.stopPropagation();\\\"> {{vm.selectedDisplay}} </button> <div class=\\\"select-options\\\" ng-show=\\\"vm.showMenu\\\"> <a ng-repeat=\\\"option in vm.options track by option.value\\\" ng-click=\\\"vm.select(option)\\\"> {{option.display}} </a> </div> </div>\");\n$templateCache.put(\"/app/shared/pcEmptySection.template.html\",\"<div class=\\\"row\\\"> <div class=\\\"small-12 columns\\\"> <div class=\\\"blank-frame text-center\\\"> <i ng-class=\\\"vm.icon\\\"></i> <h2>{{vm.title}}</h2> <p>{{vm.description}}</p> <div class=\\\"add-first\\\" ng-if=\\\"vm.addText\\\"> <a ng-click=\\\"vm.onAdd()\\\">{{vm.addText}}</a> </div> </div> </div> </div>\");\n$templateCache.put(\"/app/shared/pcMap.template.html\",\"<div id=\\\"map\\\" class=\\\"map\\\"> </div>\");\n$templateCache.put(\"/app/shared/pcStatusArcs.template.html\",\"<div class=\\\"arcs\\\" ng-class=\\\"{\\'expanded row status-row\\': vm.isHorizontal, \\'text-center\\': !vm.isHorizontal}\\\"> <div class=\\\"columns arc\\\" ng-class=\\\"{\\'small-3\\': vm.isHorizontal, \\'small-8 small-offset-2\\': !vm.isHorizontal}\\\"> <progress-arc size=\\\"75\\\" stroke=\\\"#d63e35\\\" stroke-width=\\\"2\\\" complete=\\\"(vm.metrics.devicesOffline | pcAsPercentageOf:vm.metrics.totalEnumeratedDevices)\\\" counter-clockwise=\\\"false\\\" background=\\\"#555555\\\" text-value=\\\"{{vm.metrics.devicesOffline || 0}}\\\" text-status=\\\"offline\\\" text-name=\\\"Devices\\\"> </progress-arc> <p>Devices</p> </div> <div class=\\\"columns arc\\\" ng-class=\\\"{\\'small-3\\': vm.isHorizontal, \\'small-8 small-offset-2\\': !vm.isHorizontal}\\\"> <progress-arc size=\\\"75\\\" stroke=\\\"#d63e35\\\" stroke-width=\\\"2\\\" complete=\\\"(vm.metrics.thingsIsolated | pcAsPercentageOf:vm.metrics.totalEnumeratedThings)\\\" counter-clockwise=\\\"false\\\" background=\\\"#555555\\\" text-value=\\\"{{vm.metrics.thingsIsolated || 0}}\\\" text-status=\\\"isolated\\\" text-name=\\\"ATS\\\"> </progress-arc> <p>ATS</p> </div> <div class=\\\"columns arc\\\" ng-class=\\\"{\\'small-3\\': vm.isHorizontal, \\'small-8 small-offset-2\\': !vm.isHorizontal}\\\"> <progress-arc size=\\\"75\\\" stroke=\\\"#d63e35\\\" stroke-width=\\\"2\\\" complete=\\\"(vm.metrics.thingsOffline | pcAsPercentageOf:vm.metrics.totalEnumeratedThings)\\\" counter-clockwise=\\\"false\\\" background=\\\"#555555\\\" text-value=\\\"{{vm.metrics.thingsOffline || 0}}\\\" text-status=\\\"offline\\\" text-name=\\\"Equipment\\\"> </progress-arc> <p>Equipment</p> </div> <div class=\\\"columns arc\\\" ng-class=\\\"{\\'small-3\\': vm.isHorizontal, \\'small-8 small-offset-2\\': !vm.isHorizontal}\\\"> <progress-arc size=\\\"75\\\" stroke=\\\"#d63e35\\\" stroke-width=\\\"2\\\" complete=\\\"(vm.metrics.thingsOptedOut | pcAsPercentageOf:vm.metrics.totalEnumeratedThings)\\\" counter-clockwise=\\\"false\\\" background=\\\"#555555\\\" text-value=\\\"{{vm.metrics.thingsOptedOut || 0}}\\\" text-status=\\\"opted out\\\" text-name=\\\"Equipment\\\"> </progress-arc> <p>Equipment</p> </div> <div class=\\\"small-8\\\"></div> </div>\");\n$templateCache.put(\"/app/shared/pcTagSelector.template.html\",\"<div class=\\\"tag-control\\\"> <ui-select multiple=\\\"multiple\\\" tagging=\\\"vm.transformTagToObject\\\" tagging-label=\\\"\\\" ng-model=\\\"vm.displayedTags\\\" title=\\\"Enter tags\\\" pc-ui-select-controller-locator on-select=\\\"vm.tagEntered($item)\\\" on-remove=\\\"vm.tagRemoved($item)\\\" ng-attr-autofocus=\\\"{{vm.autofocus}}\\\"> <ui-select-match placeholder=\\\"{{vm.placeholder}}\\\">{{vm.formatTag($item)}}</ui-select-match> <ui-select-choices refresh=\\\"vm.searchTags($select.search)\\\" refresh-delay=\\\"500\\\" minimum-input-length=\\\"2\\\" repeat=\\\"tag in vm.filteredTags\\\"> {{tag.name}} </ui-select-choices> </ui-select> <i class=\\\"{{vm.icon}} tag\\\"></i> <a href=\\\"\\\" ng-if=\\\"vm.showList\\\" ng-click=\\\"vm.toggleTagList();\\\"><i class=\\\"icon-bullets finder\\\"></i></a> <div class=\\\"tag-list\\\" id=\\\"tag-list\\\" ng-if=\\\"vm.showTagList\\\" pc-on-lost-focus=\\\"vm.hideTagList()\\\"> <ul> <li ng-repeat=\\\"tag in vm.allTags\\\"> <a href=\\\"\\\" ng-click=\\\"vm.addTag(tag)\\\">{{tag.name}}</a> </li> </ul> </div> </div> <div class=\\\"field-warning\\\" ng-if=\\\"!vm.allTagsValid\\\">Not a valid tag</div>\");\n$templateCache.put(\"/app/shared/pcTextSearch.template.html\",\"<form name=\\\"vm.form\\\"> <div class=\\\"input-group search\\\"> <input type=\\\"search\\\" class=\\\"search-input input-group-field\\\" name=\\\"Text_Search\\\" placeholder=\\\"Search\\\" ng-model=\\\"vm.searchText\\\" ng-model-options=\\\"vm.modelOptions\\\"> <span class=\\\"input-group-label search-icon-label\\\" ng-click=\\\"vm.search()\\\"> <i class=\\\"search-icon icon-search\\\"></i> </span> </div> </form>\");\n$templateCache.put(\"/app/shared/pcTimeTicker.template.html\",\"<span> {{vm.timeDisplay}} </span>\");\n$templateCache.put(\"/app/commonScripts/form/messages.template.html\",\"<span ng-message=\\\"required\\\">This field is required.</span> <span ng-message=\\\"minlength\\\">This field is too short.</span> <span ng-message=\\\"maxlength\\\">This field is too long.</span> <span ng-message=\\\"email\\\">This field must be a valid E-mail.</span>\");\n$templateCache.put(\"/app/commonScripts/overlays/pcPanelLoad.template.html\",\"<div class=\\\"loader\\\"> <pc-spinner class=\\\"spinner\\\" message=\\\"vm.message\\\" ng-show=\\\"vm.showLoading\\\"> </pc-spinner> <div class=\\\"loaded-content\\\" ng-show=\\\"!vm.showLoading\\\"> <ng-transclude></ng-transclude> <div> </div></div></div>\");\n$templateCache.put(\"/app/commonScripts/overlays/pcSpinner.template.html\",\"<div id=\\\"loading-overlay\\\" class=\\\"text-center\\\"> <img src=\\\"img/loading-dark.gif\\\" class=\\\"loading-spinner\\\"> <h3>{{vm.message}}</h3> </div>\");\n$templateCache.put(\"/app/commonScripts/utils/pcToast.template.html\",\"<div id=\\\"toast-messages\\\"> <div ng-repeat=\\\"toast in vm.toasts\\\" class=\\\"toast-message\\\" ng-class=\\\"{\\'error\\': toast.error, \\'success\\': toast.success}\\\"> {{toast.message}} <div class=\\\"toast-closer\\\" ng-click=\\\"vm.close(toast)\\\"> <i class=\\\"icon-close\\\"></i> </div> </div> </div>\");\n$templateCache.put(\"/app/curtailments/dashboard/pcCurtailmentDashboard.template.html\",\"<pc-panel-load is-loaded=\\\"vm.isLoaded\\\"> <div class=\\\"content-holder\\\"> <section class=\\\"title-bar\\\"> <div class=\\\"row\\\"> <div class=\\\"small-12 columns\\\"> <h1>Curtailments</h1> <div class=\\\"counter\\\">{{vm.programs.length}}</div> </div> </div> </section> <section class=\\\"cards\\\"> <pc-empty-section ng-if=\\\"!vm.programs.length\\\" icon=\\\"icon-section-curtailment\\\" title=\\\"No Programs for this Account\\\" description=\\\"There are no programs defined.\\\"> </pc-empty-section> <div class=\\\"row\\\"> <div class=\\\"small-12 columns\\\"> <div class=\\\"expanded row\\\"> <div class=\\\"small-6 large-4 columns\\\" ng-repeat=\\\"program in vm.programs track by program.id\\\"> <pc-program-card program=\\\"program\\\"></pc-program-card> </div> </div> </div> </div> </section> </div> </pc-panel-load>\");\n$templateCache.put(\"/app/curtailments/dashboard/pcProgramCard.template.html\",\"<div class=\\\"card\\\"> <div class=\\\"title-row\\\" ng-click=\\\"vm.showDetails()\\\"> <div class=\\\"name\\\">{{vm.program.name}}</div> <div class=\\\"message\\\">{{vm.program.isoName}}</div> </div> <pc-status-arcs metrics=\\\"vm.program.metrics\\\" is-horizontal=\\\"true\\\"></pc-status-arcs> <div class=\\\"bottom-row\\\"> <div class=\\\"expanded row large-collapse\\\"> <div class=\\\"small-11 columns stopped\\\"> <span ng-if=\\\"!vm.program.startDateUtc\\\">Never active</span> <span ng-if=\\\"vm.program.startDateUtc\\\"> <span ng-if=\\\"vm.program.isRunning\\\"> Currently running for </span> <span ng-if=\\\"!vm.program.isRunning\\\"> Last active on {{vm.program.startDateUtc | pcLocalTime}}. Ran for </span> <pc-time-ticker time-from=\\\"vm.program.startDateUtc\\\" incoming-time-format=\\\"YYYY-M-DZh:m:s.0\\\" end-time=\\\"vm.program.endDateUtc\\\"> </pc-time-ticker>. </span> </div> </div> </div> </div>\");\n$templateCache.put(\"/app/curtailments/layout/layout.template.html\",\"<nav class=\\\"sidebar\\\"> <ul> <li><a ui-sref=\\\"curtailments.summary({programId: vm.programId})\\\" ui-sref-active=\\\"active\\\"><i class=\\\"icon-summary\\\"></i> Summary</a></li> </ul> </nav> <div class=\\\"content-holder sidebar-pad\\\"> <div class=\\\"row\\\"> <div class=\\\"small-10\\\"> <div ui-view></div> </div> <div class=\\\"small-2\\\"> <pc-program-summary program-id=\\\"vm.programId\\\"></pc-program-summary> </div> </div> </div>\");\n$templateCache.put(\"/app/curtailments/layout/pcProgramCurtailmentStatus.template.html\",\"<div class=\\\"text-center\\\"> <div class=\\\"columns\\\"> <p>START TIME</p> </div> <span class=\\\"value\\\"> <h2>{{vm.programSummary.startDateUtc | pcLocalTime:\\'MM/DD/YY, h:mm a z\\'}}</h2> </span> <div class=\\\"columns\\\"> <p>DURATION</p> </div> <span class=\\\"value\\\"> <pc-time-ticker time-from=\\\"vm.programSummary.startDateUtc\\\" incoming-time-format=\\\"YYYY-MM-DDTHH:mm:ss.sss\\\"> </pc-time-ticker> </span> </div>\");\n$templateCache.put(\"/app/curtailments/layout/pcProgramSummary.template.html\",\"<section ng-if=\\\"vm.programSummary\\\"> <div class=\\\"row\\\" ng-if=\\\"vm.programSummary.isRunning\\\"> <pc-program-curtailment-status program-summary=\\\"vm.programSummary\\\"></pc-program-curtailment-status> </div> <div class=\\\"row\\\"> <pc-status-arcs metrics=\\\"vm.programSummary.metrics\\\" is-horizontal=\\\"false\\\"></pc-status-arcs> </div> </section>\");\n$templateCache.put(\"/app/curtailments/summary/pcCurtailmentSummary.template.html\",\"<pc-panel-load is-loaded=\\\"vm.isLoaded\\\"> <section class=\\\"title-bar\\\"> <div class=\\\"row\\\"> <div class=\\\"small-10\\\"> Program Header {{vm.programId}} </div> </div> </section> <section> <div class=\\\"row\\\"> <div class=\\\"small-10\\\"> Stuff </div> </div> </section> </pc-panel-load>\");\n$templateCache.put(\"/app/customers/addEdit/pcAddEditCustomerModal.template.html\",\"<div class=\\\"overlay-content form\\\" ng-show=\\\"!vm.isDeleting\\\"> <div class=\\\"row\\\"> <div class=\\\"small-12 columns\\\"> <h1>{{vm.isInAddMode ? \\'Add\\' : \\'Edit\\'}} Customer</h1> </div> </div> <div ng-show=\\\"vm.error\\\" class=\\\"alert callout\\\" data-closable> There was a problem with your request. Please try again. </div> <form name=\\\"vm.form\\\" ng-submit=\\\"vm.form.$valid && vm.submit()\\\" novalidate> <fieldset ng-disabled=\\\"vm.isSaving\\\"> <div class=\\\"row\\\"> <div class=\\\"small-12 columns\\\" pc-validate> <label>Customer Name</label> <input type=\\\"text\\\" name=\\\"name\\\" ng-model=\\\"vm.customer.name\\\" required autofocus> </div> <div class=\\\"small-12 columns\\\"> <label>SkySpark Project Name</label> <input type=\\\"text\\\" name=\\\"skySparkProjectName\\\" ng-model=\\\"vm.customer.skySparkProjectName\\\"> </div> <div class=\\\"small-12 columns\\\" pc-validate> <label>VirtuWatt Username</label> <input type=\\\"text\\\" name=\\\"virtuWattUsername\\\" ng-model=\\\"vm.customer.virtuWattUsername\\\" ng-required=\\\"vm.customer.virtuWattUsername || vm.customer.virtuWattPassword\\\"> </div> <div class=\\\"small-12 columns\\\" pc-validate> <label>VirtuWatt Password</label> <input type=\\\"text\\\" name=\\\"virtuWattPassword\\\" ng-model=\\\"vm.customer.virtuWattPassword\\\" ng-required=\\\"vm.customer.virtuWattUsername || vm.customer.virtuWattPassword\\\"> </div> <div class=\\\"small-12 columns\\\"> <button class=\\\"hollow button\\\" type=\\\"submit\\\" pc-busy-button=\\\"vm.isSaving\\\"> <span ng-if=\\\"!vm.isSaving\\\">{{vm.isInAddMode ? \\'Add\\' : \\'Save\\'}} Customer</span> <span ng-if=\\\"vm.isSaving\\\">Saving</span> </button> </div> </div> </fieldset> </form> </div> <button class=\\\"close-button\\\" aria-label=\\\"Close reveal\\\" type=\\\"button\\\" ng-click=\\\"vm.close()\\\"><i class=\\\"icon-close\\\"></i></button>\");\n$templateCache.put(\"/app/customers/dashboard/pcCustomerDashboard.template.html\",\"<pc-panel-load is-loaded=\\\"vm.isLoaded\\\"> <div class=\\\"content-holder\\\"> <section class=\\\"title-bar\\\"> <div class=\\\"left\\\"> <h1>Customers</h1> <div class=\\\"counter\\\">{{vm.totalCustomers}}</div> </div> <div class=\\\"float-right\\\"> <button class=\\\"hollow button float-right\\\" href=\\\"\\\" ng-click=\\\"vm.showAddCustomerModal()\\\">Add Customer</button> </div> <pc-text-search class=\\\"float-right\\\" to-lower=\\\"true\\\" callback=\\\"vm.search($text)\\\"> </pc-text-search> </section> <section ng-if=\\\"vm.totalCustomers == 0\\\"> <pc-empty-section icon=\\\"icon-section-customers\\\" title=\\\"No customers defined\\\" entity=\\\"Customers\\\" on-add=\\\"vm.showAddCustomerModal()\\\" add-text=\\\"click here to add a customer\\\" description=\\\"A customer is a specialized group used to group sites, devices, and contacts to together along with feature specific items such as VirtuWatt username and password.\\\"> </pc-empty-section> </section> <section ng-if=\\\"vm.totalCustomers > 0\\\"> <div class=\\\"row small-collapse\\\" infinite-scroll=\\\"vm.nextPage()\\\" infinite-scroll-disabled=\\\"vm.isBusy\\\"> <div class=\\\"small-12\\\"> <table> <thead> <tr> <th>Name</th> <th>Status</th> <th>Equipment Opt Status</th> <th width=\\\"100\\\"></th> </tr> </thead> <tbody class=\\\"clickable-rows\\\"> <tr ng-repeat=\\\"customer in vm.customers | orderBy: \\'name\\' track by customer.uuid\\\" height=\\\"50\\\" ui-sref=\\\"customers.summary({uuid: customer.uuid})\\\"> <td>{{customer.name}}</td> <td>{{vm.deviceStatus(customer)}}</td> <td>{{vm.equipmentOutStatus(customer)}}</td> <td class=\\\"text-right\\\"> > </td> </tr> </tbody> </table> </div> </div> </section> </div> </pc-panel-load>\");\n$templateCache.put(\"/app/customers/summary/pcCustomerSummary.template.html\",\"<div class=\\\"content-holder\\\"> <div class=\\\"row\\\"> <div class=\\\"small-8\\\"> <section class=\\\"customer-summary-map\\\"> <pc-map markers=\\\"vm.markers\\\"></pc-map> </section> </div> <div class=\\\"small-4\\\"> <div class=\\\"sites\\\"> <pc-panel-load is-loaded=\\\"vm.isLoaded\\\"> <section class=\\\"title-bar\\\"> <div> <h1 class=\\\"small\\\"> {{vm.customer.name}} </h1> <div class=\\\"counter\\\"> {{vm.siteCount}} </div> <div class=\\\"edit-action\\\"> <i class=\\\"icon-edit\\\" ng-click=\\\"vm.editCustomer()\\\"></i> </div> </div> </section> <section> <div class=\\\"site-list\\\"> <div class=\\\"sites-banner\\\"> List of Sites </div> <div class=\\\"site clearfix\\\" ng-repeat=\\\"site in vm.sites track by site.uuid\\\" ui-sref=\\\"customers.sites.summary({siteUuid: site.uuid})\\\"> <div class=\\\"marker\\\"> {{site.siteMapNumber}} </div> <div class=\\\"info\\\"> <span class=\\\"site-name\\\">{{site.name}}</span><br> <span class=\\\"site-address\\\">{{vm.getSiteAddress(site)}}</span> </div> <div class=\\\"arrow\\\"> <i class=\\\"icon-arrow-right\\\"></i> </div> <div class=\\\"clearfix\\\"></div> </div> </div> <button class=\\\"button hollow\\\" ng-click=\\\"vm.addSite()\\\">Add Site</button> </section> </pc-panel-load> </div> </div> </div> </div>\");\n$templateCache.put(\"/app/groups/activation/pcGroupActivation.template.html\",\"<pc-confirm-button ng-show=\\\"vm.group\\\" button-class=\\\"hollow button\\\" button-ng-class=\\\"{\\'alert\\': vm.isGroupActive, \\'micro\\': vm.micro}\\\" message=\\\"\\'Are you sure you want to \\' + (vm.isGroupActive ? \\'Deactivate\\' : \\'Activate\\') + (vm.strategy ? \\' strategy \\\\\\'\\' + vm.strategy.name + \\'\\\\\\' on\\' : \\'\\') + \\' \\' + vm.group.name + \\'?\\'\\\" yes-text=\\\"(vm.isGroupActive ? \\'Deactivate\\' : \\'Activate\\')\\\" confirm-title=\\\"(vm.isGroupActive ? \\'Deactivate\\' : \\'Activate\\')\\\" action=\\\"vm.toggleGroupActivation()\\\" finished=\\\"vm.finished()\\\" error=\\\"vm.error()\\\"> <span ng-if=\\\"vm.isGroupActive\\\"> {{vm.deactivating ? \\'Deactivating...\\' : vm.activeText}} </span> <span ng-if=\\\"!vm.isGroupActive\\\"> {{vm.activating ? \\'Activating...\\' : vm.inactiveText}} </span> </pc-confirm-button>\");\n$templateCache.put(\"/app/groups/activation/pcThingActivation.template.html\",\"<pc-confirm-button ng-show=\\\"vm.thing && vm.isOptedIn()\\\" button-class=\\\"hollow button micro\\\" button-ng-class=\\\"{\\'alert\\': vm.isActive}\\\" message=\\\"\\'Are you sure you want to \\' + (vm.isActive ? \\'Deactivate\\' : \\'Activate\\') + \\' \\' + vm.thing.name + \\'?\\'\\\" yes-text=\\\"(vm.isActive ? \\'Deactivate\\' : \\'Activate\\')\\\" confirm-title=\\\"(vm.isActive ? \\'Deactivate\\' : \\'Activate\\')\\\" action=\\\"vm.toggleActivation()\\\" finished=\\\"vm.finished()\\\" error=\\\"vm.error()\\\"> <span ng-if=\\\"vm.isActive\\\"> {{vm.deactivating ? \\\"Stopping...\\\" : \\\"Stop\\\"}} </span> <span ng-if=\\\"!vm.isActive\\\"> {{vm.activating ? \\\"Starting...\\\" : \\\"Start\\\"}} </span> </pc-confirm-button> <button ng-if=\\\"!vm.isOptedIn()\\\" class=\\\"hollow button micro disabled\\\">Opted Out</button>\");\n$templateCache.put(\"/app/groups/activity/pcGroupActivity.template.html\",\"<pc-panel-load is-loaded=\\\"vm.isLoaded\\\"> <section class=\\\"title-bar\\\"> <div class=\\\"row\\\"> <div> <pc-group-header group-uuid=\\\"vm.groupUuid\\\"></pc-group-header> </div> <div class=\\\"small-2 columns\\\"> <label>Start Date</label> <input placeholder=\\\"Pick a date\\\" type=\\\"text\\\" datepicker format=\\\"MM/dd/yyyy\\\" ng-model=\\\"vm.filter.startDate\\\" name=\\\"startDate\\\"> </div> <div class=\\\"small-2 columns\\\"> <label>End Date</label> <input placeholder=\\\"Pick a date\\\" type=\\\"text\\\" datepicker format=\\\"MM/dd/yyyy\\\" ng-model=\\\"vm.filter.endDate\\\" name=\\\"endDate\\\"> </div> <div class=\\\"small-2 columns\\\"> <label>Type</label> <pc-dropdown ng-model=\\\"vm.filter.activityType\\\" options=\\\"vm.activityTypes\\\" name=\\\"activityType\\\"> </pc-dropdown> </div> <div class=\\\"small-2 columns\\\"> <label>&nbsp;</label> <button ng-disabled=\\\"vm.isFiltering\\\" ng-click=\\\"vm.applyFilter()\\\" class=\\\"hollow button\\\" type=\\\"button\\\"> Filter </button> </div> </div> </section> <section> <pc-empty-section ng-if=\\\"!vm.groupActivity.length\\\" icon=\\\"icon-list\\\" title=\\\"{{vm.filterString ? \\'No Activity matches your filter\\' : \\'No Activity for this Group\\'}}\\\"> </pc-empty-section> <div ng-if=\\\"vm.groupActivity.length\\\" class=\\\"row small-collapse\\\"> <div class=\\\"small-12 columns\\\"> <div class=\\\"timeline\\\"> <div ng-repeat=\\\"day in vm.groupActivity track by day.date\\\"> <h3 class=\\\"day\\\" ng-class=\\\"{first: $index === 0}\\\">{{vm.getDateLabel(day.date)}}</h3> <div class=\\\"vertical-bar\\\"></div> <div ng-repeat=\\\"entry in day.logs | orderBy:\\'-timestampUtc\\' track by entry.id\\\" class=\\\"log-item\\\"> <div class=\\\"dot\\\"></div> <div class=\\\"timestamp\\\">{{entry.timestampUtc | pcLocalTime:\\'H:MM a\\'}}</div> <div class=\\\"details-frame\\\"> <div class=\\\"event-details\\\" ng-class=\\\"{\\'success\\': vm.isActivationEntry(entry.activityType), \\'fail\\': vm.isDeactivationEntry(entry.activityType)}\\\"> <div class=\\\"title\\\">{{vm.formatEntryType(entry.activityType)}}</div> <div class=\\\"details\\\">{{entry.sourceId || \\'unknown\\'}}<br>Source: {{entry.source}}</div> </div> <div class=\\\"event-description\\\">{{entry.description}}</div> </div> </div> </div> </div> </div> </div> </section> </pc-panel-load>\");\n$templateCache.put(\"/app/groups/addEdit/pcAddEditGroupModal.template.html\",\"<div class=\\\"overlay-content form\\\" ng-hide=\\\"vm.isDeleting\\\"> <div class=\\\"row\\\"> <div class=\\\"small-12 columns\\\"> <h1>{{vm.isInAddMode ? \\'Add\\' : \\'Edit\\'}} Group</h1> </div> </div> <div ng-show=\\\"vm.error\\\" class=\\\"alert callout\\\" data-closable> There was a problem with your request. Please try again. </div> <form name=\\\"vm.form\\\" ng-submit=\\\"vm.form.$valid && vm.submit()\\\" novalidate> <fieldset ng-disabled=\\\"vm.isSaving\\\"> <div class=\\\"row\\\"> <div class=\\\"small-12 columns\\\" pc-validate> <label>Name of Group <input type=\\\"text\\\" name=\\\"name\\\" ng-model=\\\"vm.group.name\\\" required autofocus> </label> </div> <div class=\\\"small-12 columns\\\"> <label>Group Description <input type=\\\"text\\\" name=\\\"description\\\" ng-model=\\\"vm.group.description\\\"> </label> </div> <div class=\\\"small-12 columns\\\"> <label>Group Tags</label> <pc-tag-selector placeholder=\\\"Select Tags...\\\" ng-model=\\\"vm.group.tags\\\"></pc-tag-selector> </div> <div class=\\\"small-12 columns\\\"> <label>Make Group Private?</label> <div class=\\\"switch\\\"> <input class=\\\"switch-input\\\" id=\\\"formSwitch\\\" type=\\\"checkbox\\\" name=\\\"formSwitch\\\" ng-model=\\\"vm.group.isPrivate\\\"> <label class=\\\"switch-paddle\\\" for=\\\"formSwitch\\\"> <span class=\\\"show-for-sr\\\">Group is Private</span> <span class=\\\"switch-active\\\" aria-hidden=\\\"true\\\">Yes</span> <span class=\\\"switch-inactive\\\" aria-hidden=\\\"true\\\">No</span> </label> </div> </div> <div class=\\\"columns\\\" ng-class=\\\"{\\'small-6\\': !vm.isInAddMode, \\'small-12\\': vm.isInAddMode}\\\"> <button class=\\\"hollow button\\\" type=\\\"submit\\\" pc-busy-button=\\\"vm.isSaving\\\"> <span ng-if=\\\"!vm.isSaving\\\">{{vm.isInAddMode ? \\'Add\\' : \\'Save\\'}} Group</span> <span ng-if=\\\"vm.isSaving\\\">Saving</span> </button> </div> <div class=\\\"small-6 columns text-right\\\" ng-if=\\\"!vm.isInAddMode && !vm.hideRemove\\\"> <div tabindex=\\\"0\\\" aria-haspopup=\\\"true\\\" aria-controls=\\\"remove-group\\\" class=\\\"hollow button alert\\\" data-toggle=\\\"remove-group\\\" ng-click=\\\"vm.isDeleting = true\\\"> Remove </div> </div> </div> </fieldset> </form> </div> <div class=\\\"overlay-content text-center animate-fade\\\" ng-if=\\\"vm.isDeleting\\\"> <form name=\\\"vm.form\\\" ng-submit=\\\"vm.form.$valid && vm.removeGroup()\\\"> <fieldset ng-disabled=\\\"vm.isSaving\\\"> <div class=\\\"row\\\"> <div class=\\\"small-12 columns\\\"> <h1>Are you sure you want to remove {{vm.group.name}}?</h1> <p> This action CANNOT be undone. This will permanently remove this group and all information associated with it. </p> <p>Type the name of this group to confirm its deletion.</p> <div class=\\\"confirm-delete\\\"> <input ng-model=\\\"vm.deleteAll\\\" type=\\\"checkbox\\\" id=\\\"deleteAll\\\"> Check this box to delete the group and all members of this group </div> </div> </div> <div class=\\\"small-12 columns\\\"> <alert type=\\\"\\'alert\\'\\\" ng-if=\\\"vm.error\\\" class=\\\"callout\\\" close=\\\"vm.error = null\\\"> {{vm.error}} </alert> <input type=\\\"text\\\" ng-model=\\\"vm.groupNameConfirm\\\" required name=\\\"groupNameConfirm\\\" pc-compare-to=\\\"vm.group.name\\\" ignore-case=\\\"true\\\" ng-class=\\\"{\\'failed\\' : (vm.form.groupNameConfirm.$touched || vm.form.submitted) && !vm.form.groupNameConfirm.$valid}\\\" autofocus> </div> <div class=\\\"small-12 columns\\\"> <button class=\\\"hollow button alert\\\" type=\\\"button\\\" ng-click=\\\"vm.removeGroup()\\\" ng-disabled=\\\"!vm.form.$valid\\\" pc-busy-button=\\\"vm.isBusyDeleting\\\"> Confirm Group Deletion </button> </div> </fieldset> </form> </div> <button class=\\\"close-button\\\" aria-label=\\\"Close reveal\\\" type=\\\"button\\\" ng-click=\\\"vm.close()\\\"><i class=\\\"icon-close\\\"></i></button>\");\n$templateCache.put(\"/app/groups/dashboard/pcGroupCard.template.html\",\"<div class=\\\"card\\\" ng-class=\\\"{double: vm.group.metrics.totalChildGroups > 0}\\\"> <div class=\\\"title-row\\\" ng-click=\\\"vm.showDetails()\\\"> <div class=\\\"name\\\">{{vm.group.name}}</div> <div class=\\\"message\\\">{{vm.group.type}}</div> </div> <pc-status-arcs metrics=\\\"vm.group.metrics\\\" is-horizontal=\\\"true\\\"></pc-status-arcs> <div class=\\\"bottom-row\\\"> <div class=\\\"expanded row large-collapse\\\"> <div ng-if=\\\"!vm.group.startedAtUtc\\\" class=\\\"small-11 columns stopped\\\"> <span ng-if=\\\"!(vm.group.tags|pcTagValue:\\'lastActiveUtc\\')\\\">Never active</span> <span ng-if=\\\"(vm.group.tags|pcTagValue:\\'lastActiveUtc\\')\\\">Last active on {{vm.group.tags | pcTagValue:\\'lastActiveUtc\\' | pcLocalTime}}</span> </div> <div ng-if=\\\"(vm.group.tags|pcTagValue:\\'startedAtUtc\\')\\\" class=\\\"small-11 columns stopped\\\"> Currently running for <pc-time-ticker time-from=\\\"(vm.group.tags|pcTagValue:\\'startedAtUtc\\')\\\"></pc-time-ticker> </div> <div class=\\\"small-1 columns text-right\\\"><i class=\\\"icon-edit\\\" ng-click=\\\"vm.showEditModal()\\\"></i></div> </div> </div> </div>\");\n$templateCache.put(\"/app/groups/dashboard/pcGroupDashboard.template.html\",\"<pc-panel-load is-loaded=\\\"vm.isLoaded\\\"> <div class=\\\"content-holder\\\"> <section class=\\\"title-bar\\\"> <div class=\\\"row\\\"> <div class=\\\"small-8 columns\\\"> <h1>Groups</h1> <div class=\\\"counter\\\">{{vm.groups.length}}</div> </div> <div class=\\\"small-4 columns\\\"> <button class=\\\"hollow button float-right\\\" href=\\\"\\\" ng-click=\\\"vm.showAddGroupModal()\\\">Add Group</button> </div> </div> </section> <section class=\\\"cards\\\"> <pc-empty-section ng-if=\\\"!vm.groups.length\\\" icon=\\\"icon-section-groups\\\" title=\\\"No Groups for this Account\\\" add-text=\\\"Click here to add the first Group\\\" on-add=\\\"vm.showAddGroupModal()\\\" description=\\\"Groups allow you to select customers, sites, zones, and nodes and put them together in one container. This allows you to see grouped stats, reports, and start events across a group of items.\\\"> </pc-empty-section> <div class=\\\"row\\\"> <div class=\\\"small-12 columns\\\"> <div class=\\\"expanded row\\\"> <div class=\\\"small-6 large-4 columns\\\" ng-repeat=\\\"group in vm.groups track by group.uuid\\\"> <pc-group-card group=\\\"group\\\"></pc-group-card> </div> </div> </div> </div> </section> </div> </pc-panel-load>\");\n$templateCache.put(\"/app/groups/layout/layout.template.html\",\"<nav class=\\\"sidebar\\\"> <ul> <li><a ui-sref=\\\"groups.summary({uuid: vm.groupUuid})\\\" ui-sref-active=\\\"active\\\"><i class=\\\"icon-summary\\\"></i> Summary</a></li> <li><a ui-sref=\\\"groups.membership({uuid: vm.groupUuid})\\\" ui-sref-active=\\\"active\\\"><i class=\\\"icon-member-card\\\"></i> Membership</a></li> <li><a ui-sref=\\\"groups.activity({uuid: vm.groupUuid})\\\" ui-sref-active=\\\"active\\\"><i class=\\\"icon-list\\\"></i> Activity</a></li> <li><a ui-sref=\\\"groups.schedule({uuid: vm.groupUuid})\\\" ui-sref-active=\\\"active\\\"><i class=\\\"icon-calendar\\\"></i> Schedule</a></li> </ul> </nav> <div class=\\\"content-holder sidebar-pad\\\"> <div ui-view></div> </div>\");\n$templateCache.put(\"/app/groups/layout/pcGroupHeader.template.html\",\"<h1 class=\\\"small\\\" ng-if=\\\"vm.group\\\"> {{vm.group.name}} </h1> <div class=\\\"counter\\\" ng-if=\\\"vm.counter !== undefined\\\"> {{vm.counter}} </div> <div class=\\\"edit-action\\\"> <i class=\\\"icon-edit\\\" ng-click=\\\"vm.showEditModal()\\\"></i> </div> <h2 ng-if=\\\"vm.group\\\"> {{vm.group.type}} </h2>\");\n$templateCache.put(\"/app/groups/membership/pcAddGroupMembershipModal.template.html\",\"<div class=\\\"overlay-content form form-wide tagging\\\"> <h1>Add Members</h1> <form> <pc-tag-selector ng-model=\\\"vm.tagsToFilterOn\\\" autofocus=\\\"true\\\"> </pc-tag-selector> <section> <pc-membership-add-selector group=\\\"vm.group\\\" tags=\\\"vm.tagsToFilterOn\\\" type=\\\"groups\\\" title=\\\"Groups\\\"></pc-membership-add-selector> </section> <section> <pc-membership-add-selector group=\\\"vm.group\\\" tags=\\\"vm.tagsToFilterOn\\\" type=\\\"things\\\" title=\\\"Equipment\\\"></pc-membership-add-selector> </section> </form> </div> <button class=\\\"close-button\\\" data-close aria-label=\\\"Close reveal\\\" type=\\\"button\\\" ng-click=\\\"vm.modalInstance.close()\\\"><i class=\\\"icon-close\\\"></i></button>\");\n$templateCache.put(\"/app/groups/membership/pcGroupMembership.template.html\",\"<pc-panel-load is-loaded=\\\"vm.isLoaded\\\"> <section class=\\\"title-bar\\\"> <div class=\\\"row small-collapse2\\\"> <div class=\\\"small-7\\\"> <pc-group-header group-uuid=\\\"vm.groupUuid\\\" counter=\\\"vm.getMembershipCount()\\\"></pc-group-header> </div> <div class=\\\"small-3 group-finder\\\"> <pc-tag-selector ng-model=\\\"vm.tagsToFilterOn\\\" on-tags-changed=\\\"vm.onTagsChanged($tags)\\\"></pc-tag-selector> </div> <div class=\\\"small-2\\\"> <a data-toggle=\\\"add-members-overlay\\\" ng-click=\\\"vm.addMembers()\\\"> <button class=\\\"hollow button float-right\\\">Add Members</button> </a> </div> </div> </section> <section ng-if=\\\"!vm.getMembershipCount()\\\"> <pc-empty-section icon=\\\"icon-section-groups\\\" title=\\\"No memberships for this group\\\" entity=\\\"Membership\\\" on-add=\\\"vm.showAddMemberModal()\\\" description=\\\"Groups allow you to select customers, sites, zones, and nodes and put them together in one container. This allows you to see grouped stats, reports, and start events across a group of items.\\\"> </pc-empty-section> </section> <section ng-if=\\\"vm.group.groups.length\\\"> <div class=\\\"row small-collapse\\\"> <div class=\\\"small-8 columns\\\"> <h3>Groups</h3> </div> <div class=\\\"small-4 columns text-right\\\"> <pc-membership-edit-buttons group-uuid=\\\"vm.groupUuid\\\" edit-mode=\\\"vm.editingGroups\\\" collection=\\\"vm.group.groups\\\" type=\\\"group\\\"> </pc-membership-edit-buttons> </div> <div class=\\\"small-12\\\"> <table> <thead> <tr> <th>Name</th> <th>Tags</th> <th width=\\\"300\\\"></th> </tr> </thead> <tbody> <tr ng-repeat=\\\"group in vm.group.groups track by group.uuid\\\" height=\\\"50\\\"> <td>{{group.name}}</td> <td>{{group.tags | pcArrayColumnToString}}</td> <td class=\\\"text-right\\\" ng-if=\\\"!vm.editingGroups\\\"> <a ng-href=\\\"#/groups/{{group.uuid}}/summary\\\"><button class=\\\"hollow button micro\\\">View</button></a> <pc-group-activation group=\\\"group\\\" micro=\\\"true\\\"></pc-group-activation> </td> <td class=\\\"text-right\\\" ng-if=\\\"vm.editingGroups\\\" width=\\\"150\\\"> <input type=\\\"checkbox\\\" ng-model=\\\"group.remove\\\"> </td> </tr> </tbody> </table> </div> </div> </section> <section ng-if=\\\"vm.group.things.length\\\"> <div class=\\\"row small-collapse\\\"> <div class=\\\"small-8 columns\\\"> <h3>Equipment</h3> </div> <div class=\\\"small-4 columns text-right\\\"> <pc-membership-edit-buttons group-uuid=\\\"vm.groupUuid\\\" edit-mode=\\\"vm.editingThings\\\" collection=\\\"vm.group.things\\\" type=\\\"thing\\\"> </pc-membership-edit-buttons> </div> <div class=\\\"small-12\\\"> <table> <thead> <tr> <th>Name</th> <th>Group Name</th> <th>Tags</th> <th width=\\\"300\\\"></th> </tr> </thead> <tbody> <tr ng-repeat=\\\"thing in vm.group.things track by thing.uuid\\\" height=\\\"50\\\"> <td>{{thing.name}}</td> <td>{{thing.groups | pcArrayColumnToString: \\'name\\':\\'name\\'}}</td> <td>{{thing.tags | pcArrayColumnToString}}</td> <td class=\\\"text-right\\\" ng-if=\\\"!vm.editingThings\\\"> <a ng-hide=\\\"true\\\" href=\\\"\\\"><button class=\\\"hollow button micro\\\">View</button></a> <pc-thing-activation thing=\\\"thing\\\"></pc-thing-activation> </td> <td class=\\\"text-right\\\" ng-if=\\\"vm.editingThings\\\"> <input type=\\\"checkbox\\\" ng-model=\\\"thing.remove\\\"> </td> </tr> </tbody> </table> </div> </div> </section> </pc-panel-load>\");\n$templateCache.put(\"/app/groups/membership/pcMembershipAddSelector.template.html\",\"<div class=\\\"row small-collapse\\\" ng-if=\\\"vm.items.length\\\"> <div class=\\\"small-8 columns\\\"> <h3>{{vm.title}}</h3> </div> <div class=\\\"small-4 columns table-actions\\\"> <button class=\\\"hollow button micro float-right\\\" ng-click=\\\"vm.addSelected()\\\">Add Selected</button> <button class=\\\"hollow button micro secondary float-right\\\" ng-click=\\\"vm.selectAll()\\\">Select All</button> </div> <div class=\\\"small-12\\\"> <table class=\\\"hover\\\"> <thead> <tr> <th>Name</th> <th>Tags</th> <th></th> </tr> </thead> <tbody> <tr ng-repeat=\\\"item in vm.items track by item.uuid\\\"> <td>{{item.name}}</td> <td>{{item.tags | pcArrayColumnToString}}</td> <td class=\\\"text-right\\\"> <input ng-model=\\\"item.selected\\\" type=\\\"checkbox\\\" id=\\\"item_selection\\\"> <label for=\\\"item_selection\\\"></label> </td> </tr> </tbody> </table> </div> </div>\");\n$templateCache.put(\"/app/groups/membership/pcMembershipEditButtons.template.html\",\"<div ng-if=\\\"!vm.editMode\\\"> <button class=\\\"hollow button micro\\\" ng-click=\\\"vm.editMode = true\\\">Edit</button> </div> <div ng-if=\\\"vm.editMode\\\"> <button class=\\\"hollow button micro alert\\\" ng-click=\\\"vm.removeSelected()\\\">Remove Selected</button> <button class=\\\"hollow button micro secondary\\\" ng-click=\\\"vm.selectAll()\\\"> {{vm.allSelected(vm.group.groups) ? \\'Unselect\\' : \\'Select\\'}} All </button> <button class=\\\"hollow button micro\\\" ng-click=\\\"vm.done()\\\">Done</button> </div>\");\n$templateCache.put(\"/app/groups/schedule/pcAddEditGroupScheduleModal.template.html\",\"<div class=\\\"overlay-content form\\\" ng-show=\\\"!vm.isDeleting\\\"> <div class=\\\"row\\\"> <div class=\\\"small-12 columns\\\"> <h1>{{vm.isInAddMode ? \\'Add\\' : \\'Edit\\'}} Schedule</h1> </div> </div> <div ng-show=\\\"vm.error\\\" class=\\\"alert callout\\\" data-closable> {{vm.error}} </div> <form name=\\\"vm.form\\\" ng-submit=\\\"vm.form.$valid && vm.submit()\\\" novalidate> <fieldset ng-disabled=\\\"vm.isSaving\\\"> <div class=\\\"row\\\"> <div class=\\\"small-12 columns\\\" pc-validate> <label>Name of Schedule</label> <input type=\\\"text\\\" name=\\\"name\\\" ng-model=\\\"vm.groupSchedule.name\\\" required autofocus> </div> <div class=\\\"small-6 columns\\\" pc-validate> <label>Start Date</label> <input placeholder=\\\"Pick a date\\\" type=\\\"text\\\" datepicker format=\\\"MM/dd/yyyy\\\" ng-model=\\\"vm.startDate\\\" name=\\\"startDate\\\" required> </div> <div class=\\\"small-6 columns\\\" pc-validate> <label>Start Time <input type=\\\"text\\\" name=\\\"startTime\\\" ng-model=\\\"vm.startTime\\\" required> </label> </div> <div class=\\\"small-6 columns\\\" pc-validate> <label>Duration (Minutes)</label> <pc-dropdown ng-model=\\\"vm.groupSchedule.durationMinutes\\\" options=\\\"vm.durationValues\\\" form=\\\"vm.form\\\" required name=\\\"durationMinutes\\\"> </pc-dropdown> </div> <div class=\\\"small-6 columns\\\"> <label>Repeat</label> <pc-dropdown ng-model=\\\"vm.groupSchedule.recurrence\\\" options=\\\"vm.recurrenceValues\\\"> </pc-dropdown> </div> <div class=\\\"small-12 columns\\\"> <label>Notifications</label> <div class=\\\"switch\\\"> <input class=\\\"switch-input\\\" id=\\\"notificationSwitch\\\" type=\\\"checkbox\\\" name=\\\"notificationSwitch\\\" ng-model=\\\"vm.groupSchedule.notificationsEnabled\\\"> <label class=\\\"switch-paddle\\\" for=\\\"notificationSwitch\\\"> <span class=\\\"show-for-sr\\\">Show Notifications</span> <span class=\\\"switch-active\\\" aria-hidden=\\\"true\\\">Yes</span> <span class=\\\"switch-inactive\\\" aria-hidden=\\\"true\\\">No</span> </label> </div> </div> <div class=\\\"small-12 columns\\\"> <label> Send Notifications To: </label> <pc-tag-selector placeholder=\\\"Select Recipients...\\\" icon=\\\"icon-user\\\" show-list=\\\"false\\\" tag-name-regex=\\\"^\\\\w+([\\\\.-]?\\\\w+)*@\\\\w+([\\\\.-]?\\\\w+)*(\\\\.\\\\w{2,3})+$\\\" ng-model=\\\"vm.notificationRecipientTags\\\"> </pc-tag-selector> </div> <div class=\\\"columns\\\" ng-class=\\\"{\\'small-8\\': !vm.isInAddMode, \\'small-12\\': vm.isInAddMode}\\\"> <button class=\\\"hollow button\\\" type=\\\"submit\\\" pc-busy-button=\\\"vm.isSaving\\\"> <span ng-if=\\\"!vm.isSaving\\\">{{vm.isInAddMode ? \\'Add\\' : \\'Save\\'}} Schedule</span> <span ng-if=\\\"vm.isSaving\\\">Saving</span> </button> </div> <div class=\\\"small-4 columns text-right\\\" ng-if=\\\"!vm.isInAddMode && !vm.hideRemove\\\"> <button class=\\\"hollow button alert\\\" type=\\\"button\\\" ng-click=\\\"vm.isDeleting = true\\\"> <span>Remove</span> </button> </div> </div> </fieldset> </form> </div> <div class=\\\"overlay-content animate-fade\\\" ng-if=\\\"vm.isDeleting\\\"> <h1>Delete</h1> <p>Are you sure you want to delete {{vm.groupSchedule.name}}?</p> <button class=\\\"button\\\" ng-click=\\\"vm.removeGroupSchedule()\\\">Delete</button> <button class=\\\"hollow button\\\" ng-click=\\\"vm.close()\\\">Cancel</button> </div> <button class=\\\"close-button\\\" aria-label=\\\"Close reveal\\\" type=\\\"button\\\" ng-click=\\\"vm.close()\\\"><i class=\\\"icon-close\\\"></i></button>\");\n$templateCache.put(\"/app/groups/schedule/pcGroupSchedules.template.html\",\"<pc-panel-load is-loaded=\\\"vm.isLoaded\\\"> <section class=\\\"title-bar\\\"> <div class=\\\"row small-collapse\\\"> <div class=\\\"small-10\\\"> <pc-group-header group-uuid=\\\"vm.groupUuid\\\" counter=\\\"vm.groupSchedules.length\\\"></pc-group-header> </div> <div class=\\\"small-2 columns\\\"> <button class=\\\"hollow button float-right\\\" href=\\\"\\\" ng-click=\\\"vm.showAddModal()\\\">Add Schedule</button> </div> </div> </section> <section> <div class=\\\"row small-collapse\\\"> <div class=\\\"small-12 columns\\\"> <pc-empty-section ng-if=\\\"!vm.groupSchedules.length\\\" icon=\\\"icon-section-groups\\\" title=\\\"No Schedules for this Group\\\" add-text=\\\"Click here to add the first Schedule\\\" on-add=\\\"vm.showAddModal()\\\"> </pc-empty-section> <div class=\\\"activity-summary-row schedule\\\" ng-repeat=\\\"groupSchedule in vm.groupSchedules | orderBy: \\'startDateUtc\\' track by groupSchedule.id\\\"> <pc-schedule-row group-schedule=\\\"groupSchedule\\\" group-uuid=\\\"vm.groupUuid\\\"></pc-schedule-row> </div> </div> </div> </section> </pc-panel-load>\");\n$templateCache.put(\"/app/groups/schedule/pcScheduleRow.template.html\",\"<div class=\\\"title schedule\\\"> <label>Name</label> <div class=\\\"title-name\\\">{{vm.groupSchedule.name}}</div> </div> <div class=\\\"stat-holder large\\\"> <label>Start Date</label> <div class=\\\"stat-value\\\">{{vm.groupSchedule.startDateUtc | pcLocalTime:\\'MMMM Do, YYYY\\'}}</div> </div> <div class=\\\"stat-holder small\\\"> <label>Start Time</label> <div class=\\\"stat-value\\\">{{vm.groupSchedule.startDateUtc | pcLocalTime:\\'h:mm a\\'}}</div> </div> <div class=\\\"stat-holder small\\\"> <label>Duration (Minutes)</label> <div class=\\\"stat-value\\\">{{vm.groupSchedule.durationMinutes}}</div> </div> <div class=\\\"stat-holder small\\\"> <label>Recurrence</label> <div class=\\\"stat-value\\\">{{vm.groupSchedule.recurrence}}</div> </div> <div class=\\\"stat-holder\\\"> <label>Notifications?</label> <div class=\\\"stat-value\\\">{{vm.groupSchedule.notificationsEnabled ? \\'Yes\\' : \\'No\\'}}</div> </div> <div class=\\\"stat-holder small text-right\\\"> <label></label> <button class=\\\"button hollow micro\\\" ng-click=\\\"vm.showEditModal()\\\">Edit</button> </div>\");\n$templateCache.put(\"/app/groups/summary/pcGroupSignalState.template.html\",\"<div ng-if=\\\"vm.isGroupActive && vm.info\\\"> <div class=\\\"row\\\"> <div class=\\\"small-4 columns\\\"> <label>Activated</label> <p class=\\\"large-text\\\">{{vm.info.startedAt | pcLocalTime:\\'dddd, MMMM Do YYYY, h:mm a z\\'}}</p> </div> <div class=\\\"small-2 columns\\\"> <label>Activated By</label> <p>{{vm.info.lastStartedBy}}</p> </div> </div> <div class=\\\"row steps\\\"> <div class=\\\"step\\\"> <label>Signal Sent to Equipment</label> <span class=\\\"value\\\">{{vm.info.thingsActivated}}/<small>{{vm.info.thingCount}}</small></span> </div> <div class=\\\"step\\\"> <label>Equipment Activation</label> <span class=\\\"value\\\">{{vm.info.thingsActive}}/<small>{{vm.info.thingCount}}</small></span> </div> <div class=\\\"step\\\"> <label>Total Duration</label> <span class=\\\"value\\\"> <pc-time-ticker time-from=\\\"vm.info.startedAtUtc\\\"></pc-time-ticker> </span> </div> </div> </div>\");\n$templateCache.put(\"/app/groups/summary/pcGroupSummary.template.html\",\"<pc-panel-load is-loaded=\\\"vm.isLoaded\\\"> <section class=\\\"title-bar\\\"> <div class=\\\"row\\\"> <div class=\\\"small-10\\\"> <pc-group-header group-uuid=\\\"vm.groupUuid\\\" counter=\\\"vm.group.totalMembershipCount\\\"></pc-group-header> </div> <div class=\\\"small-2 text-center no-button-margin\\\"> <pc-group-activation group=\\\"vm.group\\\"></pc-group-activation> </div> </div> </section> <section> <div class=\\\"row\\\"> <div class=\\\"small-10\\\"> <pc-group-signal-state group=\\\"vm.group\\\" loaded=\\\"vm.signalStateLoaded()\\\"></pc-group-signal-state> <div class=\\\"row\\\"> <div class=\\\"small-6 columns\\\"> <h3>Recent Activity for this Group</h3> </div> <div ng-if=\\\"(vm.group.tags|pcTagValue:\\'lastActiveUtc\\') || (vm.group.tags|pcTagValue:\\'startedAtUtc\\')\\\" class=\\\"small-6 columns text-right\\\"> Last active on {{((vm.group.tags|pcTagValue:\\'lastActiveUtc\\')||(vm.group.tags|pcTagValue:\\'startedAtUtc\\')) | pcLocalTime:\\'dddd, MMMM Do YYYY, h:mm a z\\'}} </div> </div> <pc-recent-group-activity group-uuid=\\\"vm.groupUuid\\\" loaded=\\\"vm.activityLoaded()\\\"></pc-recent-group-activity> </div> <div class=\\\"small-2\\\"> <pc-status-arcs metrics=\\\"vm.group.metrics\\\" is-horizontal=\\\"false\\\"></pc-status-arcs> </div> </div> </section> </pc-panel-load>\");\n$templateCache.put(\"/app/customers/sites/addEdit/pcAddEditSiteModal.template.html\",\"<pc-panel-load is-loaded=\\\"vm.isLoaded\\\"> <div ng-if=\\\"vm.isLoaded\\\" class=\\\"overlay-content form\\\"> <div class=\\\"row\\\"> <div class=\\\"small-12 columns\\\"> <h1>{{vm.isInAddMode ? \\'Add\\' : \\'Edit\\'}} Site</h1> </div> </div> <div ng-show=\\\"vm.error\\\" class=\\\"alert callout\\\" data-closable> <span ng-if=\\\"vm.errorMsg\\\">{{vm.errorMsg}}</span> <span ng-if=\\\"!vm.errorMsg\\\">There was a problem with your request. Please try again.<span> </span></span></div> <form name=\\\"vm.form\\\" ng-submit=\\\"vm.form.$valid && vm.submit()\\\" novalidate> <fieldset ng-disabled=\\\"vm.isSaving\\\"> <div class=\\\"row\\\"> <div class=\\\"small-12 columns\\\" pc-validate> <label>Site Name</label> <input type=\\\"text\\\" name=\\\"name\\\" ng-model=\\\"vm.site.name\\\" required pc-autofocus> </div> <div class=\\\"small-12 columns\\\"> <label>Address Lookup</label> <input type=\\\"text\\\" required ng-model=\\\"vm.searchAddress\\\" pc-address-autocomplete=\\\"vm.geoAddress\\\"> </div> <div class=\\\"small-12 columns\\\" pc-validate> <label>Site Type</label> <pc-dropdown ng-model=\\\"vm.siteType\\\" options=\\\"vm.siteTypes\\\" name=\\\"site-type\\\" required=\\\"true\\\" form=\\\"vm.form\\\"> </pc-dropdown> </div> <div class=\\\"small-6 columns\\\" pc-validate> <label>Timezone</label> <pc-dropdown ng-model=\\\"vm.timezone\\\" options=\\\"vm.timezones\\\" name=\\\"site-timezone\\\" required=\\\"true\\\" form=\\\"vm.form\\\"> </pc-dropdown> </div> <div class=\\\"small-6 columns\\\" pc-validate> <label>ISO / RTO</label> <pc-dropdown ng-model=\\\"vm.iso\\\" options=\\\"vm.isos\\\" name=\\\"site-iso\\\" required=\\\"true\\\" form=\\\"vm.form\\\"> </pc-dropdown> </div> <div class=\\\"small-6 columns\\\" ng-repeat=\\\"feature in vm.features | orderBy: \\'displayName\\'\\\"> <label>{{feature.displayName}}</label> <div class=\\\"switch\\\"> <input class=\\\"switch-input\\\" id=\\\"{{feature.name}}\\\" type=\\\"checkbox\\\" name=\\\"{{feature.name}}\\\" ng-model=\\\"feature.isActive\\\"> <label class=\\\"switch-paddle\\\" for=\\\"{{feature.name}}\\\"> <span class=\\\"show-for-sr\\\">{{feature.name}}</span> <span class=\\\"switch-active\\\" aria-hidden=\\\"true\\\">Yes</span> <span class=\\\"switch-inactive\\\" aria-hidden=\\\"true\\\">No</span> </label> </div> </div> <div class=\\\"small-12 columns\\\"> <button class=\\\"hollow button\\\" type=\\\"submit\\\" pc-busy-button=\\\"vm.isSaving\\\"> <span ng-if=\\\"!vm.isSaving\\\">{{vm.isInAddMode ? \\'Add\\' : \\'Save\\'}} Site</span> <span ng-if=\\\"vm.isSaving\\\">Saving</span> </button> </div> </div> </fieldset> </form> </div> </pc-panel-load> <button class=\\\"close-button\\\" aria-label=\\\"Close reveal\\\" type=\\\"button\\\" ng-click=\\\"vm.close()\\\"><i class=\\\"icon-close\\\"></i></button>\");\n$templateCache.put(\"/app/customers/sites/contacts/pcAddEditContactModal.template.html\",\"<pc-panel-load is-loaded=\\\"vm.isLoaded\\\"> <div ng-if=\\\"vm.isLoaded\\\" class=\\\"overlay-content form\\\"> <div class=\\\"row\\\"> <div class=\\\"small-12 columns\\\"> <h1>{{vm.isInAddMode ? \\'Add\\' : \\'Edit\\'}} Contact</h1> </div> </div> <div ng-show=\\\"vm.error\\\" class=\\\"alert callout\\\" data-closable> {{vm.error}} </div> <form name=\\\"vm.form\\\" ng-submit=\\\"vm.form.$valid && vm.submit()\\\" novalidate> <fieldset ng-disabled=\\\"vm.isSaving\\\"> <div class=\\\"row\\\"> <div class=\\\"small-6 columns\\\"> <div pc-validate> <label>First Name</label> <input type=\\\"text\\\" name=\\\"firstName\\\" ng-model=\\\"vm.contact.firstName\\\" required pc-autofocus> </div> <div pc-validate> <label>Last Name</label> <input type=\\\"text\\\" name=\\\"lastName\\\" required ng-model=\\\"vm.contact.lastName\\\"> </div> <div ng-if=\\\"vm.isInAddMode\\\" pc-validate> <label>Contact Type</label> <pc-dropdown ng-model=\\\"vm.contact.parentGroupUuid\\\" options=\\\"vm.parents\\\" name=\\\"parentGroupUuid\\\" required=\\\"true\\\" form=\\\"vm.form\\\"> </pc-dropdown> </div> <div> <label>Title</label> <input type=\\\"text\\\" name=\\\"title\\\" ng-model=\\\"vm.contact.title\\\"> </div> <div pc-validate> <label>Email Address</label> <input type=\\\"email\\\" name=\\\"email\\\" ng-model=\\\"vm.contact.email\\\" required> </div> <div pc-validate> <label>Email Format</label> <pc-dropdown ng-model=\\\"vm.contact.emailFormat\\\" options=\\\"vm.emailFormats\\\" name=\\\"emailFormat\\\" required=\\\"true\\\" form=\\\"vm.form\\\"> </pc-dropdown> </div> </div> <div class=\\\"small-6 columns\\\"> <div> <label>Work Phone</label> <input type=\\\"text\\\" ui-mask=\\\"(999) 999-9999\\\" name=\\\"workPhone\\\" ng-model=\\\"vm.contact.workPhone\\\"> </div> <div> <label>Work Extension</label> <input type=\\\"text\\\" name=\\\"extension\\\" ng-model=\\\"vm.contact.extension\\\"> </div> <div> <label>Mobile Phone</label> <input type=\\\"text\\\" ui-mask=\\\"(999) 999-9999\\\" name=\\\"mobilePhone\\\" ng-model=\\\"vm.contact.mobilePhone\\\"> </div> <div pc-validate> <label>Wireless Carrier</label> <pc-dropdown ng-model=\\\"vm.contact.wirelessCarrierId\\\" options=\\\"vm.wirelessCarriers\\\" name=\\\"wirelessCarrierId\\\" ng-required=\\\"vm.contact.mobilePhone\\\" form=\\\"vm.form\\\"> </pc-dropdown> </div> <div pc-validate> <label>Notification Preference</label> <pc-dropdown ng-model=\\\"vm.contact.notificationPreference\\\" options=\\\"vm.notificationPreferences\\\" name=\\\"notificationPreference\\\" required=\\\"true\\\" form=\\\"vm.form\\\"> </pc-dropdown> </div> </div> </div> <div class=\\\"row\\\"> <div class=\\\"small-12 columns\\\"> <button class=\\\"hollow button\\\" type=\\\"submit\\\" pc-busy-button=\\\"vm.isSaving\\\"> <span ng-if=\\\"!vm.isSaving\\\">{{vm.isInAddMode ? \\'Add\\' : \\'Save\\'}} Contact</span> <span ng-if=\\\"vm.isSaving\\\">Saving</span> </button> </div> </div> </fieldset> </form> </div> </pc-panel-load> <button class=\\\"close-button\\\" aria-label=\\\"Close reveal\\\" type=\\\"button\\\" ng-click=\\\"vm.modalInstance.dismiss()\\\"><i class=\\\"icon-close\\\"></i></button>\");\n$templateCache.put(\"/app/customers/sites/contacts/pcSiteContacts.template.html\",\"<pc-panel-load is-loaded=\\\"vm.isLoaded\\\"> <section class=\\\"title-bar\\\"> <div class=\\\"left\\\"> <h1>Contacts</h1> <div class=\\\"counter\\\">{{vm.totalSiteContacts + vm.totalCustomerContacts}}</div> </div> <div class=\\\"float-right\\\"> <button class=\\\"hollow button float-right\\\" ng-click=\\\"vm.showAddContactModal()\\\">Add Contact</button> </div> <pc-text-search class=\\\"float-right\\\" to-lower=\\\"true\\\" text-seperator=\\\"space\\\" callback=\\\"vm.search($text)\\\"> </pc-text-search> </section> <section ng-if=\\\"!vm.contacts.length\\\"> <pc-empty-section ng-if=\\\"!vm.isFiltered\\\" icon=\\\"icon-section-customers\\\" title=\\\"No contacts defined\\\" entity=\\\"Contacts\\\" on-add=\\\"vm.showAddContactModal()\\\" add-text=\\\"click here to add a contact\\\" description=\\\"A contact is a way to track individuals at both the site and customer level who are directly or indirectly involved in the IoT platform\\\"> </pc-empty-section> <pc-empty-section ng-if=\\\"vm.isFiltered\\\" icon=\\\"icon-section-customers\\\" title=\\\"No contacts match filter criteria\\\" entity=\\\"Contacts\\\"> </pc-empty-section> </section> <section ng-if=\\\"vm.contacts.length\\\"> <div class=\\\"row small-collapse\\\" infinite-scroll=\\\"vm.nextPage()\\\" infinite-scroll-disabled=\\\"vm.isBusy\\\"> <div class=\\\"small-12\\\"> <table> <thead> <tr> <th>First Name</th> <th>Last Name</th> <th>Type</th> <th>Title</th> <th>Work Phone</th> <th>Mobile Phone</th> <th>Email</th> <th>&nbsp;</th> </tr> </thead> <tbody> <tr ng-repeat=\\\"contact in vm.contacts track by contact.id\\\" height=\\\"50\\\"> <td>{{contact.firstName}}</td> <td>{{contact.lastName}}</td> <td>{{contact.type}}</td> <td>{{contact.title}}</td> <td>{{contact.workPhone | pcPhoneNumber}}</td> <td>{{contact.mobilePhone | pcPhoneNumber}}</td> <td>{{contact.email}}</td> <th> <button class=\\\"hollow micro button float-right\\\" ng-click=\\\"vm.showEditContactModal(contact)\\\">Edit</button> </th> </tr> </tbody> </table> </div> </div> </section> </pc-panel-load>\");\n$templateCache.put(\"/app/customers/sites/layout/layout.template.html\",\"<section class=\\\"breadcrumb\\\"> <pc-site-header site-uuid=\\\"vm.siteUuid\\\" customer-uuid=\\\"vm.customerUuid\\\"></pc-site-header> </section> <nav class=\\\"sidebar breadcrumb-pad\\\"> <ul> <li><a ui-sref=\\\"customers.sites.summary({siteUuid: vm.siteUuid})\\\" ui-sref-active=\\\"active\\\"><i class=\\\"icon-summary\\\"></i>Summary</a></li> <li><a ui-sref=\\\"customers.sites.contacts({siteUuid: vm.siteUuid})\\\" ui-sref-active=\\\"active\\\"><i class=\\\"icon-summary\\\"></i>Contacts</a></li> </ul> </nav> <div class=\\\"content-holder sidebar-pad breadcrumb-pad\\\"> <div ui-view></div> </div>\");\n$templateCache.put(\"/app/customers/sites/layout/pcSiteHeader.template.html\",\"<ul> <li class=\\\"back-arrow\\\"><a ng-click=\\\"vm.back()\\\"><i class=\\\"icon-arrow-left\\\"></i></a></li> <li ng-if=\\\"vm.customer\\\"> <a ui-sref=\\\"customers.summary({customerUuid:vm.customer.uuid})\\\">{{vm.customer.name}}</a> </li> <li ng-if=\\\"vm.site\\\"> <a ui-sref=\\\"customers.sites.summary({customerUuid:vm.customer.uuid, siteUuid:vm.site.uuid})\\\">{{vm.site.name}}</a> </li> </ul>\");\n$templateCache.put(\"/app/customers/sites/summary/pcSiteBids.template.html\",\"<table> <thead> <tr> <th>Name</th> <th>Program Period</th> <th>Bid Hours</th> <th>Strategy</th> </tr> </thead> <tbody> <tr ng-if=\\\"!vm.siteBids.length\\\"> <td colspan=\\\"4\\\" class=\\\"text-center\\\">No Bids Exist</td> </tr> <tr ng-repeat=\\\"bid in vm.siteBids track by bid.id\\\" height=\\\"50\\\"> <td>{{bid.programName}}</td> <td>{{bid.periodDescription}}</td> <td>{{bid.bidHourDescription}}</td> <td>{{bid.strategyName}}</td> </tr> </tbody> </table>\");\n$templateCache.put(\"/app/customers/sites/summary/pcSiteOptButton.template.html\",\"<pc-confirm-button button-class=\\\"hollow button\\\" message=\\\"\\'Are you sure you want to opt all equipment for this site \\' + vm.which + \\'?\\'\\\" yes-text=\\\"(vm.which === \\'in\\' ? \\'Opt All Equipment In\\' : \\'Opt All Equipment Out\\')\\\" confirm-title=\\\"(vm.which === \\'in\\' ? \\'Opt All Equipment In\\' : \\'Opt All Equipment Out\\')\\\" action=\\\"vm.click()\\\" finished=\\\"vm.finished()\\\" error=\\\"vm.error()\\\"> <span ng-if=\\\"vm.working\\\"> Opting {{vm.which}}... </span> <span ng-if=\\\"!vm.working\\\"> {{vm.which}} </span> </pc-confirm-button>\");\n$templateCache.put(\"/app/customers/sites/summary/pcSiteReductionHistory.template.html\",\"<table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Start</th> <th>Stop</th> <th>Duration</th> </tr> </thead> <tbody> <tr ng-if=\\\"!vm.siteHistory.length\\\"> <td colspan=\\\"5\\\" class=\\\"text-center\\\">No Reduction History Exists</td> </tr> <tr ng-repeat=\\\"history in vm.siteHistory | orderBy: \\'history.endDateUtc\\' :true track by history.uuid\\\" height=\\\"50\\\"> <td>{{history.programName || \\'--\\'}}</td> <td>{{history.eventType | pcCamelCaseToHuman}}</td> <td>{{history.startDateUtc | pcLocalTime: \\'MMM D, h:mm a\\'}}</td> <td>{{history.endDateUtc | pcLocalTime: \\'MMM D, h:mm a\\'}}</td> <td><pc-time-ticker time-from=\\\"history.startDateUtc\\\" end-time=\\\"history.endDateUtc\\\" incoming-time-format=\\\"YYYY-MM-DD h:mm:ss\\\"></pc-time-ticker></td> </tr> </tbody> </table>\");\n$templateCache.put(\"/app/customers/sites/summary/pcSiteStrategies.template.html\",\"<table ng-if=\\\"vm.site\\\"> <thead> <tr> <th>STRATEGY NAME</th> <th width=\\\"200\\\"></th> </tr> </thead> <tbody> <tr ng-repeat=\\\"strategy in vm.strategies | orderBy: \\'name\\'\\\" height=\\\"50\\\"> <td>{{strategy.name}}</td> <td class=\\\"text-right\\\"> <pc-group-activation group=\\\"vm.site\\\" strategy=\\\"strategy\\\" micro=\\\"true\\\" inactive-text=\\\"Test\\\"></pc-group-activation> </td> </tr> <tr ng-if=\\\"!vm.strategies.length\\\"> <td colspan=\\\"4\\\" class=\\\"text-center\\\">No Strategies Defined</td> </tr> </tbody> </table>\");\n$templateCache.put(\"/app/customers/sites/summary/pcSiteSummary.template.html\",\"<pc-panel-load is-loaded=\\\"vm.isLoaded\\\"> <section class=\\\"title-bar\\\"> <div class=\\\"row\\\"> <div class=\\\"small-3 columns\\\"> <label>{{vm.customerName}}</label> <h1 class=\\\"small\\\"> {{vm.site.name}} </h1> <div class=\\\"edit-action\\\"> <i class=\\\"icon-edit\\\" ng-click=\\\"vm.editSite()\\\"></i> </div> <h2> {{vm.siteAddress}} </h2> </div> <div class=\\\"small-3 columns\\\"> <label>Local Time</label> <h2 class=\\\"local-time\\\"> {{vm.site.localTime}} </h2> <div class=\\\"utc-time\\\">{{vm.site.localTimeUtc}}</div> </div> <div class=\\\"small-3 columns\\\"></div> <div class=\\\"small-3 columns text-center\\\"> <label>Opt Status</label> <h2> <pc-site-opt-button which=\\\"in\\\" site-uuid=\\\"vm.site.uuid\\\"></pc-site-opt-button> <pc-site-opt-button which=\\\"out\\\" site-uuid=\\\"vm.site.uuid\\\"></pc-site-opt-button> </h2> </div> </div> </section> <section> <div class=\\\"row\\\"> <div class=\\\"small-9\\\"> <div class=\\\"row\\\"> <div class=\\\"small-6 columns\\\"> <h4 class=\\\"section-header\\\">Configured Strategies</h4> <pc-site-strategies site-uuid=\\\"vm.siteUuid\\\" loaded=\\\"vm.siteStrategiesLoaded()\\\"></pc-site-strategies> </div> <div class=\\\"small-6 columns\\\"> <h4 class=\\\"section-header\\\">Enrolled Bids</h4> <pc-site-bids site-uuid=\\\"vm.siteUuid\\\" loaded=\\\"vm.siteBidsLoaded()\\\"></pc-site-bids> </div> <div class=\\\"small-12 columns\\\"> <h4 class=\\\"section-header\\\">Reduction History</h4> <pc-site-reduction-history site-uuid=\\\"vm.siteUuid\\\" loaded=\\\"vm.siteReductionHistoryLoaded()\\\"></pc-site-reduction-history> </div> </div> </div> <div class=\\\"small-3 columns\\\"> <pc-status-arcs metrics=\\\"vm.site.metrics\\\" is-horizontal=\\\"false\\\"></pc-status-arcs> </div> </div> </section> </pc-panel-load>\");}]);","(function() {\r\n\r\n    window.app.config(routes);\r\n\r\n    function routes($stateProvider) {\r\n        $stateProvider.state('curtailments', {\r\n            url: '/curtailments/:programId',\r\n            abstract: true,\r\n            controller: function(programId)  {\r\n                var vm = this;\r\n                vm.programId = programId;\r\n            },\r\n            controllerAs: 'vm',\r\n            resolve: {\r\n                programId: $stateParams => $stateParams.programId\r\n            },\r\n            templateUrl: '/app/curtailments/layout/layout.template.html'\r\n        });\r\n        //NOTE: The dashboard does *not* use the shared layout or the shared URI, so its\r\n        //      setup is a bit more complicated.\r\n        $stateProvider.state('curtailments.dashboard', {\r\n            url: '^/curtailments',\r\n            views: {\r\n                '@': {\r\n                    template: '<pc-curtailment-dashboard></pc-curtailment-dashboard>'\r\n                }\r\n            }\r\n        });\r\n        $stateProvider.state('curtailments.summary', {\r\n            url: '/summary',\r\n            template: '<pc-curtailment-summary program-id=\"$resolve.programId\"></pc-curtailment-summary>' \r\n        });\r\n    }\r\n})();","(function() {\r\n\r\n    window.app.config(routes);\r\n\r\n    function routes($stateProvider) {\r\n        $stateProvider.state('customers', {\r\n            url: '/customers/:uuid',\r\n            abstract: true,\r\n            //The controller and the resolve make the customer ID available to the template\r\n            //and all child routes, which allows us to build up the ui-sref tags correctly,\r\n            //and we can also use it to pass the group ID into each component.\r\n            controller: function(customerUuid)  {\r\n                var vm = this;\r\n                vm.customerUuid = customerUuid;\r\n            },\r\n            controllerAs: 'vm',\r\n            resolve: {\r\n                customerUuid: $stateParams => $stateParams.uuid\r\n            },\r\n            template: '<ui-view></ui-view>'\r\n        });\r\n        //NOTE: The dashboard does *not* use the shared layout or the shared URI, so it's\r\n        //      setup is a bit more complicated.\r\n        $stateProvider.state('customers.dashboard', {\r\n            url: '^/customers',\r\n            views: {\r\n                '@': {\r\n                    template: '<pc-customer-dashboard></pc-customer-dashboard>'\r\n                }\r\n            }\r\n        });\r\n        //NOTE: The summary does *not* use the shared layout or the shared URI, so it's\r\n        //      setup is a bit more complicated.\r\n        $stateProvider.state('customers.summary', {\r\n            url: '/summary',\r\n            views: {\r\n                '@': {\r\n                    template: '<pc-customer-summary customer-uuid=\"$resolve.customerUuid\"></pc-customer-summary>'\r\n                }\r\n            }\r\n        });\r\n\r\n        $stateProvider.state('customers.sites',{\r\n            url: '/sites/:siteUuid',\r\n            abstract: true,\r\n            controller: function (siteUuid, customerUuid) {\r\n                var vm = this;\r\n                vm.siteUuid = siteUuid;\r\n                vm.customerUuid = customerUuid;\r\n            },\r\n            controllerAs: 'vm',\r\n            resolve: {\r\n                siteUuid: $stateParams => $stateParams.siteUuid\r\n            },\r\n            templateUrl: '/app/customers/sites/layout/layout.template.html'\r\n        });\r\n\r\n        $stateProvider.state('customers.sites.summary', {\r\n            url: '/summary',\r\n            template: '<pc-site-summary site-uuid=$resolve.siteUuid customer-uuid=$resolve.customerUuid></pc-site-summary>'\r\n        });\r\n\r\n        $stateProvider.state('customers.sites.contacts', {\r\n            url: '/contacts',\r\n            template: '<pc-site-contacts site-uuid=$resolve.siteUuid customer-uuid=$resolve.customerUuid></pc-site-contacts>'\r\n        });\r\n    }\r\n})();","window.PowerConnect = window.PowerConnect || {};\r\n\r\n(function() {\r\n\r\n    window.PowerConnect.GroupEvents = {\r\n        deleted: 'groups.deleted',\r\n        deactivated: 'groups.deactivated',\r\n        activated: 'groups.activated'\r\n    };\r\n\r\n    window.PowerConnect.GroupScheduleEvents = {\r\n        deleted: 'groupSchedules.deleted',\r\n    };\r\n\r\n})();","(function() {\r\n\r\n    window.app.config(routes);\r\n\r\n    function routes($stateProvider) {\r\n\r\n        $stateProvider.state('groups', {\r\n            url: '/groups/:uuid',\r\n            abstract: true,\r\n            templateUrl: '/app/groups/layout/layout.template.html',\r\n            //The controller and the resolve make the group ID available to the template\r\n            //and all child routes, which allows us to build up the ui-sref tags correctly,\r\n            //and we can also use it to pass the group ID into each component.\r\n            controller: function(groupUuid)  {\r\n                var vm = this;\r\n                vm.groupUuid = groupUuid;\r\n            },\r\n            controllerAs: 'vm',\r\n            resolve: {\r\n                groupUuid: $stateParams => $stateParams.uuid\r\n            }\r\n        });\r\n        //NOTE: The dashboard does *not* use the shared layout or the shared URI, so it's\r\n        //      setup is a bit more complicated.\r\n        $stateProvider.state('groups.dashboard', {\r\n            url: '^/groups',\r\n            views: {\r\n                '@': {\r\n                    template: '<pc-group-dashboard></pc-group-dashboard>'\r\n                }\r\n            }\r\n        });\r\n        $stateProvider.state('groups.summary', {\r\n            url: '/summary',\r\n            template: '<pc-group-summary group-uuid=\"$resolve.groupUuid\"></pc-group-summary>' \r\n        });\r\n        $stateProvider.state('groups.membership', {\r\n            url: '/membership',\r\n            template: '<pc-group-membership group-uuid=\"$resolve.groupUuid\"></pc-group-membership>'\r\n        });\r\n        $stateProvider.state('groups.activity', {\r\n            url: '/activity',\r\n            template: '<pc-group-activity group-uuid=\"$resolve.groupUuid\"></pc-group-activity>'\r\n        });\r\n        $stateProvider.state('groups.schedule', {\r\n            url: '/schedule',\r\n            template: '<pc-group-schedules group-uuid=\"$resolve.groupUuid\"></pc-group-schedules>'\r\n        });\r\n    }\r\n})();","(function () {\r\n    'use strict';\r\n\r\n    window.app.component('pcRecentGroupActivity', {\r\n        templateUrl: '/app/groups/pcRecentGroupActivity.template.html',\r\n        controller: pcRecentGroupActivity,\r\n        controllerAs: 'vm',\r\n        bindings: {\r\n            groupUuid: '<',\r\n            loaded: '&?'\r\n        }\r\n    });\r\n\r\n    function pcRecentGroupActivity(pcAlert, pcApiClient, $rootScope) {\r\n        const vm = this;\r\n        let activatedHandle, deactivatedHandle;\r\n\r\n        vm.$onInit = function () {\r\n            setupDataRefresh();\r\n\r\n            activatedHandle = $rootScope.$on(window.PowerConnect.GroupEvents.activated, handleActivationStateChange);\r\n            deactivatedHandle = $rootScope.$on(window.PowerConnect.GroupEvents.deactivated, handleActivationStateChange);\r\n        };\r\n\r\n        vm.$onDestroy = function () {\r\n            activatedHandle();\r\n            deactivatedHandle();\r\n        };\r\n\r\n        function handleActivationStateChange(event, data) {\r\n            if (data.uuid !== vm.groupUuid) {\r\n                return;\r\n            }\r\n\r\n            setupDataRefresh();\r\n        }\r\n\r\n        function setupDataRefresh() {\r\n            const groupActivityUrl = 'Groups/' + vm.groupUuid +\r\n                '/Activity?$select=id,activityType,description,sourceId,timestampUtc&$top=5';\r\n                \r\n            const refreshable = pcApiClient.getRefreshClientForComponent(vm);\r\n\r\n            refreshable.poll(groupActivityUrl, 30 * 1000)\r\n                .catch(error => {\r\n                    pcAlert.error({message: 'Failed to retrieve group activity', error: error});\r\n                    return Rx.Observable.empty();\r\n                })\r\n                .subscribe(response => {\r\n                    if (response) {\r\n                        vm.groupActivity = response.data.result;\r\n                    }\r\n                    if (vm.loaded) {\r\n                        vm.loaded();\r\n                    }\r\n                });\r\n        }\r\n    }\r\n})();","(function () {\r\n    'use strict';\r\n\r\n    window.app.component('pcHeader', {\r\n        bindings: {},\r\n        templateUrl: '/app/layout/pcHeader.template.html',\r\n        controller: navHeaderCtlr,\r\n        controllerAs: 'vm'\r\n    });\r\n\r\n    function navHeaderCtlr($state, pcOauth, pcRouteState, pcConfig) {\r\n        var vm = this;\r\n\r\n        vm.isVisible = isVisible;\r\n        vm.logout = logout;\r\n        vm.config = pcConfig;\r\n\r\n        function isVisible() {\r\n            var currentState = pcRouteState.getToState();\r\n            return currentState != null && (!currentState.data || !currentState.data.hideHeader);\r\n        }\r\n\r\n        function logout() {\r\n            pcOauth.logout();\r\n            $state.go('login', {dontRedirect: true});\r\n        }\r\n    }\r\n})();","(function () {\r\n    'use strict';\r\n\r\n    window.app.component('mapExample', {\r\n        templateUrl: '/app/mapExample/mapExample.template.html',\r\n        controller: controller,\r\n        controllerAs: 'vm'\r\n    });\r\n\r\n    function controller($scope) {\r\n        var vm = this,\r\n            geocoder = new google.maps.Geocoder();\r\n\r\n        vm.geocode = geocode;\r\n\r\n        vm.markers = [{\r\n            position: {lat: -25.363, lng: 131.044},\r\n            title: 'Site 1',\r\n            label: '1',\r\n            info: 'I\\'m a great site'\r\n        },{\r\n            position: {lat: -24.363, lng: 133.044},\r\n            title: 'Site 2',\r\n            label: '2',\r\n            info: 'I\\'m a good site'\r\n        },{\r\n            position: {lat: -27.363, lng: 129.044},\r\n            title: 'Site 3',\r\n            label: '3',\r\n            info: 'I\\'m an average site'\r\n        },{\r\n            position: {lat: -24.2, lng: 131.8},\r\n            title: 'Site 4',\r\n            label: '4',\r\n            info: 'I\\'m a bad site'\r\n        }];\r\n\r\n        function geocode() {\r\n            geocoder.geocode({'address': vm.geocodeAddress}, (results, status) => {\r\n                if (status === 'OK') {\r\n                    vm.geocodeResult = JSON.stringify(results[0].geometry.location);\r\n                } else {\r\n                    vm.geocodeResult = status;\r\n                }\r\n                \r\n                $scope.$apply();\r\n            });\r\n        }\r\n    }\r\n})();","(function() {\r\n\r\n    window.app.config(routes);\r\n\r\n    function routes($stateProvider) {\r\n\r\n        $stateProvider.state('map', {\r\n            url: '/map',\r\n            abstract: true,\r\n            templateUrl: '/app/mapExample/layout.template.html',\r\n        });\r\n        $stateProvider.state('map.example', {\r\n            url: '/example',\r\n            template: '<map-example></map-example>'\r\n        });\r\n    }\r\n})();","(function () {\r\n    'use strict';\r\n\r\n    window.app.component('pcForgotPasswordForm', {\r\n        bindings: {},\r\n        templateUrl: '/app/security/pcForgotPasswordForm.template.html',\r\n        controller: pcForgotPasswordFormCtlr,\r\n        controllerAs: 'vm'\r\n    });\r\n\r\n    function pcForgotPasswordFormCtlr($location, pcApiClient, pcConfig, $timeout) {\r\n        var vm = this;\r\n\r\n        vm.email = null;\r\n        vm.error = null;\r\n        vm.submitting = false;\r\n        vm.submitted = false;\r\n        vm.buttonText = 'Reset Password';\r\n\r\n        vm.submit = submit;\r\n        \r\n        function submit() {\r\n            vm.error = null;\r\n            \r\n            vm.submitting = true;\r\n            vm.buttonText = 'Resetting Password';\r\n            \r\n            var returnUrl = pcConfig.resetPasswordUrl || $location.protocol() + '//' + $location.host();\r\n            \r\n            pcApiClient.post('Users/' + vm.email + '/ForgotPassword', {appName: pcConfig.appName, returnUrl: returnUrl})\r\n                .then(shortDelayThenRun(function() {\r\n                    vm.submitted = true;\r\n                }))\r\n                .catch(shortDelayThenRun(function() {\r\n                    vm.error = 'There was a problem completing your request.\\nPlease try again';\r\n                    vm.buttonText = 'Reset Password';\r\n                    vm.submitting = false;\r\n                }));\r\n        }\r\n\r\n        function shortDelayThenRun(callback) {\r\n            return function() {\r\n                $timeout(callback, 1000);\r\n            };\r\n        }\r\n    }\r\n})();","(function () {\r\n    'use strict';\r\n\r\n    window.app.component('pcLoginForm', {\r\n        bindings: {},\r\n        templateUrl: '/app/security/pcLoginForm.template.html',\r\n        controller: loginFormCtlr,\r\n        controllerAs: 'vm'\r\n    });\r\n\r\n    function loginFormCtlr($state, pcOauth, pcCurrentUser, pcConfig, $stateParams) {\r\n        var vm = this;\r\n\r\n        vm.username = null;\r\n        vm.password = null;\r\n        vm.rememberMe = false;\r\n        vm.error = null;\r\n        vm.loggingIn = false;\r\n        vm.loginText = 'Sign In';\r\n\r\n        vm.$onInit = init;\r\n\r\n        vm.submit = submit;\r\n\r\n        function init() {\r\n            // Need to see if there is already a user stored in the local storage\r\n            if (pcCurrentUser.profile.loggedIn && !$stateParams.dontRedirect) {\r\n                $state.go(pcConfig.homeRoute);\r\n            }\r\n            else if (pcCurrentUser.profile.rememberMe && pcCurrentUser.username !== '') {\r\n                vm.username = pcCurrentUser.profile.username;\r\n                vm.rememberMe = pcCurrentUser.profile.rememberMe;\r\n            }\r\n        }\r\n\r\n        function submit() {\r\n            vm.error = null;\r\n            \r\n            vm.loginText = 'Signing In';\r\n            vm.loggingIn = true;\r\n            \r\n            pcOauth.login(vm.username, vm.password, vm.rememberMe)\r\n                .then(function () {\r\n                    vm.password = '';\r\n                    $state.go(pcConfig.homeRoute);\r\n                })\r\n                .catch(function (error) {\r\n                    //This is the error function\r\n                    if (error.data === null || !angular.isDefined(error.data.error)) {\r\n                        vm.error = 'Server error. Please try again';\r\n                    } else if (error.data.error === 'invalid_grant') {\r\n                        vm.error = 'Invalid Username/Password';\r\n                    } else if (-1 !== error.data.error.indexOf('does not have access')) {\r\n                        vm.error = 'Access to application denied';\r\n                    } else {\r\n                        vm.error = error.data.error;\r\n                    }\r\n                })\r\n                .finally(function() {\r\n                    vm.loginText = 'Sign In';\r\n                    vm.loggingIn = false;\r\n                });\r\n        }\r\n    }\r\n})();","(function () {\r\n    'use strict';\r\n\r\n    window.app.component('pcResetPasswordForm', {\r\n        bindings: {},\r\n        templateUrl: '/app/security/pcResetPasswordForm.template.html',\r\n        controller: resetPasswordFormCtlr,\r\n        controllerAs: 'vm'\r\n    });\r\n\r\n    function resetPasswordFormCtlr($state, $location, pcApiClient) {\r\n        var vm = this;\r\n\r\n        vm.password = null;\r\n        vm.confirmPassword = null;\r\n        vm.username = null;\r\n        vm.resetToken = null;\r\n        vm.error = null;\r\n        vm.submitting = false;\r\n        vm.buttonText = 'Submit';\r\n\r\n        vm.submit = submit;\r\n\r\n        vm.$onInit = init;\r\n\r\n        function init() {\r\n            // need to parse out the username and resetToken from the received url.\r\n            var params = $location.search();\r\n\r\n            vm.username = params.username;\r\n            vm.resetToken = params.resetToken;\r\n\r\n            if (!vm.username || !vm.resetToken) {\r\n                // This is an invalid state.  Take them back to the login\r\n                // page so they can start over\r\n                $state.go('login');\r\n            }\r\n        }\r\n\r\n        function submit() {\r\n            vm.error = null;\r\n            vm.submitting = true;\r\n            vm.buttonText = 'submitting';\r\n\r\n            pcApiClient.post('Users/' + vm.username + '/ResetPassword', {token: vm.resetToken, password: vm.password})\r\n                .then(function () {\r\n                    $state.go('login');\r\n                })\r\n                .catch(function () {\r\n                    vm.error = 'There was a problem completing your request.\\nPlease try again';\r\n                })\r\n                .finally(function () {\r\n                    vm.submitting = false;\r\n                    vm.buttonText = 'Submit';\r\n                });\r\n        }\r\n    }\r\n})();","(function () {\r\n    'use strict';\r\n\r\n    window.app.config(['$stateProvider', authorizationRouteProvider]);\r\n\r\n    function authorizationRouteProvider($stateProvider) {\r\n        $stateProvider\r\n            .state('login', {\r\n                url: '/login',\r\n                data: {allowAnonymous: true, bodyClass: 'account', hideHeader: true},\r\n                template: '<pc-login-form></pc-login-form>',\r\n                params: {\r\n                    dontRedirect: false\r\n                }\r\n            })\r\n            .state('resetPassword', {\r\n                url: '/reset-password',\r\n                data: {allowAnonymous: true, bodyClass: 'account', hideHeader: true},\r\n                template: '<pc-reset-password-form></pc-reset-password-form>'\r\n            })\r\n            .state('forgotPassword', {\r\n                url: '/forgot-password',\r\n                data: {allowAnonymous: true, bodyClass: 'account', hideHeader: true},\r\n                template: '<pc-forgot-password-form></pc-forgot-password-form>'\r\n            })\r\n            .state('changePassword', {\r\n                url: '/change-password',\r\n                data: {allowAnonymous: true, bodyClass: 'account'},\r\n                template: '<pc-change-password-form></pc-change-password-form>'\r\n            });\r\n    }\r\n})();","(function () {\r\n    'use strict';\r\n    \r\n    /*\r\n    Usage:\r\n     <input type=\"text\" ng-model=\"vm.search\" pc-address-autocomplete=\"vm.searchAddressObject\" bias-on-users-location=\"true\" />\r\n\r\n     ng-model: The model that holds the actual text entered\r\n     pc-address-autocomplete=\"vm.searchAddressObject\": The value you put here is where the final address object will be stored. \r\n                    It will look like:\r\n                    {\r\n                        address1:  '123 My Street', \r\n                        city: 'Some City',\r\n                        state: 'TX',\r\n                        zip: '12345',\r\n                        position: {lat: 123, lng: 123}\r\n                    }\r\n     bias-on-users-location: Optional field to tell autocomplete to use the browser's location to bias the results\r\n     bias-on-location: Optional field used if not biased on user's location. A typical position object: {lat: 123, lng: 123}\r\n     */\r\n\r\n    window.app.directive('pcAddressAutocomplete', controller);\r\n\r\n    function controller() {\r\n        return {\r\n            scope: {\r\n                resultObject: '=pcAddressAutocomplete',\r\n                biasOnUsersLocation: '=?',\r\n                biasOnLocation: '=?'\r\n            },\r\n            link: (scope, element) => {\r\n                scope.$on('$destroy', _cleanupListContain);\r\n\r\n                var autocomplete = new google.maps.places.Autocomplete(\r\n                    angular.element(element)[0],\r\n                    {types: ['geocode']}\r\n                );\r\n\r\n                if (scope.biasOnUsersLocation && navigator.geolocation) {\r\n                    navigator.geolocation.getCurrentPosition((position) => {\r\n                        var geolocation = {\r\n                            lat: position.coords.latitude,\r\n                            lng: position.coords.longitude\r\n                        };\r\n                        var circle = new google.maps.Circle({\r\n                            center: geolocation,\r\n                            radius: position.coords.accuracy\r\n                        });\r\n                        autocomplete.setBounds(circle.getBounds());\r\n                    });\r\n                } else if (scope.biasOnLocation) {\r\n                    var circle = new google.maps.Circle({\r\n                        center: scope.biasOnLocation,\r\n                        radius: 8000 //In meters, so about 5 miles\r\n                    });\r\n                    autocomplete.setBounds(circle.getBounds());\r\n                }\r\n\r\n                autocomplete.addListener('place_changed', () => {\r\n                    var place = autocomplete.getPlace();\r\n\r\n                    /* We want this to match our Domain model for address, as much as we can that makes sense.\r\n\r\n                        public string Address1 { get; set; }\r\n                        public string Address2 { get; set; }\r\n                        public string City { get; set; }\r\n                        public string State { get; set; }\r\n                        public string Zip { get; set; }\r\n                    */\r\n\r\n                    var streetNumber = getName(place, 'street_number');\r\n                    var street = getName(place, 'route');\r\n\r\n                    var finalAddress = (streetNumber && street) ? \r\n                        `${streetNumber} ${street}` :\r\n                        streetNumber ? streetNumber :\r\n                        street ? street :\r\n                        undefined;\r\n\r\n                    scope.resultObject = {\r\n                        address1:  finalAddress, \r\n                        city: getName(place, 'locality'),\r\n                        state: getName(place, 'administrative_area_level_1', 'short_name'),\r\n                        zip: getName(place, 'postal_code'),\r\n                        position: place.geometry.location.toJSON()\r\n                    };\r\n\r\n                    scope.$apply();\r\n                });\r\n            }\r\n        };\r\n    }\r\n\r\n    function getName(place, type, which) {\r\n        if (!which) {\r\n            which = 'long_name';\r\n        }\r\n\r\n        var value = _.find(place['address_components'], (component) => {\r\n            var found = _.indexOf(component['types'], type) > -1;\r\n            return found;\r\n        });\r\n\r\n        return value ? value[which] : undefined;\r\n    }\r\n\r\n    function _cleanupListContain() {\r\n        var pacContainer = document.getElementsByClassName('pac-container');\r\n        if (pacContainer) {\r\n            // it is possible, though not likely, for there to be more than one to be on page.  So remove them all\r\n            _.forEach(pacContainer, function(element) {\r\n                element.parentNode.removeChild(element);\r\n            });\r\n        }\r\n    }\r\n})();","(function () {\r\n    'use strict';\r\n    /*\r\n        Usage:\r\n        <pc-confirm-button \r\n                button-class=\"hollow button\"\r\n                button-ng-class=\"{'alert': vm.isGroupActive, 'micro': vm.micro}\"\r\n                message=\"'Are you sure you want to ' + (vm.isGroupActive ? 'Deactivate' : 'Activate') + ' ' + vm.group.name + '?'\"\r\n                yes-text=\"(vm.isGroupActive ? 'Deactivate' : 'Activate')\"\r\n                title=\"(vm.isGroupActive ? 'Deactivate' : 'Activate')\"\r\n                action=\"vm.toggleGroupActivation()\"\r\n                finished=\"vm.finished()\"\r\n                error=\"vm.error()\">\r\n                <span ng-if=\"vm.isGroupActive\">\r\n                    {{vm.deactivating ? 'Deactivating...' : 'Deactivate'}}\r\n                </span>\r\n                <span ng-if=\"!vm.isGroupActive\">\r\n                    {{vm.activating ? 'Activating...' : 'Activate'}}\r\n                </span>\r\n        </pc-confirm-button>\r\n\r\n        button-class: Optional css classes to pass down to the inner button\r\n        button-ng-class: Optional ng-class information to pass down to the inner button\r\n\r\n        message: Optional text to display on the confirmation modal\r\n        yes-text: Optional text to display on the \"yes\" button of the confirmation modal\r\n        confirmTitle: Optional text to display as the title on the confirmation modal\r\n\r\n        action: Promise to be invoked if the confirmation modal is confirmed\r\n        finished: Optional callback function once the action is finished and the state change delay has elapsed\r\n        error: Optional callback function if the action errors for any reason\r\n        stateChangeDelayMilliseconds: Optional custom minimum amount of time that must pass \r\n                                        before changing the button's state (controls pc-busy-button)\r\n                                        \r\n        skip-confirm: Option to not display a confirm modal, just immediately call the action\r\n        failed-alert-message: Optional custom message to pass the alert in case of an error\r\n     */\r\n\r\n    window.app.component('pcConfirmButton', {\r\n        bindings: {\r\n            buttonClass: '@?',\r\n            buttonNgClass: '<?',\r\n            message: '<?',\r\n            yesText: '<?',\r\n            confirmTitle: '<?',\r\n            failedAlertMessage: '@?',\r\n            skipConfirm: '<?',\r\n            action: '&', \r\n            finished: '&?',\r\n            error: '&?',\r\n            stateChangeDelayMilliseconds: '<?'\r\n        },\r\n        templateUrl: '/app/shared/pcConfirmButton.template.html',\r\n        controller: controller,\r\n        controllerAs: 'vm',\r\n        transclude: true\r\n    });\r\n\r\n    function controller(pcApiClient, $rootScope, pcModal, pcAlert, $timeout) {\r\n        var vm = this;\r\n\r\n        vm.click = click;\r\n        vm.$onInit = onInit;\r\n\r\n        function onInit() {\r\n            vm.confirmed = vm.confirmed || (() => {});\r\n            vm.finished = vm.finished || (() => {});\r\n            vm.error = vm.error || (() => {});\r\n            vm.stateChangeDelayMilliseconds = vm.stateChangeDelayMilliseconds || 2000;\r\n        }\r\n\r\n        function click() {\r\n            if (vm.skipConfirm) {\r\n                doWork();\r\n                return;\r\n            }\r\n\r\n            pcModal.openConfirmation({\r\n                message: vm.message || 'Are you sure?',\r\n                yesText: vm.yesText || 'Yes',\r\n                title: vm.confirmTitle || 'Confirm'\r\n            }).result.then(() => {\r\n                doWork();\r\n            });\r\n        }\r\n\r\n        function doWork() {\r\n            vm.working = true;\r\n\r\n            var startTime = (new Date()).getTime();\r\n\r\n            vm.action()\r\n                .then(() => {\r\n                    $timeout(() => {\r\n                        vm.finished();\r\n                        vm.working = false;\r\n                    }, calculateTimeout(startTime));\r\n                })\r\n                .catch((error) => {\r\n                    $timeout(() => {\r\n                        vm.error();\r\n                        pcAlert.error({\r\n                            message: (error && error.data && error.data.message) ? \r\n                                        error.data.message : \r\n                                        (vm.failedAlertMessage || 'An error occurred')\r\n                        });\r\n                        vm.working = false;\r\n                    }, calculateTimeout(startTime));\r\n                });\r\n        }\r\n\r\n        function calculateTimeout(startTime) {\r\n            var finish = (new Date()).getTime();\r\n            var elapsed = vm.stateChangeDelayMilliseconds - (finish - startTime);\r\n            return elapsed > 0 ? elapsed : 0;\r\n        }\r\n    }\r\n})();","(function () {\r\n\r\n    /*\r\n    Usage:\r\n     <pc-dropdown ng-model=\"vm.group.type\"\r\n                options=\"vm.groupTypes\"\r\n                name=\"myValue\"\r\n                form=\"vm.form\"\r\n                required>\r\n     </pc-dropdown>\r\n\r\n     ng-model: The model to bind to the dropdown control.\r\n     options: The array of possible values. Each entry should have a \r\n                \"value\" and \"display\" property. For example:\r\n\r\n                vm.groupTypes = [\r\n                    {value: 'Building', display: 'Building'},\r\n                    {value: 'Equipment', display: 'Equipment'},\r\n                    {value: 'Site', display: 'Site'},\r\n                ];\r\n     name: Optional name of the underlying field.\r\n     form: Optional binding to the parent's form. Used in conjunction with\r\n            required option to display error styling.\r\n     required: Optional attribute, used in form validation.\r\n     */\r\n\r\n    window.app.component('pcDropdown', {\r\n        templateUrl: '/app/shared/pcDropdown.template.html',\r\n        controllerAs: 'vm',\r\n        controller: pcDropdownController,\r\n        bindings: {\r\n            model: '=ngModel',\r\n            options: '<',\r\n            form: '<?',\r\n            required: '@?',\r\n            name: '@?'\r\n        }\r\n    });\r\n\r\n    function pcDropdownController($document, $scope) {\r\n        var vm = this;\r\n\r\n        vm.showMenu = false;\r\n\r\n        vm.$onInit = onInit;\r\n        vm.select = select;\r\n\r\n        function onInit() {\r\n            vm.required = !!vm.required;\r\n\r\n            updateSelectedDisplay();\r\n            \r\n            angular.element($document[0].body).on('click', function(event) {\r\n                vm.showMenu = false;\r\n                $scope.$apply();\r\n                event.stopPropagation();\r\n            });\r\n        }\r\n\r\n        function select(option) {\r\n            vm.model = option.value;\r\n            vm.showMenu = false;\r\n            updateSelectedDisplay();\r\n        }\r\n\r\n        function updateSelectedDisplay() {\r\n            if (!vm.model) {\r\n                var defaultOption = _.find(vm.options, function(item) {\r\n                    return !item.value;\r\n                });\r\n\r\n                if (defaultOption) {\r\n                    vm.selectedDisplay = defaultOption.display;\r\n                    return;\r\n                }\r\n            }\r\n            \r\n            var selectedOption = _.find(vm.options, {value: vm.model});\r\n\r\n            if (!selectedOption) {\r\n                vm.selectedDisplay = vm.model;\r\n                return;\r\n            }\r\n\r\n            vm.selectedDisplay = selectedOption.display;\r\n        }\r\n    }\r\n})();","(function () {\r\n    window.app.component('pcEmptySection', {\r\n        templateUrl: '/app/shared/pcEmptySection.template.html',\r\n        controllerAs: 'vm',\r\n        bindings: {\r\n            description: '@',\r\n            title: '@',\r\n            addText: '@', \r\n            icon: '@',\r\n            onAdd: '&'\r\n        }\r\n    });\r\n})();","(function () {\r\n    'use strict';\r\n\r\n    /*\r\n    Usage:\r\n\r\n    ******* WARNING ********\r\n    Do NOT mess with the height of where you place this! It needs a static height\r\n    or the map just completely falls apart. That's just how the google map works.\r\n    Do not animate the height. Do not hide the map and show it later. Do not do\r\n    any of these things. Seriously.\r\n    ******* WARNING ********\r\n\r\n    <pc-map class=\"my-map\" markers=\"vm.markers\"></pc-map>\r\n\r\n    class: Normal css class. However, you'll want to make sure to put a specific pixel height\r\n            to get the map to show. You can also access the \"inner\" map by targeting:\r\n            .my-map .map {\r\n            }\r\n\r\n    markers: Array of markers to put on the map, with the following format:\r\n        {\r\n            //Typical position object\r\n            position: {lat: -25.363, lng: 131.044},\r\n\r\n            //The tooltip you'll see when hovering\r\n            title: 'Site 1',\r\n\r\n            //The single character (others ignored) to show on the marker \r\n            label: '1',\r\n\r\n            //Textual information to show when the marker is clicked.\r\n            info: 'I\\'m a great site'\r\n        }\r\n    */\r\n\r\n    window.app.component('pcMap', {\r\n        bindings: {\r\n            markers: '<',\r\n            maxZoom: '@?'\r\n        },\r\n        templateUrl: '/app/shared/pcMap.template.html',\r\n        controller: controller,\r\n        controllerAs: 'vm'\r\n    });\r\n\r\n    function controller($scope) {\r\n        var vm = this, map, infoWindow, markersInUse = [];\r\n        \r\n        vm.maxZoom = vm.maxZoom || 16;\r\n        \r\n        map = new google.maps.Map(document.getElementById('map'), {\r\n            //Defaulted to just the US.\r\n            center: {lat: 39.0997265, lng: -94.57856670000001},\r\n            zoom: 4,\r\n            styles: [{ //https://snazzymaps.com/style/30/cobalt\r\n                'featureType':'all',\r\n                'elementType':'all',\r\n                'stylers':[\r\n                    {'invert_lightness':true},\r\n                    {'saturation':10},\r\n                    {'lightness':30},\r\n                    {'gamma':0.5},\r\n                    {'hue':'#435158'}]\r\n            }]\r\n        });\r\n\r\n        $scope.$watchCollection('vm.markers', function() {\r\n            setupMap(); \r\n        });\r\n\r\n        function setupMap() {\r\n            \r\n            if (!vm.markers || !vm.markers.length) {\r\n                return;\r\n            }\r\n\r\n            //Reset any previous markers\r\n            _.each(markersInUse, marker => {\r\n                marker.setMap(null);\r\n            });\r\n            \r\n            var bounds = new google.maps.LatLngBounds();\r\n\r\n            _.each(vm.markers, marker => {\r\n\r\n                var googleMarker = new google.maps.Marker({\r\n                    position: marker.position,\r\n                    title: marker.title,\r\n                    map: map,\r\n                    label: marker.label\r\n                });\r\n\r\n                markersInUse.push(googleMarker);\r\n                \r\n                bounds.extend(googleMarker.getPosition());\r\n\r\n                googleMarker.addListener('click', () => {\r\n                    openInfoWindow(googleMarker, marker.info);\r\n                });\r\n            });\r\n\r\n            map.fitBounds(bounds);\r\n\r\n            google.maps.event.addListenerOnce(map, 'idle', () => { \r\n                if (map.getZoom() > vm.maxZoom) {\r\n                    map.setZoom(vm.maxZoom);\r\n                }\r\n            });\r\n\r\n            google.maps.event.trigger(map, 'resize');\r\n        }\r\n\r\n        function openInfoWindow(googleMarker, info) {\r\n            if (infoWindow) {\r\n                infoWindow.close();\r\n            }\r\n\r\n            infoWindow = new google.maps.InfoWindow({\r\n                content: `<div class=\"info\"><h2>Information:</h2><p>${info}</p></div>`\r\n            });\r\n\r\n            infoWindow.open(map, googleMarker);\r\n        }\r\n    }\r\n\r\n})();","(function () {\r\n    window.app.component('pcStatusArcs', {\r\n        bindings: {\r\n            metrics: '<',\r\n            isHorizontal: '<'\r\n        },\r\n        templateUrl: '/app/shared/pcStatusArcs.template.html',\r\n        controller: controller,\r\n        controllerAs: 'vm'\r\n    });\r\n\r\n    function controller() {\r\n    }\r\n})();","(function() {\r\n\r\n    /*\r\n    Usage:\r\n     <pc-tag-selector ng-model=\"vm.entity.tags\"\r\n                      allow-new-tags=\"true\"\r\n                      on-tag-selected=\"vm.someOptionalCallback($tag)\">\r\n     </pc-tag-selector>\r\n\r\n     ng-model: The model to bind to the tag control.\r\n     allow-new-tags: If true (default), you would be able to add brand-new tag names.\r\n                     If false, new tags will be rejected.\r\n     on-tag-selected: An optional callback that will be invoked after a tag has been\r\n                      added to the model.  $tag will be the newly selected tag.\r\n     */\r\n    \r\n    window.app.component('pcTagSelector', {\r\n        templateUrl: '/app/shared/pcTagSelector.template.html',\r\n        controllerAs: 'vm',\r\n        controller: controller,\r\n        bindings: {\r\n            model: '=ngModel',\r\n            allowNewTags: '<?',\r\n            onTagSelected: '&?',\r\n            onTagRemoved: '&?',\r\n            placeholder: '@?', \r\n            onTagsChanged: '&?',\r\n            autofocus: '@?',\r\n            icon: '@?',\r\n            showList: '<?',\r\n            tagNameRegex: '@?'\r\n        }\r\n    });\r\n\r\n    //To do some advanced things, you need a reference to uiSelect's controller.\r\n    //Unfortunately, Angular does not provide a way to say \"I require a controller\r\n    //from a child directive.\"  You can only look on the current element and higher.\r\n    //This will find the controller, then attach it to the pcTagSelector controller.\r\n    window.app.directive('pcUiSelectControllerLocator', function() {\r\n        return {\r\n            require: ['^pcTagSelector', 'uiSelect'],\r\n            link: function($scope, $element, $attrs, $controllers) {\r\n                var pcTagSelectorCtrl = $controllers[0];\r\n                var uiSelectCtrl = $controllers[1];\r\n                pcTagSelectorCtrl.uiSelectCtrl = uiSelectCtrl;\r\n            }\r\n        };\r\n    });\r\n\r\n    function controller(pcApiClient) {\r\n        var vm = this;\r\n\r\n        //NOTE: I kept it simple for now, but if we need to start customizing this, we can either expose a binding,\r\n        //      or we can expose a config provider and allow this to be maintained at the application level.\r\n        const excludedTags = ['lastActiveUtc', 'description', 'isPrivate', \r\n                              'lastStartedBy', 'thingsActivated', 'isActive', 'tempHis',\r\n                              'startedAtUtc'];\r\n\r\n        vm.showTagList = false;\r\n        vm.filteredTags = [];\r\n        vm.displayedTags = [];\r\n        \r\n        vm.tagEntered = tagEntered;\r\n        vm.tagRemoved = tagRemoved;\r\n        vm.toggleTagList = toggleTagList;\r\n        vm.addTag = addTag;\r\n        vm.transformTagToObject = transformTagToObject;\r\n        vm.searchTags = searchTags;\r\n        vm.formatTag = formatTag;\r\n        vm.hideTagList = hideTagList;\r\n\r\n        vm.$onInit = function () {\r\n\r\n            setDefaults();\r\n\r\n            vm.model = vm.model || [];\r\n            vm.displayedTags = getFilteredList(vm.model);\r\n\r\n            pcApiClient.get('Tags?$top=1000&$select=name,kind')\r\n                .then(function(resp) {\r\n                    vm.allTags = resp.data.result;\r\n                });\r\n        };\r\n\r\n        function setDefaults() {\r\n\r\n            vm.allTagsValid = true;\r\n\r\n            if (vm.showList === undefined) {\r\n                vm.showList = true;\r\n            }\r\n\r\n            if (vm.icon === undefined) {\r\n                vm.icon = 'icon-tag';\r\n            }\r\n\r\n            if (vm.allowNewTags === undefined) {\r\n                vm.allowNewTags = false;\r\n            }\r\n\r\n            if (!vm.onTagSelected) {\r\n                vm.onTagSelected = function () { };\r\n            }\r\n\r\n            if (!vm.onTagRemoved) {\r\n                vm.onTagRemoved = function () { };\r\n            }\r\n\r\n            if (!vm.onTagsChanged) {\r\n                vm.onTagsChanged = function () { };\r\n            }\r\n        }\r\n\r\n        function transformTagToObject(tagValue) {\r\n\r\n            var existingTag;\r\n\r\n            if (tagValue.indexOf(':') > 0) {\r\n                var parts = tagValue.split(':');\r\n                if (parts.length === 2) {\r\n                    existingTag = _.find(vm.allTags, {name: parts[0]});                    \r\n                    return {\r\n                        name: parts[0],\r\n                        value: parts[1],\r\n                        kind: (existingTag && existingTag.kind) || 'unknown'\r\n                    };\r\n                }\r\n            }\r\n\r\n            existingTag = _.find(vm.allTags, {name: tagValue});\r\n\r\n            return {\r\n                name: tagValue,\r\n                kind: (existingTag && existingTag.kind) || 'unknown'\r\n            };\r\n        }\r\n\r\n        function tagEntered(item) {\r\n            //NOTE: We push changes back to the model, too. \r\n\r\n            //Ensure the tag is valid\r\n            vm.allTagsValid = validateTag(item);\r\n            if (!vm.allTagsValid) {\r\n                return;\r\n            }\r\n\r\n            //If it is not a marker and has no value, make the user\r\n            //specify a value.\r\n            if (!isMarker(item) && !item.value) {\r\n                removeTag(item);\r\n                vm.uiSelectCtrl.searchInput[0].value = item.name + ':';\r\n                vm.uiSelectCtrl.searchInput[0].focus();\r\n                return;\r\n            }\r\n\r\n            //Remove any existing tags with the same name from the list.\r\n            _.remove(vm.model, function (x) {\r\n                return x !== item && x.name === item.name;\r\n            });\r\n            _.remove(vm.displayedTags, function (x) {\r\n                return x !== item && x.name === item.name;\r\n            });\r\n\r\n            //Remove this tag if it is an unknown name and we aren't allowing\r\n            //new tags to be created.\r\n            if (vm.showList && !vm.allowNewTags && !_.some(vm.allTags, {name: item.name})) {\r\n                removeTag(item);\r\n                return;\r\n            }\r\n\r\n            vm.model.push(item);\r\n            vm.onTagSelected({$tag:item});\r\n            vm.onTagsChanged({$tags:vm.model});\r\n        }\r\n\r\n        function isMarker(item) {\r\n            //The item coming in might not always be an actual object from our list.\r\n            //ui-select will actually sometimes create a brand new tag if you hit enter\r\n            //too quickly while it is filtering.  \r\n            var tag = _.find(vm.allTags, {name:item.name});\r\n\r\n            //New tag?  Assume it could be valid as a marker.\r\n            if (!tag) {\r\n                return true;\r\n            }\r\n            \r\n            return tag.kind === 'Marker';            \r\n        }\r\n\r\n        function validateTag(item) {\r\n            var isWrongFormat = !validateTagName(item);\r\n            var isTooShort = item.name.length < 2;\r\n            var hasSpaces = /\\s/.test(item.name);\r\n\r\n            if (isWrongFormat || isTooShort || hasSpaces) {\r\n                removeTag(item);\r\n                vm.uiSelectCtrl.searchInput[0].value = item.name;\r\n                vm.uiSelectCtrl.searchInput[0].focus();\r\n\r\n                return false;\r\n            }\r\n\r\n            return true;\r\n        }\r\n\r\n        function validateTagName(item) {\r\n            if (!vm.tagNameRegex) {\r\n                return true;\r\n            }\r\n            var regEx = new RegExp(vm.tagNameRegex);\r\n\r\n            return regEx.test(item.name);\r\n        }\r\n\r\n        function removeTag(item) {\r\n            _.remove(vm.model, item);\r\n            _.remove(vm.displayedTags, item);\r\n        }\r\n\r\n        function tagRemoved(item) {\r\n            _.remove(vm.model, item);\r\n            vm.filteredTags = [];\r\n            vm.onTagRemoved({$tag:item});\r\n            vm.onTagsChanged({$tags:vm.model});\r\n        }\r\n\r\n        function toggleTagList() {\r\n            vm.showTagList = !vm.showTagList;\r\n        }\r\n\r\n        function hideTagList() {\r\n            vm.showTagList = false;            \r\n        }\r\n\r\n        function addTag(tag) {\r\n\r\n            if (_.includes(vm.model, tag)) {\r\n                //Do nothing.  Might want to eventually remove the tag,\r\n                //but the UI would need to be updated to indicate what is\r\n                //and isn't active in the list.\r\n                return;\r\n            }\r\n\r\n            vm.displayedTags.push(tag);\r\n            tagEntered(tag);\r\n\r\n            //If a non-marker is added, the user has to enter\r\n            //a value, so hide the tag list. \r\n            if (tag.kind !== 'Marker') {\r\n                vm.showTagList = false;\r\n            }\r\n        }\r\n\r\n        function searchTags(query) {\r\n            if (!vm.showList || query.length < 2) {\r\n                return [];\r\n            }\r\n            query = query.toLowerCase();\r\n            vm.filteredTags = _(vm.allTags).differenceWith(excludedTags, function(tag, name) {\r\n                return tag.name === name;\r\n            }).filter(function(x) {\r\n                return x.name.toLowerCase().indexOf(query) !== -1;\r\n            }).value();\r\n        }\r\n\r\n        function formatTag(tag) {\r\n            if (tag.value) {\r\n                return tag.name + ':' + tag.value;\r\n            }\r\n\r\n            return tag.name;\r\n        }\r\n\r\n        function getFilteredList(tags) {\r\n            return _.differenceWith(tags, excludedTags, function(tag,name) {\r\n                return tag.name === name;\r\n            });\r\n        }\r\n    }\r\n})();","(function () {\r\n    /*\r\n    Usage:\r\n        <pc-text-search callback=\"vm.myCallback($text)\"\r\n                        input-delay=5000\r\n                        to-lower=true\r\n                        text-seperator=','>\r\n        </pc-text-search>\r\n\r\n        callback: the function to be called whenever the user enters text to search.  The callback will be passed\r\n                  an array of text strings entered by user.\r\n        input-delay: The amount of time to wait after user stops typing before automaticly invoking search callback\r\n        to-lower: If true (default), the text entered by user will be converted to lower case.\r\n                  If false, the text entered by user will be the text passed to the callback\r\n        text-seperator: If provided will be used to break up the text entered by user into an array.  For space you\r\n                        will need to enter in \"text-seperator='space'.\r\n                        If nothing is provided then the callback function will be passed an array with a single array\r\n                        element which will contain all the text the user entered.\r\n    */\r\n\r\n    window.app.component('pcTextSearch', {\r\n        templateUrl: '/app/shared/pcTextSearch.template.html',\r\n        controller: pcTextSearch,\r\n        bindings: {\r\n            callback: '&',\r\n            inputDelay: '@?',\r\n            toLower: '@?',\r\n            textSeperator: '@?'\r\n        },\r\n        controllerAs: 'vm'\r\n    });\r\n\r\n    function pcTextSearch($scope) {\r\n        let vm = this;\r\n\r\n        vm.searchText = null;\r\n        vm.modelOptions = {\r\n            debounce: vm.inputDelay || 3000\r\n        };\r\n\r\n        vm.search = search;\r\n        vm.$onInit = onInit;\r\n\r\n        function onInit() {\r\n            $scope.$watch(() => {return vm.searchText;}, search);\r\n        }\r\n\r\n        function search() {\r\n            if (vm.searchText === null) {\r\n                return;\r\n            }\r\n\r\n            // stop the debounce timer\r\n            vm.form.Text_Search.$rollbackViewValue();\r\n\r\n            let searchText = [];\r\n            \r\n            if (vm.searchText !== '') {\r\n                // Convert to lower if needed\r\n                searchText = [vm.toLower ? _.toLower(vm.searchText) : vm.searchText];\r\n\r\n                // Split words into array\r\n                if (vm.textSeperator) {\r\n                    searchText = _.split(searchText[0], (vm.textSeperator === 'space' ? ' ' : vm.textSeperator));\r\n                }\r\n            }\r\n\r\n            // invoke the callback\r\n            vm.callback({$text:searchText});\r\n        }\r\n    }\r\n})();","(function () {\r\n    window.app.component('pcTimeTicker', {\r\n        templateUrl: '/app/shared/pcTimeTicker.template.html',\r\n        controllerAs: 'vm',\r\n        controller: pcTimeTickerController,\r\n        bindings: {\r\n            timeFrom: '<',\r\n            endTime: '<?',\r\n            showSeconds: '=?',\r\n            incomingTimeFormat: '@?'\r\n        }\r\n    });\r\n\r\n    function pcTimeTickerController($interval) {\r\n        const vm = this;\r\n        let refreshHandle;\r\n\r\n        vm.$onInit = onInit;\r\n        vm.$onDestroy = onDestroy;\r\n\r\n        function onInit() {\r\n            if (!vm.incomingTimeFormat) {\r\n                vm.incomingTimeFormat = 'M/D/YYYY h:mm:ss a';\r\n            }\r\n\r\n            if (vm.showSeconds === null || vm.showSeconds === undefined) {\r\n                vm.showSeconds = true;\r\n            }\r\n\r\n            updateDurationDisplay();\r\n            if (!vm.endTime) {\r\n                refreshHandle = $interval(updateDurationDisplay, 1 * 1000);\r\n            }\r\n        }\r\n        \r\n        function onDestroy() {\r\n            if (refreshHandle) {\r\n                $interval.cancel(refreshHandle);\r\n            }\r\n        }\r\n\r\n        function updateDurationDisplay() {\r\n            const startTime = moment.utc(vm.timeFrom, vm.incomingTimeFormat).local();\r\n            const endTime = vm.endTime ? moment.utc(vm.endTime, vm.incomingTimeFormat).local() : moment(new Date()).local();\r\n\r\n            if (startTime > endTime) {\r\n                vm.timeDisplay = '--';\r\n\r\n                return;\r\n            }\r\n\r\n            const duration = moment.duration(endTime.diff(startTime));\r\n\r\n            const days = duration.days();\r\n            const hours = (days * 24 + duration.hours());\r\n            const minutes = duration.minutes();\r\n            const seconds = duration.seconds();\r\n\r\n            vm.timeDisplay = '';\r\n\r\n            if (hours) {\r\n                vm.timeDisplay += hours + 'hr ';\r\n            }\r\n\r\n            if (minutes) {\r\n                vm.timeDisplay += minutes + 'min ';\r\n            }\r\n\r\n            if (vm.showSeconds) {\r\n                vm.timeDisplay += seconds + 'sec';\r\n            }\r\n        }\r\n    }\r\n})();"],"sourceRoot":"/source/"}