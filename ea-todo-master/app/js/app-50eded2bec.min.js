"use strict";!function(){function o(o,n,i){n.setPrefix(i.appName),o.classNameFilter(/^((?!(fa-spinner)).)*$/)}function n(o,n,i){o.html5Mode(!1),n.otherwise("login"),i.strictMode(!1)}o.$inject=["$animateProvider","localStorageServiceProvider","pcConfig"],n.$inject=["$locationProvider","$urlRouterProvider","$urlMatcherFactoryProvider"],angular.module("foundation",["foundation.core","foundation.common","foundation.offcanvas"]),window.app=angular.module("app",["ngAnimate","ngMessages","ui.mask","ui.router","LocalStorageModule","foundation.common","foundation.offcanvas","highcharts-ng","mm.foundation","angular-progress-arc","ui.select","ng-foundation-datepicker","infinite-scroll"]),window.app.config(o),window.app.config(n)}();
"use strict";!function(){function e(e,r,t){function a(e){return e.data?e.data.message&&e.data.message.length?!0:!!(e.data.error&&e.data.error.message&&e.data.error.message.length):!1}function o(e){return e&&e.config&&"GET"!==e.config.method&&a(e)}function n(a){if(a&&a.config&&a.config.bypassGlobalErrorHandler)return e.reject(a);if(a&&401===a.status){t.warn("Your secure session has expired.  Please log in again.");var n=r.get("pcCurrentUser");n.clearToken();var s=r.get("$state");s.go("login")}else if(502===a.status){t.error("Preflight failure.  Please log in again.");var i=r.get("pcOauth");i.logout()}else o(a)?t.error("Action Failed.  ",a.data.message||a.data.error.message):t.error("There was a problem with your last action.  Please try again. If the problem persists, please contact support");return e.reject(a)}return{responseError:n}}window.app.factory("httpErrorHandler",e),e.$inject=["$q","$injector","$log"],window.app.config(["$httpProvider",function(e){e.interceptors.push("httpErrorHandler")}])}();
"use strict";!function(){window.app.filter("pcFormatErrors",function(){return function(n){return null===n||"string"!=typeof n?n:n.indexOf("_ERR_")>=0?"ERROR":n}})}();
"use strict";!function(){function n(n,o,t){n.$on("$stateNotFound",function(n,e,i,a){t.log("Failed to find state for ",e),t.log("When navigating from ",i),n.preventDefault(),o.go("login")}),n.$on("$stateChangeError",function(n,t,e,i,a,r){n.preventDefault(),null!==i&&void 0!==i&&o.go(i,a)})}n.$inject=["$rootScope","$state","$log"],window.app.run(n)}();
"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol?"symbol":typeof o};window.PowerConnect=window.PowerConnect||{},function(){function o(o,n,t){var e="";return n&&"object"===("undefined"==typeof n?"undefined":_typeof(n))?(_.forEach(n,function(n){e+=""!==e?" "+t+" ":"",e+="contains(tolower("+o+"), tolower('"+n+"'))"}),e):e}window.PowerConnect.OData={containsFilter:o}}();
"use strict";String.prototype.startsWith||(String.prototype.startsWith=function(t,r){return r=r||0,this.lastIndexOf(t,r)===r}),String.valueFor||(String.valueFor=function(t){return null!=t?t.toString().toLowerCase():null});
"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol?"symbol":typeof n};!function(){function n(){return function(n,t,o){if(null===n||"object"!==("undefined"==typeof n?"undefined":_typeof(n)))return n;var e=t||"name",r=_.chain(n);return o&&(r=r.sortBy(o)),r.map(function(n){return n[e]}).join(", ").value()}}window.app.filter("pcArrayColumnToString",n)}();
"use strict";!function(){function n(){return function(n,t){return t&&0!==t&&n>0?n/t:0}}window.app.filter("pcAsPercentageOf",n)}();
"use strict";!function(){window.app.filter("pcCamelCaseToHuman",function(){return function(t){return null==t||"string"!=typeof t?"":t.charAt(0).toUpperCase()+t.substr(1).replace(/[A-Z]/g," $&")}})}();
"use strict";!function(){function t(){return function(t){return null===t||"string"!=typeof t||""===t?t:moment.utc(t).format("MMM D YYYY")}}window.app.filter("pcDateOnly",t)}();
"use strict";!function(){function t(){function t(t,n){var o={};return moment.tz.zone(t)?(o.timezone=moment.tz.zone(t).name,n&&(o.formatString=n)):moment.tz.zone(n)?(o.timezone=moment.tz.zone(n).name,o.formatString=t):o.formatString=t,o.timezone=o.timezone||m,o.formatString=o.formatString||e,o}var n=[moment.ISO_8601,"MM/DD/YYYY HH:mm:ss a","MM/DD/YYYY HH:mm a","MM/DD/YYYY"],m=moment.tz.guess(),e="M/D/YYYY h:mm:ss a z";return function(m,e,o){if(null===m||"string"!=typeof m||""===m)return"n/a";var r=t(e,o),i=moment.utc(m,n).tz(r.timezone);return i.format(r.formatString)}}window.app.filter("pcLocalTime",t)}();
"use strict";!function(){window.app.filter("pcPhoneNumber",function(){return function(t){return null===t||"string"!=typeof t?t:10!==t.length?t:"("+t.substr(0,3)+") "+t.substr(3,3)+"-"+t.substr(6,4)}})}();
"use strict";!function(){window.app.filter("pcPointValue",["$filter",function(t){return function(r){if(!r||null==r.currentValue)return"--";var e="";if(r.unit)e=" "+r.unit.trim();else if(r.tags){var u=_(r.tags).filter({name:"unit"}).first();e=u&&u.value?" "+u.value.trim():""}return t("uppercase")(r.currentValue)+e}}])}();
"use strict";!function(){window.app.filter("pcStringToNumber",function(){return function(n){return parseInt(n,10)}})}();
"use strict";!function(){function n(){return function(n,t){return window.PowerConnect.Tags.tagValue(n,t)}}window.app.filter("pcTagValue",n)}();
"use strict";!function(){function i(i){function n(t){return 50!==o++?t.is(":visible")?void t.focus():void i(function(){n(t)},100):void 0}var o=0;return{scope:{},link:function(o,t){i(function(){n(t)},500)}}}window.app.directive("pcAutofocus",i),i.$inject=["$timeout"]}();
"use strict";!function(){function s(){return{scope:{busy:"=pcBusyButton"},link:function(s,i,n){s.$watch("busy",function(s,n){if(void 0!==s)if(s){var t=i.hasClass("alert")?"dark-red":i.hasClass("hollow")?"dark":"white",a='<img class="loading" src="img/loading-'+t+'.gif">';i.toggleClass("busy",!0),i.append(a)}else i.toggleClass("busy",!1),i.find("img").remove()})}}}window.app.directive("pcBusyButton",s)}();
"use strict";!function(){function e(){return{require:"ngModel",scope:{otherModelValue:"=pcCompareTo",ignoreCase:"=?"},link:function(e,o,r,t){t.$validators.pcCompareTo=function(o){return e.ignoreCase?(o||"").toUpperCase()===(e.otherModelValue||"").toUpperCase():o===e.otherModelValue},e.$watch("otherModelValue",function(){t.$validate()})}}}window.app.directive("pcCompareTo",e)}();
"use strict";!function(){function e(){function e(){return n.$form&&n.fieldName?n.$form.$submitted&&!n.$form[n.fieldName].$valid:!1}var n=this;n.showValidationError=e}function n(e,n,r,i){var a=$("[name]",n);0===a.length&&console.error("pc-validate error: unable to find a child element with a name attribute.  Directive applied to: ",n),e.vm.$form=i,e.vm.fieldName=a.attr("name")}window.app.directive("pcValidate",function(){return{require:"^form",link:n,scope:!0,transclude:!0,controllerAs:"vm",controller:e,template:'\n                <div ng-class="{\'failed\': vm.showValidationError()}">\n                    <ng-transclude></ng-transclude>\n                    <div class="field-warning" ng-messages ng-if="vm.showValidationError()" for="vm.$form[vm.fieldName].$error">\n                        <ng-messages-include src="/app/commonScripts/form/messages.template.html"></ng-messages-include>\n                    </ng-messages>\n                </div>\n                '}})}();
"use strict";!function(){function r(r,e,t){return{request:function(r){return r.url&&r.url.startsWith(e.apiUrlBase)?(r.headers=r.headers||{},t.profile.loggedIn&&(r.headers.Authorization="Bearer "+t.profile.token),r):r},response:function(e){return e||r.when(e)}}}r.$inject=["$q","pcConfig","pcCurrentUser"],window.app.factory("httpTokenProvider",r),window.app.config(["$httpProvider",function(r){r.interceptors.push("httpTokenProvider")}])}();
"use strict";!function(){function t(t,n,e){function r(n,e,r,i){return t.post(c(n,i),e,r)}function i(n,e,r,i){return t.put(c(n,i),e,r)}function u(n,e,r){return t.get(c(n,r),e)}function o(n,e,r){return t["delete"](c(n,r),e)}function c(t,n){return t.startsWith("http")?t:e.apiUrlBase+p(n)+t}function p(t){var n=t||s;return"v"+n+"/"}function f(t){return new RefreshClient(this,n,t)}var s="1";return{post:r,get:u,put:i,"delete":o,getRefreshClientForComponent:f}}t.$inject=["$http","$interval","pcConfig"],window.app.service("pcApiClient",t)}();
"use strict";function RefreshClient(n,t,e){function o(){var n=e.$onDestroy;e.$onDestroy=function(){f(),n&&n()}}function r(n,e){return Rx.Observable.create(function(o){var r=t(function(){u(n,o)},e);i.requestInfo.push({intervalHandle:r,request:function(){return u(n,o)}}),u(n,o)})}function c(){_.forEach(i.requestInfo,function(n){n.request()})}function u(t,e){var o=t instanceof Function?t():t;n.get(o).then(function(n){e.onNext(n)})["catch"](function(n){e.onError(n),f()})}function f(){_.forEach(i.requestInfo,function(n){t.cancel(n.intervalHandle)})}var i=this;i.component=e,i.requestInfo=[],i.poll=r,i.refreshNow=c,o()}
"use strict";!function(){function o(o,n){function e(e){e.isLoaded.currentValue?o(function(){a.showLoading=!1,n.$apply()},500):a.showLoading=!0}var a=this;a.message=a.message||"loading",a.showLoading=!0,a.$onChanges=e}o.$inject=["$timeout","$scope"],window.app.component("pcPanelLoad",{bindings:{isLoaded:"<",message:"<?"},transclude:!0,templateUrl:"/app/commonScripts/overlays/pcPanelLoad.template.html",controller:o,controllerAs:"vm"})}();
"use strict";!function(){window.app.component("pcSpinner",{bindings:{message:"="},templateUrl:"/app/commonScripts/overlays/pcSpinner.template.html",controller:function(){},controllerAs:"vm"})}();
"use strict";!function(){function t(){this.model={toState:""},this.setToState=function(t){this.model.toState=t},this.getToState=function(){return this.model.toState}}window.app.service("pcRouteState",t)}();
"use strict";!function(){function t(t,n){t.$on("$stateChangeSuccess",function(t,e,o,c,u){n.setToState(e)})}t.$inject=["$rootScope","pcRouteState"],window.app.run(t)}();
"use strict";!function(){function n(n,t,e){n.$on("$stateChangeStart",function(n,o,a,r,i){var u=o.data&&o.data.allowAnonymous;return"Login"===o.name?(e.clearToken(),void e.save()):void(u||e.profile.loggedIn||(n.preventDefault(),t.go("login",{returnState:o},{inherit:!1})))})}n.$inject=["$rootScope","$state","pcCurrentUser"],window.app.run(n)}();
"use strict";!function(){function e(e,r){function t(){e.set(u,c)}function n(){s(),e.remove(u)}function s(){c.username="",c.token="",c.expiresIn=0,c.rememberMe=!1,c.firstName="",c.lastName="",c.roles=[],t()}function o(){c.token="",c.expiresIn=0,t()}function i(e){return c.roles&&_.some(c.roles,function(r){return r===e})}function a(){c={username:"",token:"",firstName:"",lastName:"",roles:[],expiresIn:0,get fullname(){return null!==this.firstName&&""!==this.firstName?this.firstName+" "+this.lastName:this.username},get loggedIn(){return this.token}},m()}function m(){var r=e.get(u);r&&(c.username=r.username,c.token=r.token,c.expiresIn=r.expiresIn,c.rememberMe=r.rememberMe,c.firstName=r.firstName,c.lastName=r.lastName,c.roles=r.roles)}var u=r.appName+"-CurrentUser",c={};return a(),{save:t,remove:n,clear:s,clearToken:o,profile:c,hasRole:i}}e.$inject=["localStorageService","pcConfig"],window.app.factory("pcCurrentUser",e)}();
"use strict";!function(){function n(){return function(n){var o=[];for(var e in n)o.push(encodeURIComponent(e)+"="+encodeURIComponent(n[e]));return o.join("&").replace(/%20/g,"+")}}window.app.factory("pcFormEncode",n)}();
"use strict";!function(){function e(e,r,n,o,t,a){function i(r,a,i){r!==t.profile.username&&t.clear();var s={headers:{"Content-Type":"application/x-www-form-urlencoded"}},u=o({username:r,password:a,grant_type:"password"}),f=e.defer();return n.post(p,u,s).then(function(n){return c(n.data,r,i),e.all([l(r)]).then(function(){f.resolve()})})["catch"](function(e){f.reject(e)}),f.promise}function s(){return n.post("Users/Logout")["catch"](function(e){r.error("Failed to log user out",e)})["finally"](function(){t.clearToken(),t.profile.rememberMe?t.save():t.remove()})}function c(e,r,n){t.profile.username=r,t.profile.token=e.access_token,t.profile.expiresIn=e.expires_in,t.profile.rememberMe=n,t.save()}function l(e){var r="Users/CurrentProfile",o="$select=lastName,firstName,roles";return n.get(r+"?"+o).then(function(e){t.profile.firstName=e.data.firstName,t.profile.lastName=e.data.lastName,t.profile.roles=e.data.roles,t.save()})}var p="Token?source="+a.appName;return{login:i,logout:s}}e.$inject=["$q","$log","pcApiClient","pcFormEncode","pcCurrentUser","pcConfig"],window.app.service("pcOauth",e)}();
"use strict";!function(){function e(){return{nocUser:"NocUser",connectAdmin:"ConnectAdmin",connectManager:"ConnectManager",connectUser:"ConnectUser",superUser:"SuperUser",genesisUser:"GenesisUser",demoManager:"DemoManager",genesisAdmin:"GenesisAdmin",skySparkAdmin:"SkySparkAdmin"}}window.app.service("pcUserRoles",e)}();
"use strict";window.PowerConnect=window.PowerConnect||{},function(){function e(e){return e?"C("+e.lat+","+e.lng+")":null}function o(e){if(!e)return null;var o=_.replace(e,"C(","").replace(o,")",""),t=_.split(o,",");return 2!==t.length?null:{lat:parseFloat(t[0]),lng:parseFloat(t[1])}}function t(e){if(!e||0===e.length)return null;var o=PowerConnect.Tags.tagValue(e,"geoStreet"),t=PowerConnect.Tags.tagValue(e,"geoCity"),n=PowerConnect.Tags.tagValue(e,"geoState"),r=PowerConnect.Tags.tagValue(e,"geoPostalCode");return((o&&o.trim()?o+",":"")+" "+(t?t+",":"")+" "+(n||"")+" "+(r||"")).trim()}function n(e){if(!e||0===e.length)return null;var o=PowerConnect.Tags.tagValue(e,"geoCoord");if(!o)return null;var t=PowerConnect.Tags.tagValue(e,"geoStreet"),n=PowerConnect.Tags.tagValue(e,"geoCity"),r=PowerConnect.Tags.tagValue(e,"geoState"),a=PowerConnect.Tags.tagValue(e,"geoPostalCode");return{address1:t,city:n,state:r,zip:a,position:PowerConnect.Address.getPositionFromGeoCoord(o)}}window.PowerConnect.Address={getGeoCoordFromPosition:e,getPositionFromGeoCoord:o,getAddressFromTags:t,getAddressObjectFromTags:n}}();
"use strict";!function(){window.app.service("pcAlert",["$rootScope","$log",function(o,n){function e(e){o.$broadcast(window.PowerConnect.CommonEvents.alertSuccess,e),n.log("success "+e.message+JSON.stringify(e))}function r(e){o.$broadcast(window.PowerConnect.CommonEvents.alertError,e),n.error("error "+e.message+JSON.stringify(e))}function s(e){o.$broadcast(window.PowerConnect.CommonEvents.alertInfo,e),n.info("info "+e.message+JSON.stringify(e))}return{success:e,error:r,info:s}}])}();
"use strict";!function(){function a(a){function n(a,n,s,o,c){var i;angular.isDefined(n.data)&&angular.isDefined(n.data.bodyClass)&&(i=n.data.bodyClass),i!==t&&(t=i,e())}function e(){var a=s;""!==t&&(a+=(""===a?"":" ")+t),document.getElementsByTagName("body")[0].className=a}var t="",s="";a.$on("$stateChangeSuccess",n)}a.$inject=["$rootScope"],window.app.run(a)}();
"use strict";window.PowerConnect=window.PowerConnect||{},function(){window.PowerConnect.CommonEvents={alertSuccess:"powerconnect.alertSuccess",alertInfo:"powerconnect.alertInfo",alertError:"powerconnect.alertError"}}();
"use strict";window.PowerConnect=window.PowerConnect||{},function(){function e(e){return e.data&&e.data.result&&e.data.result.message?e.data.result.message:"There was a problem with your request. Please try again."}window.PowerConnect.ErrorFromResponse={get:e}}();
"use strict";!function(){window.app.service("pcModal",["$modal","$animate",function(n,e){function t(){var n=angular.element(document.querySelector(".reveal-overlay"));e.enabled(n,!1)}var o=this;return o.open=function(e){return e.controller=["$scope","$modalInstance",function(n,t){n.$modalInstance=t,n.$modalData=e.modalData||null}],e.size=e.size||"full",e.animate===!1&&t(),n.open(e)},o.openConfirmation=function(e){return e.controller=["$scope","$modalInstance",function(n,e){n.$modalInstance=e}],e.size=e.size||"full",e.template='<div class="overlay-content"><h1>'+e.title+"</h1><p>"+e.message+'</p><button class="button" ng-click="$modalInstance.close()">'+(e.yesText||"confirm")+'</button><button class="hollow button" ng-click="$modalInstance.dismiss()">'+(e.noText||"cancel")+"</button></div>",e.animate===!1&&t(),n.open(e)},this}])}();
"use strict";!function(){window.app.directive("pcOnLostFocus",["$document","$timeout",function(t,n){function o(o,e){function c(t){e[0]===t.target||e[0].contains(t.target)?(t.stopPropagation(),t.preventDefault()):o.$apply(function(){o.onLostFocus()})}function i(t){"Escape"!==t.key&&27!==t.keyCode||(t.stopPropagation(),t.preventDefault(),o.$apply(function(){o.onLostFocus()}))}function s(){t[0].body.removeEventListener("click",c),t[0].body.removeEventListener("keydown",i)}n(function(){t[0].body.addEventListener("click",c),t[0].body.addEventListener("keydown",i)},250),o.$on("$destroy",s)}return{restrict:"A",scope:{onLostFocus:"&pcOnLostFocus"},link:o}}])}();
"use strict";window.PowerConnect=window.PowerConnect||{},function(){function n(n,a,e){var t=_.find(n,{name:a});t?t.value=e||null:n.push({name:a,value:e||null})}function a(n,a){_.remove(n,function(n){return n.name===a})}function e(n,a){var e=_.find(n,{name:a});return e?e.value:null}function t(n,a){return _.some(n,{name:a})}function u(n,a){var e=!1;return _.forEach(n,function(n){return e=_.includes(a,n.name),e?!1:void 0}),e}function r(n){var a=null;return _.forEach(n,function(n){null===a?a="":a+=" and ",a+=n.value?"tags/any(tag: tag/name eq '"+n.name+"' and tag/value eq '"+n.value+"')":"tags/any(tag: tag/name eq '"+n.name+"')"}),a}window.PowerConnect.Tags={setTag:n,removeTag:a,tagValue:e,hasTag:t,hasAnyOfTheseTags:u,getODataTagQueryString:r}}();
"use strict";!function(){function o(o,n){function t(){c=o.$on(window.PowerConnect.CommonEvents.alertSuccess,s),i=o.$on(window.PowerConnect.CommonEvents.alertInfo,s),m=o.$on(window.PowerConnect.CommonEvents.alertError,s)}function e(){c(),i(),m()}function s(o,t){var e={};e.id=(new Date).getTime(),e.success=o.name===window.PowerConnect.CommonEvents.alertSuccess,e.info=o.name===window.PowerConnect.CommonEvents.alertInfo,e.error=o.name===window.PowerConnect.CommonEvents.alertError,e.message=t.message,a.toasts.push(e),n(function(){r(e)},3e3)}function r(o){var n=_.findIndex(a.toasts,["id",o.id]);n>-1&&a.toasts.splice(n,1)}var c,i,m,a=this;a.toasts=[],a.close=r,a.$onInit=t,a.$onDestroy=e}o.$inject=["$rootScope","$timeout"],window.app.component("pcToast",{bindings:{},templateUrl:"/app/commonScripts/utils/pcToast.template.html",controller:o,controllerAs:"vm"})}();
"use strict";!function(){function e(e,t){function r(){var r=this,o=e.getRefreshClientForComponent(n);o.poll("ProgramSummaries?$select=id,name,isRunning,startDateUtc,endDateUtc,isoName&$expand=metrics&$orderby=name",6e4)["catch"](function(e){return t.error({message:window.PowerConnect.ErrorFromResponse.get(e)}),n.isLoaded=!0,Rx.Observable.empty()}).subscribe(function(e){r.programs=e.data.result,n.isLoaded=!0})}var n=this;n.programs=[],n.$onInit=r}e.$inject=["pcApiClient","pcAlert"],window.app.component("pcCurtailmentDashboard",{bindings:{},templateUrl:"/app/curtailments/dashboard/pcCurtailmentDashboard.template.html",controller:e,controllerAs:"vm"})}();
"use strict";!function(){function r(r){function t(){r.go("curtailments.summary",{programId:a.program.id})}var a=this;a.showDetails=t}r.$inject=["$state"],window.app.component("pcProgramCard",{templateUrl:"/app/curtailments/dashboard/pcProgramCard.template.html",controller:r,controllerAs:"vm",bindings:{program:"<"}})}();
"use strict";!function(){function t(){}window.app.component("pcProgramCurtailmentStatus",{bindings:{programSummary:"<"},templateUrl:"/app/curtailments/layout/pcProgramCurtailmentStatus.template.html",controller:t,controllerAs:"vm"})}();
"use strict";!function(){function r(r,e){function t(){r.getRefreshClientForComponent(n).poll("ProgramSummaries/"+n.programId+"?"+a,o)["catch"](function(r){return e.error({message:window.PowerConnect.ErrorFromResponse.get(r)}),Rx.Observable.empty()}).subscribe(function(r){n.programSummary=r.data})}var n=this,o=6e4,a="$select=id,name,isRunning,startDateUtc,endDateUtc&$expand=metrics";n.$onInit=t}r.$inject=["pcApiClient","pcAlert"],window.app.component("pcProgramSummary",{templateUrl:"/app/curtailments/layout/pcProgramSummary.template.html",controller:r,controllerAs:"vm",bindings:{programId:"<"}})}();
"use strict";!function(){function t(){var t=this;t.isLoaded=!0}window.app.component("pcCurtailmentSummary",{bindings:{programId:"<"},templateUrl:"/app/curtailments/summary/pcCurtailmentSummary.template.html",controller:t,controllerAs:"vm"})}();
"use strict";!function(){function t(t,e){function a(){n.existingCustomer?(n.isInEditMode=!0,n.customer=angular.extend({},n.existingCustomer),n.customer.skySparkProjectName=PowerConnect.Tags.tagValue(n.customer.tags,"skySparkProjectName"),n.customer.virtuWattUsername=PowerConnect.Tags.tagValue(n.customer.tags,"virtuWattUsername"),n.customer.virtuWattPassword=PowerConnect.Tags.tagValue(n.customer.tags,"virtuWattPassword")):n.isInAddMode=!0}function s(){n.isSaving=!0,n.error=!1;var a=angular.extend({tags:[],type:"Customer"},n.customer);o(a),(n.isInAddMode?t.post("Groups?"+n._odataOptions,a):t.put("Groups/"+a.uuid+"?"+n._odataOptions,a)).then(function(t){n.modalInstance.close(t.data),e.success({message:"Customer "+(n.isInAddMode?"added":"updated")})})["catch"](function(){n.error=!0})["finally"](function(){n.isSaving=!1})}function o(t){t.skySparkProjectName&&(PowerConnect.Tags.setTag(t.tags,"skySparkProjectName",t.skySparkProjectName),delete t.skySparkProjectName),t.virtuWattUsername&&(PowerConnect.Tags.setTag(t.tags,"virtuWattUsername",t.virtuWattUsername),delete t.virtuWattUsername),t.virtuWattPassword&&(PowerConnect.Tags.setTag(t.tags,"virtuWattPassword",t.virtuWattPassword),delete t.virtuWattPassword)}function r(){return n.isDeleting?void(n.isDeleting=!1):void n.modalInstance.dismiss()}var n=this;n._odataOptions="$select=uuid,name,type&$expand=tags",n.submit=s,n.$onInit=a,n.close=r}t.$inject=["pcApiClient","pcAlert"],window.app.component("pcAddEditCustomerModal",{templateUrl:"/app/customers/addEdit/pcAddEditCustomerModal.template.html",controller:t,controllerAs:"vm",bindings:{existingCustomer:"<",modalInstance:"<"}})}();
"use strict";!function(){function t(t,e,n,s){function o(){n.open({template:'<pc-add-edit-customer-modal modal-instance="$modalInstance"></pc-add-edit-customer-modal>'}).result.then(function(t){l.totalCustomers+=1,l.customers.splice(_.sortedIndexBy(l.customers,t,"name"),0,t)})}function a(t){return t.devicesOffine?t.devicesOffine+" of "+t.totalEnumeratedDevices+" Offline":"Online"}function r(t){return t.thingsOptedOut?t.thingsOptedOut+" of "+t.totalEnumeratedThings+" Opted Out":"All Opted In"}function i(){!l.isBusy&&l.nextUrl&&c(!1)}function u(t){l.nextUrl=d,""!==t[0]&&(l.nextUrl+=" and "+PowerConnect.OData.containsFilter("name",t)),c(!0)}function c(n){l.isBusy=!0,n&&(l.isLoaded=!1),e.get(l.nextUrl).then(function(t){t&&(l.nextUrl=t.data.nextUrl,l.totalCustomers=t.data.totalCount,t.data.result&&(null===l.customers||n?l.customers=t.data.result:l.customers=_.concat(l.customers,t.data.result)))})["catch"](function(t){s.error({message:"Failed to retrieve Customers",error:t})})["finally"](function(){l.isLoaded===!1?t(function(){l.isBusy=!1},1e3):l.isBusy=!1,l.isLoaded=!0})}var l=this,d="GroupSummaries?$expand=tags,metrics($select=totalEnumeratedDevices,totalEnumeratedThings,devicesOffline,thingsOptedOut)&$filter=type eq 'Customer'";l.nextUrl=d,l.customers=null,l.totalCustomers=0,l.isLoaded=!1,l.isBusy=!0,l.deviceStatus=a,l.equipmentOutStatus=r,l.showAddCustomerModal=o,l.nextPage=i,l.search=u,l.$onInit=function(){c(!0)}}t.$inject=["$timeout","pcApiClient","pcModal","pcAlert"],window.app.component("pcCustomerDashboard",{bindings:{},templateUrl:"/app/customers/dashboard/pcCustomerDashboard.template.html",controller:t,controllerAs:"vm"})}();
"use strict";!function(){function e(e,t,o,a){function s(){t.all([e.get(m),e.get(c)]).then(function(e){d.customer=e[0].data,d.siteCount=e[1].data.result.length,d.sites=e[1].data.result,d.siteMapNumber=1,_.each(d.sites,function(e){window.PowerConnect.Tags.hasTag(e.tags,"geoCoord")&&(e.siteMapNumber=d.siteMapNumber++,n(e))})})["catch"](function(e){o.error({message:"Failed to retrieve Sites",error:e})})["finally"](function(){d.isLoaded=!0})}function n(e){var t=window.PowerConnect.Tags.tagValue(e.tags,"geoCoord"),o=PowerConnect.Address.getPositionFromGeoCoord(t);d.markers.push({position:o,title:e.name,label:e.siteMapNumber.toString(),info:e.name})}function r(){a.open({template:'<pc-add-edit-customer-modal modal-instance="$modalInstance" existing-customer="$modalData.customer"></pc-add-edit-customer-modal>',modalData:{customer:d.customer}}).result.then(function(e){angular.extend(d.customer,e)})}function i(){a.open({template:'<pc-add-edit-site-modal customer-uuid="$modalData.customerUuid" modal-instance="$modalInstance">\n                           </pc-add-edit-site-modal>',modalData:{customerUuid:d.customer.uuid}}).result.then(function(e){d.sites.splice(_.sortedIndexBy(d.sites,e,function(e){return e.name}),0,e),d.siteCount++,e.siteMapNumber=d.siteMapNumber++,n(e)})}function u(e){return PowerConnect.Address.getAddressFromTags(e.tags)}var d=this;d.$onInit=s,d.editCustomer=r,d.addSite=i,d.getSiteAddress=u;var m="Groups/"+d.customerUuid+"?$select=uuid,name&$expand=tags",c="Groups?parentGroupUuid="+d.customerUuid+"&$select=uuid,name,tags&$expand=tags&$filter=type eq 'Site'";d.markers=[]}e.$inject=["pcApiClient","$q","pcAlert","pcModal"],window.app.component("pcCustomerSummary",{bindings:{customerUuid:"<"},templateUrl:"/app/customers/summary/pcCustomerSummary.template.html",controller:e,controllerAs:"vm"})}();
"use strict";!function(){function t(t,e,i){function a(){s.group&&(s.isGroupActive=s.strategy?PowerConnect.Tags.tagValue(s.group.tags,"activeStrategy")==s.strategy.id:PowerConnect.Tags.hasTag(s.group.tags,"startedAtUtc"))}function o(){s.group&&(s.isGroupActive=s.strategy?PowerConnect.Tags.tagValue(s.group.tags,"activeStrategy")==s.strategy.id:PowerConnect.Tags.hasTag(s.group.tags,"startedAtUtc"))}function c(){s.activating=!s.isGroupActive,s.deactivating=s.isGroupActive;var e="Groups/"+s.group.uuid+"/"+(s.isGroupActive?"Deactivate":"Activate");return s.strategy&&!s.isGroupActive&&(e+="/"+s.strategy.id),t.post(e)}function r(){s.isGroupActive=!s.isGroupActive,e.$broadcast(s.isGroupActive?window.PowerConnect.GroupEvents.activated:window.PowerConnect.GroupEvents.deactivated,{uuid:s.group.uuid}),i.success({message:(s.isGroupActive?"Activate":"Deactivate")+" was successful"}),s.activating=!1,s.deactivating=!1}function n(){s.activating=!1,s.deactivating=!1}var s=this;s.activeText=s.activeText||"Deactivate",s.inactiveText=s.inactiveText||"Activate",s.$onInit=a,s.$onChanges=o,s.toggleGroupActivation=c,s.finished=r,s.error=n}t.$inject=["pcApiClient","$rootScope","pcAlert"],window.app.component("pcGroupActivation",{bindings:{group:"<",strategy:"<?",micro:"@",activeText:"@?",inactiveText:"@?"},templateUrl:"/app/groups/activation/pcGroupActivation.template.html",controller:t,controllerAs:"vm"})}();
"use strict";!function(){function t(t,i){function n(){o.thing&&(o.isActive=PowerConnect.Tags.hasTag(o.thing.tags,"isActive"))}function c(){o.thing&&(o.isActive=PowerConnect.Tags.hasTag(o.thing.tags,"isActive"))}function e(){return o.thing?"out"!==PowerConnect.Tags.tagValue(o.thing.tags,"opt"):void 0}function a(){return o.activating=!o.isActive,o.deactivating=o.isActive,t.post("Things/"+o.thing.uuid+"/"+(o.isActive?"Deactivate":"Activate"))}function s(){o.isActive=!o.isActive,i.success({message:(o.isActive?"Activate":"Deactivate")+" was successful"}),o.activating=!1,o.deactivating=!1}function g(){o.activating=!1,o.deactivating=!1}var o=this;o.isActive=!1,o.activating=!1,o.deactivating=!1,o.isOptedIn=e,o.toggleActivation=a,o.finished=s,o.error=g,o.$onInit=n,o.$onChanges=c}t.$inject=["pcApiClient","pcAlert"],window.app.component("pcThingActivation",{bindings:{thing:"<"},templateUrl:"/app/groups/activation/pcThingActivation.template.html",controller:t,controllerAs:"vm"})}();
"use strict";!function(){function t(t,i){function e(){r()["finally"](function(){return c.isLoaded=!0})}function r(){var i="Groups/"+c.groupUuid+"/Activity?$select=id,activityType,description,source,sourceId,timestampUtc";return c.filterString&&(i+="&$filter="+c.filterString),t.get(i).then(function(t){c.groupActivity=n(t.data.result)})}function n(t){var i=_(t).groupBy(function(t){return moment.utc(t.timestampUtc).local().format("M/D/YYYY")}).map(function(t,i){return{date:i,logs:t}}).value();return i}function a(t){return t?i("pcCamelCaseToHuman")(t.replace("Group","")):"Unknown"}function o(t){return"GroupCurtailmentStart"===t||"GroupActivation"===t}function u(t){return"GroupCurtailmentStop"===t||"GroupDeactivation"===t}function l(t){var i=moment(),e=moment(t,"MM/DD/YYYY"),r=e.diff(i,"days");return 0===r?"today":-1===r?"yesterday":t}function p(){c.isFiltering=!0;var t=[];if(c.filter&&c.filter.startDate&&t.push("timestampUtc gt "+moment(c.filter.startDate,"MM/DD/YYYY").toJSON()),c.filter&&c.filter.endDate){var i=moment(c.filter.endDate,"MM/DD/YYYY").add(1,"day");t.push("timestampUtc lt "+i.toJSON())}c.filter&&c.filter.activityType&&t.push("activityType eq '"+c.filter.activityType+"'"),0===t.length?c.filterString=null:c.filterString=t.join(" and "),r()["finally"](function(){return c.isFiltering=!1})}var c=this;c.activityTypes=[{value:null,display:"Choose a type"},{value:"GroupCurtailmentStart",display:"Curtailment Started"},{value:"GroupCurtailmentStop",display:"Curtailment Stopped"},{value:"GroupActivation",display:"Group Activated"},{value:"GroupDeactivation",display:"Group Deactivated"}],c.$onInit=e,c.formatEntryType=a,c.isActivationEntry=o,c.isDeactivationEntry=u,c.getDateLabel=l,c.applyFilter=p}t.$inject=["pcApiClient","$filter"],window.app.component("pcGroupActivity",{templateUrl:"/app/groups/activity/pcGroupActivity.template.html",controller:t,controllerAs:"vm",bindings:{groupUuid:"<"}})}();
"use strict";!function(){function e(e,t,o){function n(){u.existingGroup?(u.isInEditMode=!0,u.group=angular.extend({},u.existingGroup),u.group.description=PowerConnect.Tags.tagValue(u.group.tags,"description"),u.group.isPrivate=PowerConnect.Tags.hasTag(u.group.tags,"isPrivate")):(u.isInAddMode=!0,u.group={type:"Equipment",isPrivate:!1})}function i(e){PowerConnect.Tags.setTag(e.tags,"description",u.group.description),delete e.description}function r(e){u.group.isPrivate?PowerConnect.Tags.setTag(e.tags,"isPrivate"):PowerConnect.Tags.removeTag(e.tags,"isPrivate"),delete e.isPrivate}function s(){u.isSaving=!0,u.error=!1;var o=angular.extend({tags:[]},u.group);i(o),r(o),(u.isInAddMode?e.post("Groups?"+u._odataOptions,o):e.put("Groups/"+o.uuid+"?"+u._odataOptions,o)).then(function(e){u.modalInstance.close(e.data),t.success({message:"Group "+(u.isInAddMode?"added":"updated")})})["catch"](function(){u.error=!0})["finally"](function(){u.isSaving=!1})}function a(){return u.isDeleting?void(u.isDeleting=!1):void u.modalInstance.dismiss()}function d(){u.error=null,u.isBusyDeleting=!0,e["delete"]("Groups/"+u.group.uuid+(u.deleteAll?"?all=true":"")).then(function(){t.success({message:u.group.name+" successfully deleted"}),o.$broadcast(window.PowerConnect.GroupEvents.deleted,{uuid:u.group.uuid}),u.modalInstance.close()})["catch"](function(e){e.statusText?u.error=e.statusText:e.data&&e.data.error?u.error=e.data.error:u.error="An error occurred"})["finally"](function(){u.isBusyDeleting=!1})}var u=this;u._odataOptions="$select=uuid,name,type&$expand=tags",u.submit=s,u.$onInit=n,u.close=a,u.removeGroup=d}e.$inject=["pcApiClient","pcAlert","$rootScope"],window.app.component("pcAddEditGroupModal",{templateUrl:"/app/groups/addEdit/pcAddEditGroupModal.template.html",controller:e,controllerAs:"vm",bindings:{existingGroup:"<",modalInstance:"<",hideRemove:"@?"}})}();
"use strict";!function(){function o(o,t){function a(){t.open({template:'<pc-add-edit-group-modal modal-instance="$modalInstance" existing-group="$modalData.group"></pc-add-edit-group-modal>',modalData:{group:p.group}}).result.then(function(o){angular.extend(p.group,o)})}function n(){o.go("groups.summary",{uuid:p.group.uuid})}var p=this;p.showEditModal=a,p.showDetails=n}o.$inject=["$state","pcModal"],window.app.component("pcGroupCard",{templateUrl:"/app/groups/dashboard/pcGroupCard.template.html",controller:o,controllerAs:"vm",bindings:{group:"<"}})}();
"use strict";!function(){function e(e,o,t,n){function r(){var o=e.getRefreshClientForComponent(i);o.poll(d,3e4)["catch"](function(e){return n.error({message:"Failed to retrieve groups",error:e}),i.isLoaded=!0,Rx.Observable.empty()}).subscribe(function(e){e&&(i.groups=e.data.result),i.isLoaded=!0})}function p(){o.open({template:'<pc-add-edit-group-modal modal-instance="$modalInstance"></pc-add-edit-group-modal>'}).result.then(function(e){i.groups.splice(_.sortedIndexBy(i.groups,e,"name"),0,e)})}var i=this,d="GroupSummaries?$select=uuid,name,type&$expand=tags,metrics&$filter=type eq 'Equipment'",u=void 0;i.groups=null,i.isLoaded=!1,i.showAddGroupModal=p,i.$onInit=function(){r(),u=t.$on(window.PowerConnect.GroupEvents.deleted,function(e,o){_.remove(i.groups,{uuid:o.uuid})})},i.$onDestroy=function(){u()}}e.$inject=["pcApiClient","pcModal","$rootScope","pcAlert"],window.app.component("pcGroupDashboard",{bindings:{},templateUrl:"/app/groups/dashboard/pcGroupDashboard.template.html",controller:e,controllerAs:"vm"})}();
"use strict";!function(){function t(t,e,o,n){function r(){e.open({template:'<pc-add-edit-group-modal modal-instance="$modalInstance" existing-group="$modalData.group" hide-remove="true"></pc-add-edit-group-modal>',modalData:{group:a.group}}).result.then(function(t){angular.extend(a.group,t)})}var a=this,p="Groups/"+a.groupUuid+"?$select=uuid,name,type&$expand=tags";a.$onInit=function(){o.get(p).then(function(t){t&&(a.group=t.data)})["catch"](function(t){n.error({message:"Failed to retrieve group",error:t})})},a.showEditModal=r}t.$inject=["$state","pcModal","pcApiClient","pcAlert"],window.app.component("pcGroupHeader",{bindings:{groupUuid:"<",counter:"<?"},templateUrl:"/app/groups/layout/pcGroupHeader.template.html",controller:t,controllerAs:"vm"})}();
"use strict";!function(){function o(){var o=this;o.tagsToFilterOn=[]}window.app.component("pcAddGroupMembershipModal",{bindings:{group:"<",modalInstance:"<"},templateUrl:"/app/groups/membership/pcAddGroupMembershipModal.template.html",controller:o,controllerAs:"vm"})}();
"use strict";!function(){function e(e,t,n,o){function r(){o.open({template:'<pc-add-group-membership-modal modal-instance="$modalInstance" group="$modalData.group"></pc-add-group-membership-modal>',modalData:{group:g.group}}).result.then(function(){s.refreshNow()})}function a(){return g.group?g.group.groups.length+g.group.things.length:0}function u(){s.refreshNow()}function p(){s=t.getRefreshClientForComponent(g),i()}function i(){s.poll(l,3e4)["catch"](function(e){return n.error({message:"Failed to get membership data",error:e}),g.isLoaded=!0,Rx.Observable.empty()}).subscribe(function(e){return null==e.data||0===e.data.length?void(g.group=null):(g.group=e.data,void(g.isLoaded=!0))})}function l(){var e="Groups/"+g.groupUuid+"/Membership?$select=uuid,name,type&$expand=",t="things($select=uuid,name;$expand=groups($select=name),",n=",groups($select=uuid,name;$expand=",o=null,r=g.tagsToFilterOn.length>0?PowerConnect.Tags.getODataTagQueryString(g.tagsToFilterOn):null;return o=o=null!==r?"tags;$filter="+r+")":"tags)",e+t+o+n+o}var s,g=this;g.group=null,g.tagsToFilterOn=[],g.isLoaded=!1,g.addMembers=r,g.getMembershipCount=a,g.onTagsChanged=u,g.$onInit=p}e.$inject=["$state","pcApiClient","pcAlert","pcModal"],window.app.component("pcGroupMembership",{bindings:{groupUuid:"<"},templateUrl:"/app/groups/membership/pcGroupMembership.template.html",controller:e,controllerAs:"vm"})}();
"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}!function(){function e(e,t,r,n){function i(){return"groups"!==l.type&&"things"!==l.type?void t.error("Invalid selector type ("+l.type+") being used.  Valid options are groups and things"):void e.$watchCollection(function(){return l.tags},s)}function u(){var e=_(l.items).filter("selected").map("uuid").value();if(0===e.length)return void n.info({message:"No selected items to add"});var t={childGroupUuids:"groups"===l.type?e:[],thingUuids:"things"===l.type?e:[]};r.post("/Groups/"+l.group.uuid+"/Membership/Add",t).then(function(){var t;n.success({message:"Selected "+l.type+" added"});var r=_.map(e,function(e){return{uuid:e}});(t=l.group[l.type]).push.apply(t,_toConsumableArray(r)),l.items=a(l.items)})["catch"](function(e){n.error({message:"Failed to add selected "+l.type,error:e})})}function o(){_.forEach(l.items,function(e){e.selected=!0})}function s(){var e=d();return e?void r.get(e).then(function(e){l.items=e.data&&e.data.result?a(e.data.result):[]})["catch"](function(e){n.error({message:"Failed to get filtered list of "+l.type,error:e})}):void(l.items=[])}function a(e){return _.filter(e,function(e){return!_.find(l.group[l.type],function(t){return t.uuid===e.uuid})})}function d(){if(0===l.tags.length)return null;var e=PowerConnect.Tags.getODataTagQueryString(l.tags);return"groups"===l.type?"groups?$select=uuid,name&$expand=tags&$filter="+e+" and uuid ne '"+l.group.uuid+"'":"things?$select=uuid,name&$expand=tags&$filter="+e}var l=this;l.items=null,l.selectAll=o,l.addSelected=u,l.$onInit=i}e.$inject=["$scope","$log","pcApiClient","pcAlert"],window.app.component("pcMembershipAddSelector",{bindings:{group:"<",tags:"<",type:"@",title:"@"},templateUrl:"/app/groups/membership/pcMembershipAddSelector.template.html",controller:e,controllerAs:"vm"})}();
"use strict";!function(){function e(e,o,t){function n(){return _.every(l.collection,{remove:!0})}function i(){return n()?void _.forEach(l.collection,function(e){e.remove=!1}):void _.forEach(l.collection,function(e){e.remove=!0})}function c(){l.editMode=!1,_.forEach(l.collection,function(e){e.remove=!1})}function r(){l.working=!0;var n=_.filter(l.collection,{remove:!0}).length;0!==n&&e.openConfirmation({title:"Remove",message:"Are you sure you want to Remove the selected "+n+" "+l.type+"s from this group?",yesText:"Remove"}).result.then(function(){var e=_.chain(l.collection).filter({remove:!0}).map("uuid").value(),n={};n[("group"===l.type?"childGroup":l.type)+"Uuids"]=e,o.post("Groups/"+l.groupUuid+"/Membership/Remove",n).then(function(){_.remove(l.collection,{remove:!0}),t.success({message:"Remove was successful"}),c()})["catch"](function(e){t.error({message:e.data&&e.data.message?e.data.message:"Remove failed"})})["finally"](function(){l.working=!1})})["catch"](function(){l.working=!1})}var l=this;l.editMode=!1,l.allSelected=n,l.selectAll=i,l.done=c,l.removeSelected=r}e.$inject=["pcModal","pcApiClient","pcAlert"],window.app.component("pcMembershipEditButtons",{bindings:{groupUuid:"<",editMode:"=",collection:"=",type:"@"},templateUrl:"/app/groups/membership/pcMembershipEditButtons.template.html",controller:e,controllerAs:"vm"})}();
"use strict";!function(){function e(e,t,n,i){function u(){p.isDeleting=!1,p.existingGroupSchedule?(p.isInEditMode=!0,p.groupSchedule=angular.extend({},p.existingGroupSchedule),o()):(p.isInAddMode=!0,p.groupSchedule={recurrence:"Never"})}function o(){p.existingGroupSchedule.durationMinutes&&(p.groupSchedule.durationMinutes=p.existingGroupSchedule.durationMinutes.toString());var e=moment.utc(p.existingGroupSchedule.startDateUtc,"YYYY-MM-DD hh:mm:ss").local();p.startDate=e.format("MM/DD/YYYY"),p.startTime=e.format("h:mm a"),p.notificationRecipientTags=a()}function a(){var e=[];if(null===p.groupSchedule.notificationRecipients)return e;var t=p.groupSchedule.notificationRecipients.split(";");return _.forEach(t,function(t){e.push({name:t})}),e}function r(){p.isSaving=!0,p.error=!1,s();var n=angular.extend({},p.groupSchedule),i="groups/"+p.groupUuid+"/schedules";(p.isInAddMode?e.post(i+"?"+p._odataOptions,n):e.put(i+"/"+n.id+"?"+p._odataOptions,n)).then(function(e){var n=e.data;n.recurrence="Never",p.modalInstance.close(n),t.success({message:"Group schedule "+(p.isInAddMode?"added":"updated")})})["catch"](function(e){p.error=window.PowerConnect.ErrorFromResponse.get(e)})["finally"](function(){p.isSaving=!1})}function s(){var e=p.startDate+" "+p.startTime;p.groupSchedule.startDateUtc=moment(e,"M/D/YYYY h:mm:ss a").utc().format("YYYY-MM-DDTHH:mm:ssZ"),p.groupSchedule.notificationRecipients=d(),p.groupSchedule.durationMinutes&&0===p.groupSchedule.durationMinutes.length&&(p.groupSchedule.durationMinutes=null)}function d(){var e=null;return _.forEach(p.notificationRecipientTags,function(t){null===e?e=t.name:e+=";"+t.name}),e}function l(){return p.isDeleting?void(p.isDeleting=!1):void p.modalInstance.dismiss()}function c(){p.error=null,e["delete"]("groups/"+p.groupUuid+"/schedules/"+p.groupSchedule.id).then(function(){t.success({message:p.groupSchedule.name+" successfully deleted"}),i.$broadcast(window.PowerConnect.GroupScheduleEvents.deleted,{id:p.groupSchedule.id}),p.modalInstance.close()})["catch"](function(e){p.error=window.PowerConnect.ErrorFromResponse.get(e)})}var p=this;p._odataOptions="$select=id,name,durationMinutes,startDateUtc,notificationsEnabled,notificationRecipients",p.submit=r,p.$onInit=u,p.close=l,p.removeGroupSchedule=c,p.durationValues=[{value:"",display:"~Select"},{value:"15",display:"15"},{value:"30",display:"30"},{value:"45",display:"45"},{value:"60",display:"60"},{value:"75",display:"75"},{value:"90",display:"90"},{value:"105",display:"105"},{value:"120",display:"120"},{value:"135",display:"135"},{value:"150",display:"150"},{value:"165",display:"165"},{value:"180",display:"180"}],p.recurrenceValues=[{value:"Never",display:"Never"}]}e.$inject=["pcApiClient","pcAlert","pcModal","$rootScope"],window.app.component("pcAddEditGroupScheduleModal",{templateUrl:"/app/groups/schedule/pcAddEditGroupScheduleModal.template.html",controller:e,controllerAs:"vm",bindings:{existingGroupSchedule:"<",groupUuid:"<",modalInstance:"<"}})}();
"use strict";!function(){function e(e,o,t,u){function n(){var e="groups/"+r.groupUuid+"/schedules?$select=id,name,durationMinutes,startDateUtc,notificationsEnabled,notificationRecipients",t=o.getRefreshClientForComponent(r);t.poll(e,3e4)["catch"](function(e){return u.error({message:"Failed to retrieve group schedule",error:e}),r.isLoaded=!0,Rx.Observable.empty()}).subscribe(function(e){e&&(r.groupSchedules=e.data.result,_.forEach(r.groupSchedules,function(e){e.recurrence="Never"})),r.isLoaded=!0})}function d(){e.open({template:'<pc-add-edit-group-schedule-modal modal-instance="$modalInstance"group-uuid="$modalData.groupUuid"></pc-add-edit-group-schedule-modal>',modalData:{groupSchedule:r.groupSchedule,groupUuid:r.groupUuid}}).result.then(function(e){r.groupSchedules.splice(_.sortedIndexBy(r.groupSchedules,e,"name"),0,e)})}var r=this,c=void 0;r.$onInit=function(){r.isLoaded=!1,n(),c=t.$on(window.PowerConnect.GroupScheduleEvents.deleted,function(e,o){_.remove(r.groupSchedules,{id:o.id})})},r.$onDestroy=function(){c()},r.showAddModal=d}e.$inject=["pcModal","pcApiClient","$rootScope","pcAlert"],window.app.component("pcGroupSchedules",{templateUrl:"/app/groups/schedule/pcGroupSchedules.template.html",controller:e,controllerAs:"vm",bindings:{groupUuid:"<"}})}();
"use strict";!function(){function e(e){function o(){e.open({template:'<pc-add-edit-group-schedule-modal modal-instance="$modalInstance"existing-group-schedule="$modalData.groupSchedule"group-uuid="$modalData.groupUuid"></pc-add-edit-group-schedule-modal>',modalData:{groupSchedule:u.groupSchedule,groupUuid:u.groupUuid}}).result.then(function(e){angular.extend(u.groupSchedule,e)})}var u=this;u.showEditModal=o}e.$inject=["pcModal"],window.app.component("pcScheduleRow",{templateUrl:"/app/groups/schedule/pcScheduleRow.template.html",controller:e,controllerAs:"vm",bindings:{groupSchedule:"<",groupUuid:"<"}})}();
"use strict";!function(){function t(t,e,n){function o(){d=e.$on(window.PowerConnect.GroupEvents.activated,a),l=e.$on(window.PowerConnect.GroupEvents.deactivated,a)}function r(){d(),l()}function a(t,e){e.uuid===h.group.uuid&&(h.isGroupActive=t.name===window.PowerConnect.GroupEvents.activated,u())}function i(){h.group&&(g(),u())}function u(){f?f.refreshNow():s()}function s(){var e="Groups/"+h.group.uuid+"?$select=uuid&$expand=tags",o="Groups/"+h.group.uuid+"/Membership/Enumerated?$select=thingCount&$expand=things($expand=tags)";f=t.getRefreshClientForComponent(h),Rx.Observable.zip(f.poll(e,3e4),f.poll(o,3e4),function(t,e){return{groupInfo:t.data,membership:e.data}})["catch"](function(t){return n.error({message:"Failed to get signal state data",error:t}),h.loaded&&h.loaded(),Rx.Observable.empty()}).subscribe(function(t){h.group=t.groupInfo;var e=t.membership;g(),h.info=h.isGroupActive?c(h.group,e):void 0,h.loaded&&h.loaded()})}function c(t,e){return{lastStartedBy:PowerConnect.Tags.tagValue(h.group.tags,"lastStartedBy"),startedAt:PowerConnect.Tags.tagValue(h.group.tags,"startedAtUtc"),thingsActivated:PowerConnect.Tags.tagValue(h.group.tags,"thingsActivated"),thingsActive:p(e.things),thingCount:e.thingCount?e.thingCount:0,startedAtUtc:PowerConnect.Tags.tagValue(t.tags,"startedAtUtc")}}function g(){h.isGroupActive=PowerConnect.Tags.hasTag(h.group.tags,"startedAtUtc")}function p(t){return _.filter(t,function(t){return PowerConnect.Tags.hasTag(t.tags,"isActive")}).length}var d,l,f,h=this;h.$onInit=o,h.$onChanges=i,h.$onDestroy=r}t.$inject=["pcApiClient","$rootScope","pcAlert"],window.app.component("pcGroupSignalState",{bindings:{group:"<",loaded:"&?"},templateUrl:"/app/groups/summary/pcGroupSignalState.template.html",controller:t,controllerAs:"vm"})}();
"use strict";!function(){function e(e,o,t){function n(){c.signalStateIsLoaded=!0,s()}function a(){c.activityIsLoaded=!0,s()}function i(){p=t.$on(window.PowerConnect.GroupEvents.activated,d),l=t.$on(window.PowerConnect.GroupEvents.deactivated,d),m=e.getRefreshClientForComponent(c),u()}function r(){p(),l()}function d(e,o){o.uuid===c.groupUuid&&m.refreshNow()}function s(){c.isLoaded=c.generalInfoIsLoaded&&c.signalStateIsLoaded&&c.activityIsLoaded}function u(){var e="GroupSummaries/"+c.groupUuid+"?$select=uuid,name,type&$expand=metrics,tags";m.poll(e,3e4)["catch"](function(e){return o.error({message:"Failed to retrieve group summary data",error:e}),c.generalInfoIsLoaded=!0,s(),Rx.Observable.empty()}).subscribe(function(e){c.group=e.data,c.group.totalMembershipCount=c.group.metrics.totalChildGroups+c.group.metrics.totalThings,c.generalInfoIsLoaded=!0,s()})}var c=this,p=void 0,l=void 0,m=void 0;c.isLoaded=!1,c.generalInfoIsLoaded=!1,c.signalStateIsLoaded=!1,c.activityIsLoaded=!1,c.signalStateLoaded=n,c.activityLoaded=a,c.$onInit=i,c.$onDestroy=r}e.$inject=["pcApiClient","pcAlert","$rootScope"],window.app.component("pcGroupSummary",{templateUrl:"/app/groups/summary/pcGroupSummary.template.html",controller:e,controllerAs:"vm",bindings:{groupUuid:"<"}})}();
"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,s=Array(e.length);t<e.length;t++)s[t]=e[t];return s}return Array.from(e)}!function(){function e(e,t,s){function o(){var e;if(f.errorMsg=null,f.error=!1,!f.geoAddress)return f.error=!0,void(f.errorMsg="Please select an address from the list of available address.");f.isSaving=!0;var o=angular.extend({tags:[],features:[],type:"Site"},f.site);PowerConnect.Tags.setTag(o.tags,"siteTypeId",f.siteType),PowerConnect.Tags.setTag(o.tags,"tz",f.timezone),PowerConnect.Tags.setTag(o.tags,"isoRef",f.iso),f.isInAddMode||(o.features=[]),(e=o.features).push.apply(e,_toConsumableArray(_.filter(f.features,"isActive").map(function(e){return e.id}))),r(o),f.isInAddMode&&(o.parentGroupUuid=f.customerUuid),(f.isInAddMode?t.post("Groups?"+l,o):t.put("Groups/"+o.uuid+"?"+l,o)).then(function(e){f.modalInstance.close(e.data),s.success({message:"Site "+(f.isInAddMode?"added":"updated")})})["catch"](function(){f.error=!0})["finally"](function(){f.isSaving=!1})}function r(e){f.geoAddress.address1&&PowerConnect.Tags.setTag(e.tags,"geoStreet",f.geoAddress.address1),f.geoAddress.city&&PowerConnect.Tags.setTag(e.tags,"geoCity",f.geoAddress.city),f.geoAddress.state&&PowerConnect.Tags.setTag(e.tags,"geoState",f.geoAddress.state),f.geoAddress.zip&&PowerConnect.Tags.setTag(e.tags,"geoPostalCode",f.geoAddress.zip);var t=PowerConnect.Address.getGeoCoordFromPosition(f.geoAddress.position);PowerConnect.Tags.setTag(e.tags,"geoCoord",t)}function n(){f.modalInstance.dismiss()}function a(){var e=[d(),u("Timezones?$select=description,olsonTz",f.timezones),u("Isos",f.isos),u("SiteTypes",f.siteTypes)];f.isInAddMode||e.push(c()),i(e)}function i(t){var s=e.defer();return e.all(t).then(function(){g(),s.resolve()})["catch"](function(e){s.reject(e)})["finally"](function(){f.isLoaded=!0}),s.promise}function d(){return t.get("Features").then(function(e){e&&e.data&&e.data.result&&(f.features=e.data.result)})["catch"](function(e){s.error({message:"Failed to load features",error:e})})}function u(e,o){return t.get(e).then(function(e){e&&e.data&&e.data.result&&o.push.apply(o,_.map(e.data.result,function(e){return{value:e.id||e.olsonTz,display:e.description||e.name}}))})["catch"](function(t){s.error({message:"Failed to load "+e,error:t})})}function c(){return t.get("Groups/"+f.siteUuid+"?$expand=tags,features").then(function(e){f.site=e.data,f.siteType=parseInt(PowerConnect.Tags.tagValue(f.site.tags,"siteTypeId")),f.timezone=PowerConnect.Tags.tagValue(f.site.tags,"tz"),f.iso=parseInt(PowerConnect.Tags.tagValue(f.site.tags,"isoRef")),f.searchAddress=PowerConnect.Address.getAddressFromTags(f.site.tags),f.geoAddress=PowerConnect.Address.getAddressObjectFromTags(f.site.tags)})["catch"](function(e){s.error({message:"Failed to retrieve site to edit!",error:e}),f.modalInstance.dismiss()})}function g(){_.forEach(f.features,function(e,t){f.features[t].isActive=!1,f.site&&f.site.features&&_.some(f.site.features,{id:e.id})&&(e.isActive=!0)})}var l="$select=uuid,name,type&$expand=tags",f=this;f.isLoaded=!1,f.isInAddMode=!f.siteUuid,f.timezones=[],f.isos=[],f.siteTypes=[],f.siteType=null,f.timezone=null,f.iso=null,f.searchAddress=null,f.geoAddress=null,f.submit=o,f.$onInit=a,f.close=n}e.$inject=["$q","pcApiClient","pcAlert"],window.app.component("pcAddEditSiteModal",{templateUrl:"/app/customers/sites/addEdit/pcAddEditSiteModal.template.html",controller:e,controllerAs:"vm",bindings:{customerUuid:"<",siteUuid:"<",modalInstance:"<"}})}();
"use strict";!function(){function e(e,t,a){function n(){var e=a.defer(),t=[r()];s.isInAddMode||t.push(o()),a.all(t).then(function(){e.resolve()})["catch"](function(t){e.reject(t)})["finally"](function(){s.isLoaded=!0})}function o(){return e.get("Groups/"+s.parentGroupUuid+"/Contacts?"+c+("&$filter=id eq "+s.contactId)).then(function(e){e&&e.data&&e.data.result&&1===e.data.result.length?s.contact=e.data.result[0]:t.error({message:"Contact not found!"})})["catch"](function(e){t.error({message:"Failed to load contact",error:e})})}function r(){return e.get("WirelessCarriers").then(function(e){e&&e.data&&e.data.result&&s.wirelessCarriers.push.apply(s.wirelessCarriers,_.map(e.data.result,function(e){return{value:e.id,display:e.name}}))})["catch"](function(e){t.error({message:"Failed to load wireless carriers",error:e})})}function i(){s.error=!1,s.isSaving=!0,""===s.contact.workPhone&&(delete s.contact.workPhone,delete s.contact.extension),""===s.contact.mobilePhone&&(delete s.contact.mobilePhone,delete s.contact.wirelessCarrier),(s.isInAddMode?e.post("Groups/"+s.contact.parentGroupUuid+"/Contacts?"+c,s.contact):e.put("Groups/"+s.parentGroupUuid+"/Contacts/"+s.contactId+"?"+c,s.contact)).then(function(e){s.modalInstance.close(e.data),t.success({message:"Contact "+(s.isInAddMode?"added":"updated")})})["catch"](function(e){s.error=window.PowerConnect.ErrorFromResponse.get(e)})["finally"](function(){s.isSaving=!1})}var s=this,c="$select=id,firstName,lastName,title,notificationPreference,email,emailFormat,workPhone,extension,mobilePhone,wirelessCarrierId";s.isLoaded=!1,s.isInAddMode=!s.contactId,s.wirelessCarriers=[],s.emailFormats=[{value:2,display:"HTML"},{value:1,display:"Text"}],s.notificationPreferences=[{value:"None",display:"None"},{value:"Email",display:"Email"},{value:"Sms",display:"SMS"},{value:"EmailSms",display:"Email And SMS"}],s.parents=[{value:s.customerUuid,display:"Customer"},{value:s.siteUuid,display:"Site"}],s.$onInit=n,s.submit=i}e.$inject=["pcApiClient","pcAlert","$q"],window.app.component("pcAddEditContactModal",{templateUrl:"/app/customers/sites/contacts/pcAddEditContactModal.template.html",controller:e,controllerAs:"vm",bindings:{contactId:"<?",modalInstance:"<",parentGroupUuid:"<",customerUuid:"<",siteUuid:"<"}})}();
"use strict";!function(){function t(t,e,n,o,a){function c(){U.nextSiteContactsUrl=h,U.nextCustomerContactsUrl=x,U.contacts=null,U.totalSiteContacts=0,U.totalCustomerContacts=0,U.isLoaded=!1,U.isBusy=!1}function s(){U.isBusy||!U.nextSiteContactsUrl&&!U.nextCustomerContactsUrl||r(!1)}function i(t){if(U.nextSiteContactsUrl=h,U.nextCustomerContactsUrl=x,U.isFiltered=!1,U.searchText=t,t&&t.length>0){var e=""+PowerConnect.OData.containsFilter("firstName",t,"or");e+=" or "+PowerConnect.OData.containsFilter("lastName",t,"or"),U.nextSiteContactsUrl+="&$filter="+e,U.nextCustomerContactsUrl+="&$filter="+e,U.isFiltered=!0}r(!0)}function r(n){U.isBusy=!0,n&&(U.isLoaded=!1,U.contacts=null);var o=[];U.nextCustomerContactsUrl&&o.push(u()),U.nextSiteContactsUrl&&o.push(l()),t.all(o)["finally"](function(){U.isLoaded===!1?e(function(){U.isBusy=!1},1e3):U.isBusy=!1,U.isLoaded=!0})}function u(){return n.get(U.nextCustomerContactsUrl).then(function(t){d(t.data.result,"Customer"),U.nextCustomerContactsUrl=t.data.nextUrl,U.totalCustomerContacts=t.data.totalCount})["catch"](function(t){o.error({message:"Failed to retrieve customer contacts",error:t})})}function l(){return n.get(U.nextSiteContactsUrl).then(function(t){d(t.data.result,"Site"),U.nextSiteContactsUrl=t.data.nextUrl,U.totalSiteContacts=t.data.totalCount})["catch"](function(t){o.error({message:"Failed to retrieve site contacts",error:t})})}function d(t,e){U.contacts?U.contacts=_.chain(_.map(t,function(t){return m(t,e)})).concat(U.contacts).orderBy(["firstName","lastName"]).value():U.contacts=_.map(t,function(t){return m(t,e)})}function m(t,e){return t.type=e,t}function C(){a.open({template:'<pc-add-edit-contact-modal modal-instance="$modalInstance" \n                                customer-uuid="$modalData.customerUuid"\n                                site-uuid="$modalData.siteUuid"\n                            </pc-add-edit-contact-modal>',modalData:{customerUuid:U.customerUuid,siteUuid:U.siteUuid}}).result.then(function(){U.setFirstPageLoad(),U.search(U.searchText)})}function p(t){a.open({template:'<pc-add-edit-contact-modal modal-instance="$modalInstance"\n                                contact-id="$modalData.contactId"\n                                parent-group-uuid="$modalData.parentGroupUuid"\n                            </pc-add-edit-contact-modal>',modalData:{contactId:t.id,parentGroupUuid:"Customer"===t.type?U.customerUuid:U.siteUuid}}).result.then(function(e){angular.extend(t,e)})}var U=this,f="id, firstName, lastName, email, workPhone, mobilePhone, title",h="Groups/"+U.siteUuid+"/Contacts?$select="+f,x="Groups/"+U.customerUuid+"/Contacts?$select="+f;U.search=i,U.nextPage=s,U.showAddContactModal=C,U.showEditContactModal=p,U.setFirstPageLoad=c,U.$onInit=function(){c(),r(!0)}}t.$inject=["$q","$timeout","pcApiClient","pcAlert","pcModal"],window.app.component("pcSiteContacts",{bindings:{siteUuid:"<",customerUuid:"<"},templateUrl:"/app/customers/sites/contacts/pcSiteContacts.template.html",controller:t,controllerAs:"vm"})}();
"use strict";!function(){function t(t,e,i,o){function n(){t.history.back()}function r(){e.all([i.get("Groups/"+c.customerUuid),i.get("Groups/"+c.siteUuid)]).then(function(t){c.customer=t[0].data,c.site=t[1].data})["catch"](function(t){o.error({message:"Failed to retrieve customer and/or site",error:t})})}var c=this;c.customer=null,c.site=null,c.back=n,c.$onInit=r}t.$inject=["$window","$q","pcApiClient","pcAlert"],window.app.component("pcSiteHeader",{bindings:{siteUuid:"<",customerUuid:"<"},templateUrl:"/app/customers/sites/layout/pcSiteHeader.template.html",controller:t,controllerAs:"vm"})}();
"use strict";!function(){function e(e,t,i){function r(){e.get(o).then(function(e){n.siteBids=e.data.result})["catch"](function(e){i.error({message:"Failed to retrieve bids",error:e})})["finally"](function(){n.loaded&&n.loaded()})}var n=this;n.$onInit=r;var o="Groups/"+n.siteUuid+"/Bids?$select=id,programName,periodDescription,bidHourDescription,strategyName"}e.$inject=["pcApiClient","$q","pcAlert"],window.app.component("pcSiteBids",{bindings:{siteUuid:"<",loaded:"&?"},templateUrl:"/app/customers/sites/summary/pcSiteBids.template.html",controller:e,controllerAs:"vm"})}();
"use strict";!function(){function t(t,i){function n(){return s.working=!0,t.post("in"===s.which?"Groups/"+s.siteUuid+"/OptIn":"Groups/"+s.siteUuid+"/OptOut")}function e(){s.working=!1,i.success({message:"All equipment has been opted "+s.which})}function o(){s.working=!1}var s=this;s.click=n,s.finished=e,s.error=o}t.$inject=["pcApiClient","pcAlert"],window.app.component("pcSiteOptButton",{bindings:{which:"@",siteUuid:"<"},templateUrl:"/app/customers/sites/summary/pcSiteOptButton.template.html",controller:t,controllerAs:"vm"})}();
"use strict";!function(){function t(t,e){function i(){t.get(n).then(function(t){o.siteHistory=t.data.result})["catch"](function(t){e.error({message:"Failed to retrieve reduction history",error:t})})["finally"](function(){o.loaded&&o.loaded()})}var o=this;o.$onInit=i;var n="Groups/"+o.siteUuid+"/ReductionHistory?$select=uuid,eventType,programName,startDateUtc,endDateUtc"}t.$inject=["pcApiClient","pcAlert"],window.app.component("pcSiteReductionHistory",{bindings:{siteUuid:"<",loaded:"&?"},templateUrl:"/app/customers/sites/summary/pcSiteReductionHistory.template.html",controller:t,controllerAs:"vm"})}();
"use strict";!function(){function t(t,e,i){function a(){t.all([e.get(s),e.get(r)]).then(function(t){n.site=t[0].data,n.strategies=t[1].data.result})["catch"](function(t){i.error({message:"Failed to retrieve site related data",error:t})})["finally"](function(){n.loaded&&n.loaded()})}var n=this,s="Groups/"+n.siteUuid+"?$select=uuid,name&$expand=tags",r="Groups/"+n.siteUuid+"/Strategies";n.$onInit=a}t.$inject=["$q","pcApiClient","pcAlert"],window.app.component("pcSiteStrategies",{bindings:{siteUuid:"<",loaded:"&?"},templateUrl:"/app/customers/sites/summary/pcSiteStrategies.template.html",controller:t,controllerAs:"vm"})}();
"use strict";!function(){function e(e,t,i,s){function d(){t.all([e.get(f),e.get(l)]).then(function(e){c.customerName=e[0].data.name,c.site=e[1].data,c.siteAddress=PowerConnect.Address.getAddressFromTags(c.site.tags),a()})["catch"](function(e){i.error({message:"Failed to retrieve site",error:e})})["finally"](function(){c.generalInfoIsLoaded=!0,m()})}function o(){s.open({template:'<pc-add-edit-site-modal modal-instance="$modalInstance" customer-uuid="$modalData.customerUuid"\n                     site-uuid="$modalData.siteUuid">\n                    </pc-add-edit-site-modal>',modalData:{customerUuid:c.customerUuid,siteUuid:c.site.uuid}}).result.then(function(e){angular.extend(c.site,e)})}function a(){var e=PowerConnect.Tags.tagValue(c.site.tags,"tz")||c.defaultTimezone;c.site.localTimeUtc=moment().utc().format("H:mm z"),c.site.localTime=moment().tz(e).format("h:mm a z")}function n(){c.siteBidsIsLoaded=!0,m()}function u(){c.siteReductionHistoryIsLoaded=!0,m()}function r(){c.siteStrategiesIsLoaded=!0,m()}function m(){c.isLoaded=c.generalInfoIsLoaded&&c.siteBidsIsLoaded&&c.siteReductionHistoryIsLoaded&&c.siteStrategiesIsLoaded}var c=this,l="GroupSummaries/"+c.siteUuid+"?$select=uuid,name,type&$expand=metrics,tags",f="Groups/"+c.customerUuid+"?$select=uuid,name";c.generalInfoIsLoaded=!1,c.siteBidsIsLoaded=!1,c.siteReductionHistoryIsLoaded=!1,c.siteStrategiesIsLoaded=!1,c.siteBidsLoaded=n,c.siteReductionHistoryLoaded=u,c.siteStrategiesLoaded=r,c.defaultTimezone=moment.tz.guess(),c.$onInit=d,c.editSite=o}e.$inject=["pcApiClient","$q","pcAlert","pcModal"],window.app.component("pcSiteSummary",{bindings:{siteUuid:"<",customerUuid:"<"},templateUrl:"/app/customers/sites/summary/pcSiteSummary.template.html",controller:e,controllerAs:"vm"})}();
"use strict";angular.module("app").run(["$templateCache",function(t){t.put("/app/groups/pcRecentGroupActivity.template.html",'<div> <pc-empty-section ng-if="!vm.groupActivity.length" icon="icon-section-groups" title="No Activity for this Group"> </pc-empty-section> <div class="activity-summary-row" ng-repeat="groupActivity in vm.groupActivity track by groupActivity.id"> <div class="counter"><div class="counter-label">{{groupActivity.timestampUtc | pcLocalTime:\'D\'}}</div></div> <div class="title"> <label>{{groupActivity.activityType | pcCamelCaseToHuman}}</label> <div class="title-name">{{groupActivity.timestampUtc | pcLocalTime}}</div> </div> <div class="stat-holder large"> <label>{{groupActivity.activityType | pcCamelCaseToHuman}} By</label> <div class="stat-value">{{groupActivity.sourceId}}</div> </div> <div class="stat-holder small"> <label>&nbsp;</label> <div class="stat-value">&nbsp;</div> </div> </div> </div>'),t.put("/app/layout/pcHeader.template.html",'<header ng-if="vm.isVisible()"> <div class="app-logo"> <a ui-sref="{{vm.config.homeRoute}}"><img src="img/noc-logo@2x.png" alt="Murata - Network Operations"></a> </div> <ul class="menu"> <li><a ui-sref="groups.dashboard" ui-sref-active="{\'active\': \'groups\'}">Groups</a></li> <li><a ui-sref="customers.dashboard" ui-sref-active="{\'active\': \'customers\'}">Customers</a></li> <li><a ui-sref="curtailments.dashboard" ui-sref-active="{\'active\': \'curtailments\'}">Curtailments</a></li> </ul> <dropdown-toggle close-on-click="true" pane-align="right" class="menu account"> <toggle class="toggle-item"><a href=""><i class="icon-user"></i></a></toggle> <pane> <ul class="menu vertical"> <li><a ng-click="vm.logout()">Logout</a></li> </ul> </pane> </dropdown-toggle> </header>'),t.put("/app/mapExample/layout.template.html",'<div class="content-holder"> <h1>Mapping examples</h1> <div ui-view></div> </div>'),t.put("/app/mapExample/mapExample.template.html",'<style>.my-map .map {\r\n        height: 500px;\r\n        width: 100%;\r\n    }</style> <div class="row"> <div class="small-8 columns"> <pc-map class="my-map" markers="vm.markers"></pc-map> </div> <div class="small-4 columns"> <div> Search: <input type="text" ng-model="vm.search" pc-address-autocomplete="vm.searchAddressObject" bias-on-users-location="true"><br> <span>Search term: {{vm.search}}</span><br> <span>Search object: {{vm.searchAddressObject}}</span> </div> <hr> <div> Geocode address: <input type="text" ng-model="vm.geocodeAddress"> <button class="button" ng-click="vm.geocode()">Geocode</button> <span>{{vm.position}}</span> <span>{{vm.geocodeResult}}</span> </div> </div> </div> <div class="row"> <div class="small-8 columns"> <pc-map class="my-map" markers="vm.markers"></pc-map> </div> </div>'),t.put("/app/security/pcForgotPasswordForm.template.html",'<form name="vm.form" ng-submit="vm.form.$valid && vm.submit()"> <section class="account-form"> <div class="row"> <div class="medium-6 medium-centered large-5 large-centered columns text-center"> <img src="img/noc-logo@2x.png" class="account-logo"> <div ng-show="vm.error != null" class="alert callout" data-closable> {{vm.error}} </div> <section ng-if="vm.submitted"> <div class="message-box"> If there is an account associated with the email you provided, you will receive an email shortly. Please check you junk folder if you do not receive it. </div> </section> <section ng-if="!vm.submitted"> <div class="message-box"> Enter your email address below and if we find an account linked to that email, we will send you a link to reset your password </div> <input type="text" name="email" placeholder="Email" ng-model="vm.email" required> <p> <button class="button" type="submit" pc-busy-button="vm.submitting"> {{vm.buttonText}} </button> </p> </section> <p class="forgot-password text-center"><a ui-sref="login">Back to Login?</a></p> </div> </div> </section> </form>'),t.put("/app/security/pcLoginForm.template.html",'<form name="vm.form" ng-submit="vm.form.$valid && vm.submit()"> <section class="account-form"> <div class="row"> <div class="medium-6 medium-centered large-4 large-centered columns text-center"> <img src="img/noc-logo@2x.png" class="account-logo"> <div ng-show="vm.error" class="alert callout" data-closable> {{vm.error}} </div> <div class="label-animation" ng-class="{\'focused\': emailFocus, \'touched\': vm.form.email.$viewValue }"> <label for="email">Email</label> <input type="text" name="email" ng-model="vm.username" ng-focus="emailFocus = true" ng-blur="emailFocus = false" required> </div> <div class="label-animation" ng-class="{\'focused\': passwordFocus, \'touched\': vm.form.password.$viewValue }"> <label for="password">Password</label> <input ng-focus="passwordFocus = true" ng-blur="passwordFocus = false" type="password" name="password" ng-model="vm.password" required> </div> <input id="remember-login" type="checkbox" ng-model="vm.rememberMe"><label for="remember-login">Remember Login?</label> <p> <button class="button login" type="submit" pc-busy-button="vm.loggingIn"> {{vm.loginText}} </button> </p> <p class="forgot-password text-center"><a ui-sref="forgotPassword">Forgot your password?</a></p> </div> </div> </section> </form>'),t.put("/app/security/pcResetPasswordForm.template.html",'<form name="vm.form" ng-submit="vm.form.$valid && vm.submit()"> <section class="account-form"> <div class="row"> <div class="medium-6 medium-centered large-5 large-centered columns text-center"> <img src="img/noc-logo@2x.png" class="account-logo"> <div ng-show="vm.error" class="alert callout" data-closable> {{vm.error}} </div> <div ng-show="vm.form.password_again.$touched && vm.form.password_again.$invalid" class="alert callout" data-closable> Passwords do not match </div> <div class="message-box">Please enter a new password for account {{vm.username}}.</div> <input type="password" name="password" placeholder="New Password" ng-model="vm.password" required> <input type="password" name="password_again" placeholder="Password Again" ng-model="vm.confirmPassword" required pc-compare-to="vm.password"> <p> <button class="button" type="submit" pc-busy-button="vm.submitting"> {{vm.buttonText}} </button> </p> <p class="forgot-password text-center"> <a ui-sref="login">Back to Login?</a> </p> </div> </div> </section> </form>'),t.put("/app/shared/pcConfirmButton.template.html",'<button ng-click="vm.click()" class="{{vm.buttonClass}}" ng-class="vm.buttonNgClass" pc-busy-button="vm.working"> <ng-transclude></ng-transclude> </button>'),t.put("/app/shared/pcDropdown.template.html",'<div class="pc-select-dropdown"> <input type="text" ng-model="vm.model" ng-attr-name="{{vm.name}}" ng-required="vm.required" style="display: none"> <button class="select" ng-class="{\'required\': vm.required}" type="button" ng-click="vm.showMenu = !vm.showMenu; $event.stopPropagation();"> {{vm.selectedDisplay}} </button> <div class="select-options" ng-show="vm.showMenu"> <a ng-repeat="option in vm.options track by option.value" ng-click="vm.select(option)"> {{option.display}} </a> </div> </div>'),t.put("/app/shared/pcEmptySection.template.html",'<div class="row"> <div class="small-12 columns"> <div class="blank-frame text-center"> <i ng-class="vm.icon"></i> <h2>{{vm.title}}</h2> <p>{{vm.description}}</p> <div class="add-first" ng-if="vm.addText"> <a ng-click="vm.onAdd()">{{vm.addText}}</a> </div> </div> </div> </div>'),t.put("/app/shared/pcMap.template.html",'<div id="map" class="map"> </div>'),t.put("/app/shared/pcStatusArcs.template.html",'<div class="arcs" ng-class="{\'expanded row status-row\': vm.isHorizontal, \'text-center\': !vm.isHorizontal}"> <div class="columns arc" ng-class="{\'small-3\': vm.isHorizontal, \'small-8 small-offset-2\': !vm.isHorizontal}"> <progress-arc size="75" stroke="#d63e35" stroke-width="2" complete="(vm.metrics.devicesOffline | pcAsPercentageOf:vm.metrics.totalEnumeratedDevices)" counter-clockwise="false" background="#555555" text-value="{{vm.metrics.devicesOffline || 0}}" text-status="offline" text-name="Devices"> </progress-arc> <p>Devices</p> </div> <div class="columns arc" ng-class="{\'small-3\': vm.isHorizontal, \'small-8 small-offset-2\': !vm.isHorizontal}"> <progress-arc size="75" stroke="#d63e35" stroke-width="2" complete="(vm.metrics.thingsIsolated | pcAsPercentageOf:vm.metrics.totalEnumeratedThings)" counter-clockwise="false" background="#555555" text-value="{{vm.metrics.thingsIsolated || 0}}" text-status="isolated" text-name="ATS"> </progress-arc> <p>ATS</p> </div> <div class="columns arc" ng-class="{\'small-3\': vm.isHorizontal, \'small-8 small-offset-2\': !vm.isHorizontal}"> <progress-arc size="75" stroke="#d63e35" stroke-width="2" complete="(vm.metrics.thingsOffline | pcAsPercentageOf:vm.metrics.totalEnumeratedThings)" counter-clockwise="false" background="#555555" text-value="{{vm.metrics.thingsOffline || 0}}" text-status="offline" text-name="Equipment"> </progress-arc> <p>Equipment</p> </div> <div class="columns arc" ng-class="{\'small-3\': vm.isHorizontal, \'small-8 small-offset-2\': !vm.isHorizontal}"> <progress-arc size="75" stroke="#d63e35" stroke-width="2" complete="(vm.metrics.thingsOptedOut | pcAsPercentageOf:vm.metrics.totalEnumeratedThings)" counter-clockwise="false" background="#555555" text-value="{{vm.metrics.thingsOptedOut || 0}}" text-status="opted out" text-name="Equipment"> </progress-arc> <p>Equipment</p> </div> <div class="small-8"></div> </div>'),t.put("/app/shared/pcTagSelector.template.html",'<div class="tag-control"> <ui-select multiple="multiple" tagging="vm.transformTagToObject" tagging-label="" ng-model="vm.displayedTags" title="Enter tags" pc-ui-select-controller-locator on-select="vm.tagEntered($item)" on-remove="vm.tagRemoved($item)" ng-attr-autofocus="{{vm.autofocus}}"> <ui-select-match placeholder="{{vm.placeholder}}">{{vm.formatTag($item)}}</ui-select-match> <ui-select-choices refresh="vm.searchTags($select.search)" refresh-delay="500" minimum-input-length="2" repeat="tag in vm.filteredTags"> {{tag.name}} </ui-select-choices> </ui-select> <i class="{{vm.icon}} tag"></i> <a href="" ng-if="vm.showList" ng-click="vm.toggleTagList();"><i class="icon-bullets finder"></i></a> <div class="tag-list" id="tag-list" ng-if="vm.showTagList" pc-on-lost-focus="vm.hideTagList()"> <ul> <li ng-repeat="tag in vm.allTags"> <a href="" ng-click="vm.addTag(tag)">{{tag.name}}</a> </li> </ul> </div> </div> <div class="field-warning" ng-if="!vm.allTagsValid">Not a valid tag</div>'),t.put("/app/shared/pcTextSearch.template.html",'<form name="vm.form"> <div class="input-group search"> <input type="search" class="search-input input-group-field" name="Text_Search" placeholder="Search" ng-model="vm.searchText" ng-model-options="vm.modelOptions"> <span class="input-group-label search-icon-label" ng-click="vm.search()"> <i class="search-icon icon-search"></i> </span> </div> </form>'),t.put("/app/shared/pcTimeTicker.template.html","<span> {{vm.timeDisplay}} </span>"),t.put("/app/commonScripts/form/messages.template.html",'<span ng-message="required">This field is required.</span> <span ng-message="minlength">This field is too short.</span> <span ng-message="maxlength">This field is too long.</span> <span ng-message="email">This field must be a valid E-mail.</span>'),t.put("/app/commonScripts/overlays/pcPanelLoad.template.html",'<div class="loader"> <pc-spinner class="spinner" message="vm.message" ng-show="vm.showLoading"> </pc-spinner> <div class="loaded-content" ng-show="!vm.showLoading"> <ng-transclude></ng-transclude> <div> </div></div></div>'),t.put("/app/commonScripts/overlays/pcSpinner.template.html",'<div id="loading-overlay" class="text-center"> <img src="img/loading-dark.gif" class="loading-spinner"> <h3>{{vm.message}}</h3> </div>'),t.put("/app/commonScripts/utils/pcToast.template.html",'<div id="toast-messages"> <div ng-repeat="toast in vm.toasts" class="toast-message" ng-class="{\'error\': toast.error, \'success\': toast.success}"> {{toast.message}} <div class="toast-closer" ng-click="vm.close(toast)"> <i class="icon-close"></i> </div> </div> </div>'),t.put("/app/curtailments/dashboard/pcCurtailmentDashboard.template.html",'<pc-panel-load is-loaded="vm.isLoaded"> <div class="content-holder"> <section class="title-bar"> <div class="row"> <div class="small-12 columns"> <h1>Curtailments</h1> <div class="counter">{{vm.programs.length}}</div> </div> </div> </section> <section class="cards"> <pc-empty-section ng-if="!vm.programs.length" icon="icon-section-curtailment" title="No Programs for this Account" description="There are no programs defined."> </pc-empty-section> <div class="row"> <div class="small-12 columns"> <div class="expanded row"> <div class="small-6 large-4 columns" ng-repeat="program in vm.programs track by program.id"> <pc-program-card program="program"></pc-program-card> </div> </div> </div> </div> </section> </div> </pc-panel-load>'),t.put("/app/curtailments/dashboard/pcProgramCard.template.html",'<div class="card"> <div class="title-row" ng-click="vm.showDetails()"> <div class="name">{{vm.program.name}}</div> <div class="message">{{vm.program.isoName}}</div> </div> <pc-status-arcs metrics="vm.program.metrics" is-horizontal="true"></pc-status-arcs> <div class="bottom-row"> <div class="expanded row large-collapse"> <div class="small-11 columns stopped"> <span ng-if="!vm.program.startDateUtc">Never active</span> <span ng-if="vm.program.startDateUtc"> <span ng-if="vm.program.isRunning"> Currently running for </span> <span ng-if="!vm.program.isRunning"> Last active on {{vm.program.startDateUtc | pcLocalTime}}. Ran for </span> <pc-time-ticker time-from="vm.program.startDateUtc" incoming-time-format="YYYY-M-DZh:m:s.0" end-time="vm.program.endDateUtc"> </pc-time-ticker>. </span> </div> </div> </div> </div>'),t.put("/app/curtailments/layout/layout.template.html",'<nav class="sidebar"> <ul> <li><a ui-sref="curtailments.summary({programId: vm.programId})" ui-sref-active="active"><i class="icon-summary"></i> Summary</a></li> </ul> </nav> <div class="content-holder sidebar-pad"> <div class="row"> <div class="small-10"> <div ui-view></div> </div> <div class="small-2"> <pc-program-summary program-id="vm.programId"></pc-program-summary> </div> </div> </div>'),t.put("/app/curtailments/layout/pcProgramCurtailmentStatus.template.html",'<div class="text-center"> <div class="columns"> <p>START TIME</p> </div> <span class="value"> <h2>{{vm.programSummary.startDateUtc | pcLocalTime:\'MM/DD/YY, h:mm a z\'}}</h2> </span> <div class="columns"> <p>DURATION</p> </div> <span class="value"> <pc-time-ticker time-from="vm.programSummary.startDateUtc" incoming-time-format="YYYY-MM-DDTHH:mm:ss.sss"> </pc-time-ticker> </span> </div>'),t.put("/app/curtailments/layout/pcProgramSummary.template.html",'<section ng-if="vm.programSummary"> <div class="row" ng-if="vm.programSummary.isRunning"> <pc-program-curtailment-status program-summary="vm.programSummary"></pc-program-curtailment-status> </div> <div class="row"> <pc-status-arcs metrics="vm.programSummary.metrics" is-horizontal="false"></pc-status-arcs> </div> </section>'),t.put("/app/curtailments/summary/pcCurtailmentSummary.template.html",'<pc-panel-load is-loaded="vm.isLoaded"> <section class="title-bar"> <div class="row"> <div class="small-10"> Program Header {{vm.programId}} </div> </div> </section> <section> <div class="row"> <div class="small-10"> Stuff </div> </div> </section> </pc-panel-load>'),t.put("/app/customers/addEdit/pcAddEditCustomerModal.template.html",'<div class="overlay-content form" ng-show="!vm.isDeleting"> <div class="row"> <div class="small-12 columns"> <h1>{{vm.isInAddMode ? \'Add\' : \'Edit\'}} Customer</h1> </div> </div> <div ng-show="vm.error" class="alert callout" data-closable> There was a problem with your request. Please try again. </div> <form name="vm.form" ng-submit="vm.form.$valid && vm.submit()" novalidate> <fieldset ng-disabled="vm.isSaving"> <div class="row"> <div class="small-12 columns" pc-validate> <label>Customer Name</label> <input type="text" name="name" ng-model="vm.customer.name" required autofocus> </div> <div class="small-12 columns"> <label>SkySpark Project Name</label> <input type="text" name="skySparkProjectName" ng-model="vm.customer.skySparkProjectName"> </div> <div class="small-12 columns" pc-validate> <label>VirtuWatt Username</label> <input type="text" name="virtuWattUsername" ng-model="vm.customer.virtuWattUsername" ng-required="vm.customer.virtuWattUsername || vm.customer.virtuWattPassword"> </div> <div class="small-12 columns" pc-validate> <label>VirtuWatt Password</label> <input type="text" name="virtuWattPassword" ng-model="vm.customer.virtuWattPassword" ng-required="vm.customer.virtuWattUsername || vm.customer.virtuWattPassword"> </div> <div class="small-12 columns"> <button class="hollow button" type="submit" pc-busy-button="vm.isSaving"> <span ng-if="!vm.isSaving">{{vm.isInAddMode ? \'Add\' : \'Save\'}} Customer</span> <span ng-if="vm.isSaving">Saving</span> </button> </div> </div> </fieldset> </form> </div> <button class="close-button" aria-label="Close reveal" type="button" ng-click="vm.close()"><i class="icon-close"></i></button>'),t.put("/app/customers/dashboard/pcCustomerDashboard.template.html",'<pc-panel-load is-loaded="vm.isLoaded"> <div class="content-holder"> <section class="title-bar"> <div class="left"> <h1>Customers</h1> <div class="counter">{{vm.totalCustomers}}</div> </div> <div class="float-right"> <button class="hollow button float-right" href="" ng-click="vm.showAddCustomerModal()">Add Customer</button> </div> <pc-text-search class="float-right" to-lower="true" callback="vm.search($text)"> </pc-text-search> </section> <section ng-if="vm.totalCustomers == 0"> <pc-empty-section icon="icon-section-customers" title="No customers defined" entity="Customers" on-add="vm.showAddCustomerModal()" add-text="click here to add a customer" description="A customer is a specialized group used to group sites, devices, and contacts to together along with feature specific items such as VirtuWatt username and password."> </pc-empty-section> </section> <section ng-if="vm.totalCustomers > 0"> <div class="row small-collapse" infinite-scroll="vm.nextPage()" infinite-scroll-disabled="vm.isBusy"> <div class="small-12"> <table> <thead> <tr> <th>Name</th> <th>Status</th> <th>Equipment Opt Status</th> <th width="100"></th> </tr> </thead> <tbody class="clickable-rows"> <tr ng-repeat="customer in vm.customers | orderBy: \'name\' track by customer.uuid" height="50" ui-sref="customers.summary({uuid: customer.uuid})"> <td>{{customer.name}}</td> <td>{{vm.deviceStatus(customer)}}</td> <td>{{vm.equipmentOutStatus(customer)}}</td> <td class="text-right"> > </td> </tr> </tbody> </table> </div> </div> </section> </div> </pc-panel-load>'),t.put("/app/customers/summary/pcCustomerSummary.template.html",'<div class="content-holder"> <div class="row"> <div class="small-8"> <section class="customer-summary-map"> <pc-map markers="vm.markers"></pc-map> </section> </div> <div class="small-4"> <div class="sites"> <pc-panel-load is-loaded="vm.isLoaded"> <section class="title-bar"> <div> <h1 class="small"> {{vm.customer.name}} </h1> <div class="counter"> {{vm.siteCount}} </div> <div class="edit-action"> <i class="icon-edit" ng-click="vm.editCustomer()"></i> </div> </div> </section> <section> <div class="site-list"> <div class="sites-banner"> List of Sites </div> <div class="site clearfix" ng-repeat="site in vm.sites track by site.uuid" ui-sref="customers.sites.summary({siteUuid: site.uuid})"> <div class="marker"> {{site.siteMapNumber}} </div> <div class="info"> <span class="site-name">{{site.name}}</span><br> <span class="site-address">{{vm.getSiteAddress(site)}}</span> </div> <div class="arrow"> <i class="icon-arrow-right"></i> </div> <div class="clearfix"></div> </div> </div> <button class="button hollow" ng-click="vm.addSite()">Add Site</button> </section> </pc-panel-load> </div> </div> </div> </div>'),t.put("/app/groups/activation/pcGroupActivation.template.html","<pc-confirm-button ng-show=\"vm.group\" button-class=\"hollow button\" button-ng-class=\"{'alert': vm.isGroupActive, 'micro': vm.micro}\" message=\"'Are you sure you want to ' + (vm.isGroupActive ? 'Deactivate' : 'Activate') + (vm.strategy ? ' strategy \\'' + vm.strategy.name + '\\' on' : '') + ' ' + vm.group.name + '?'\" yes-text=\"(vm.isGroupActive ? 'Deactivate' : 'Activate')\" confirm-title=\"(vm.isGroupActive ? 'Deactivate' : 'Activate')\" action=\"vm.toggleGroupActivation()\" finished=\"vm.finished()\" error=\"vm.error()\"> <span ng-if=\"vm.isGroupActive\"> {{vm.deactivating ? 'Deactivating...' : vm.activeText}} </span> <span ng-if=\"!vm.isGroupActive\"> {{vm.activating ? 'Activating...' : vm.inactiveText}} </span> </pc-confirm-button>"),t.put("/app/groups/activation/pcThingActivation.template.html",'<pc-confirm-button ng-show="vm.thing && vm.isOptedIn()" button-class="hollow button micro" button-ng-class="{\'alert\': vm.isActive}" message="\'Are you sure you want to \' + (vm.isActive ? \'Deactivate\' : \'Activate\') + \' \' + vm.thing.name + \'?\'" yes-text="(vm.isActive ? \'Deactivate\' : \'Activate\')" confirm-title="(vm.isActive ? \'Deactivate\' : \'Activate\')" action="vm.toggleActivation()" finished="vm.finished()" error="vm.error()"> <span ng-if="vm.isActive"> {{vm.deactivating ? "Stopping..." : "Stop"}} </span> <span ng-if="!vm.isActive"> {{vm.activating ? "Starting..." : "Start"}} </span> </pc-confirm-button> <button ng-if="!vm.isOptedIn()" class="hollow button micro disabled">Opted Out</button>'),t.put("/app/groups/activity/pcGroupActivity.template.html",'<pc-panel-load is-loaded="vm.isLoaded"> <section class="title-bar"> <div class="row"> <div> <pc-group-header group-uuid="vm.groupUuid"></pc-group-header> </div> <div class="small-2 columns"> <label>Start Date</label> <input placeholder="Pick a date" type="text" datepicker format="MM/dd/yyyy" ng-model="vm.filter.startDate" name="startDate"> </div> <div class="small-2 columns"> <label>End Date</label> <input placeholder="Pick a date" type="text" datepicker format="MM/dd/yyyy" ng-model="vm.filter.endDate" name="endDate"> </div> <div class="small-2 columns"> <label>Type</label> <pc-dropdown ng-model="vm.filter.activityType" options="vm.activityTypes" name="activityType"> </pc-dropdown> </div> <div class="small-2 columns"> <label>&nbsp;</label> <button ng-disabled="vm.isFiltering" ng-click="vm.applyFilter()" class="hollow button" type="button"> Filter </button> </div> </div> </section> <section> <pc-empty-section ng-if="!vm.groupActivity.length" icon="icon-list" title="{{vm.filterString ? \'No Activity matches your filter\' : \'No Activity for this Group\'}}"> </pc-empty-section> <div ng-if="vm.groupActivity.length" class="row small-collapse"> <div class="small-12 columns"> <div class="timeline"> <div ng-repeat="day in vm.groupActivity track by day.date"> <h3 class="day" ng-class="{first: $index === 0}">{{vm.getDateLabel(day.date)}}</h3> <div class="vertical-bar"></div> <div ng-repeat="entry in day.logs | orderBy:\'-timestampUtc\' track by entry.id" class="log-item"> <div class="dot"></div> <div class="timestamp">{{entry.timestampUtc | pcLocalTime:\'H:MM a\'}}</div> <div class="details-frame"> <div class="event-details" ng-class="{\'success\': vm.isActivationEntry(entry.activityType), \'fail\': vm.isDeactivationEntry(entry.activityType)}"> <div class="title">{{vm.formatEntryType(entry.activityType)}}</div> <div class="details">{{entry.sourceId || \'unknown\'}}<br>Source: {{entry.source}}</div> </div> <div class="event-description">{{entry.description}}</div> </div> </div> </div> </div> </div> </div> </section> </pc-panel-load>'),t.put("/app/groups/addEdit/pcAddEditGroupModal.template.html",'<div class="overlay-content form" ng-hide="vm.isDeleting"> <div class="row"> <div class="small-12 columns"> <h1>{{vm.isInAddMode ? \'Add\' : \'Edit\'}} Group</h1> </div> </div> <div ng-show="vm.error" class="alert callout" data-closable> There was a problem with your request. Please try again. </div> <form name="vm.form" ng-submit="vm.form.$valid && vm.submit()" novalidate> <fieldset ng-disabled="vm.isSaving"> <div class="row"> <div class="small-12 columns" pc-validate> <label>Name of Group <input type="text" name="name" ng-model="vm.group.name" required autofocus> </label> </div> <div class="small-12 columns"> <label>Group Description <input type="text" name="description" ng-model="vm.group.description"> </label> </div> <div class="small-12 columns"> <label>Group Tags</label> <pc-tag-selector placeholder="Select Tags..." ng-model="vm.group.tags"></pc-tag-selector> </div> <div class="small-12 columns"> <label>Make Group Private?</label> <div class="switch"> <input class="switch-input" id="formSwitch" type="checkbox" name="formSwitch" ng-model="vm.group.isPrivate"> <label class="switch-paddle" for="formSwitch"> <span class="show-for-sr">Group is Private</span> <span class="switch-active" aria-hidden="true">Yes</span> <span class="switch-inactive" aria-hidden="true">No</span> </label> </div> </div> <div class="columns" ng-class="{\'small-6\': !vm.isInAddMode, \'small-12\': vm.isInAddMode}"> <button class="hollow button" type="submit" pc-busy-button="vm.isSaving"> <span ng-if="!vm.isSaving">{{vm.isInAddMode ? \'Add\' : \'Save\'}} Group</span> <span ng-if="vm.isSaving">Saving</span> </button> </div> <div class="small-6 columns text-right" ng-if="!vm.isInAddMode && !vm.hideRemove"> <div tabindex="0" aria-haspopup="true" aria-controls="remove-group" class="hollow button alert" data-toggle="remove-group" ng-click="vm.isDeleting = true"> Remove </div> </div> </div> </fieldset> </form> </div> <div class="overlay-content text-center animate-fade" ng-if="vm.isDeleting"> <form name="vm.form" ng-submit="vm.form.$valid && vm.removeGroup()"> <fieldset ng-disabled="vm.isSaving"> <div class="row"> <div class="small-12 columns"> <h1>Are you sure you want to remove {{vm.group.name}}?</h1> <p> This action CANNOT be undone. This will permanently remove this group and all information associated with it. </p> <p>Type the name of this group to confirm its deletion.</p> <div class="confirm-delete"> <input ng-model="vm.deleteAll" type="checkbox" id="deleteAll"> Check this box to delete the group and all members of this group </div> </div> </div> <div class="small-12 columns"> <alert type="\'alert\'" ng-if="vm.error" class="callout" close="vm.error = null"> {{vm.error}} </alert> <input type="text" ng-model="vm.groupNameConfirm" required name="groupNameConfirm" pc-compare-to="vm.group.name" ignore-case="true" ng-class="{\'failed\' : (vm.form.groupNameConfirm.$touched || vm.form.submitted) && !vm.form.groupNameConfirm.$valid}" autofocus> </div> <div class="small-12 columns"> <button class="hollow button alert" type="button" ng-click="vm.removeGroup()" ng-disabled="!vm.form.$valid" pc-busy-button="vm.isBusyDeleting"> Confirm Group Deletion </button> </div> </fieldset> </form> </div> <button class="close-button" aria-label="Close reveal" type="button" ng-click="vm.close()"><i class="icon-close"></i></button>'),t.put("/app/groups/dashboard/pcGroupCard.template.html",'<div class="card" ng-class="{double: vm.group.metrics.totalChildGroups > 0}"> <div class="title-row" ng-click="vm.showDetails()"> <div class="name">{{vm.group.name}}</div> <div class="message">{{vm.group.type}}</div> </div> <pc-status-arcs metrics="vm.group.metrics" is-horizontal="true"></pc-status-arcs> <div class="bottom-row"> <div class="expanded row large-collapse"> <div ng-if="!vm.group.startedAtUtc" class="small-11 columns stopped"> <span ng-if="!(vm.group.tags|pcTagValue:\'lastActiveUtc\')">Never active</span> <span ng-if="(vm.group.tags|pcTagValue:\'lastActiveUtc\')">Last active on {{vm.group.tags | pcTagValue:\'lastActiveUtc\' | pcLocalTime}}</span> </div> <div ng-if="(vm.group.tags|pcTagValue:\'startedAtUtc\')" class="small-11 columns stopped"> Currently running for <pc-time-ticker time-from="(vm.group.tags|pcTagValue:\'startedAtUtc\')"></pc-time-ticker> </div> <div class="small-1 columns text-right"><i class="icon-edit" ng-click="vm.showEditModal()"></i></div> </div> </div> </div>'),t.put("/app/groups/dashboard/pcGroupDashboard.template.html",'<pc-panel-load is-loaded="vm.isLoaded"> <div class="content-holder"> <section class="title-bar"> <div class="row"> <div class="small-8 columns"> <h1>Groups</h1> <div class="counter">{{vm.groups.length}}</div> </div> <div class="small-4 columns"> <button class="hollow button float-right" href="" ng-click="vm.showAddGroupModal()">Add Group</button> </div> </div> </section> <section class="cards"> <pc-empty-section ng-if="!vm.groups.length" icon="icon-section-groups" title="No Groups for this Account" add-text="Click here to add the first Group" on-add="vm.showAddGroupModal()" description="Groups allow you to select customers, sites, zones, and nodes and put them together in one container. This allows you to see grouped stats, reports, and start events across a group of items."> </pc-empty-section> <div class="row"> <div class="small-12 columns"> <div class="expanded row"> <div class="small-6 large-4 columns" ng-repeat="group in vm.groups track by group.uuid"> <pc-group-card group="group"></pc-group-card> </div> </div> </div> </div> </section> </div> </pc-panel-load>'),t.put("/app/groups/layout/layout.template.html",'<nav class="sidebar"> <ul> <li><a ui-sref="groups.summary({uuid: vm.groupUuid})" ui-sref-active="active"><i class="icon-summary"></i> Summary</a></li> <li><a ui-sref="groups.membership({uuid: vm.groupUuid})" ui-sref-active="active"><i class="icon-member-card"></i> Membership</a></li> <li><a ui-sref="groups.activity({uuid: vm.groupUuid})" ui-sref-active="active"><i class="icon-list"></i> Activity</a></li> <li><a ui-sref="groups.schedule({uuid: vm.groupUuid})" ui-sref-active="active"><i class="icon-calendar"></i> Schedule</a></li> </ul> </nav> <div class="content-holder sidebar-pad"> <div ui-view></div> </div>'),t.put("/app/groups/layout/pcGroupHeader.template.html",'<h1 class="small" ng-if="vm.group"> {{vm.group.name}} </h1> <div class="counter" ng-if="vm.counter !== undefined"> {{vm.counter}} </div> <div class="edit-action"> <i class="icon-edit" ng-click="vm.showEditModal()"></i> </div> <h2 ng-if="vm.group"> {{vm.group.type}} </h2>'),t.put("/app/groups/membership/pcAddGroupMembershipModal.template.html",'<div class="overlay-content form form-wide tagging"> <h1>Add Members</h1> <form> <pc-tag-selector ng-model="vm.tagsToFilterOn" autofocus="true"> </pc-tag-selector> <section> <pc-membership-add-selector group="vm.group" tags="vm.tagsToFilterOn" type="groups" title="Groups"></pc-membership-add-selector> </section> <section> <pc-membership-add-selector group="vm.group" tags="vm.tagsToFilterOn" type="things" title="Equipment"></pc-membership-add-selector> </section> </form> </div> <button class="close-button" data-close aria-label="Close reveal" type="button" ng-click="vm.modalInstance.close()"><i class="icon-close"></i></button>'),t.put("/app/groups/membership/pcGroupMembership.template.html",'<pc-panel-load is-loaded="vm.isLoaded"> <section class="title-bar"> <div class="row small-collapse2"> <div class="small-7"> <pc-group-header group-uuid="vm.groupUuid" counter="vm.getMembershipCount()"></pc-group-header> </div> <div class="small-3 group-finder"> <pc-tag-selector ng-model="vm.tagsToFilterOn" on-tags-changed="vm.onTagsChanged($tags)"></pc-tag-selector> </div> <div class="small-2"> <a data-toggle="add-members-overlay" ng-click="vm.addMembers()"> <button class="hollow button float-right">Add Members</button> </a> </div> </div> </section> <section ng-if="!vm.getMembershipCount()"> <pc-empty-section icon="icon-section-groups" title="No memberships for this group" entity="Membership" on-add="vm.showAddMemberModal()" description="Groups allow you to select customers, sites, zones, and nodes and put them together in one container. This allows you to see grouped stats, reports, and start events across a group of items."> </pc-empty-section> </section> <section ng-if="vm.group.groups.length"> <div class="row small-collapse"> <div class="small-8 columns"> <h3>Groups</h3> </div> <div class="small-4 columns text-right"> <pc-membership-edit-buttons group-uuid="vm.groupUuid" edit-mode="vm.editingGroups" collection="vm.group.groups" type="group"> </pc-membership-edit-buttons> </div> <div class="small-12"> <table> <thead> <tr> <th>Name</th> <th>Tags</th> <th width="300"></th> </tr> </thead> <tbody> <tr ng-repeat="group in vm.group.groups track by group.uuid" height="50"> <td>{{group.name}}</td> <td>{{group.tags | pcArrayColumnToString}}</td> <td class="text-right" ng-if="!vm.editingGroups"> <a ng-href="#/groups/{{group.uuid}}/summary"><button class="hollow button micro">View</button></a> <pc-group-activation group="group" micro="true"></pc-group-activation> </td> <td class="text-right" ng-if="vm.editingGroups" width="150"> <input type="checkbox" ng-model="group.remove"> </td> </tr> </tbody> </table> </div> </div> </section> <section ng-if="vm.group.things.length"> <div class="row small-collapse"> <div class="small-8 columns"> <h3>Equipment</h3> </div> <div class="small-4 columns text-right"> <pc-membership-edit-buttons group-uuid="vm.groupUuid" edit-mode="vm.editingThings" collection="vm.group.things" type="thing"> </pc-membership-edit-buttons> </div> <div class="small-12"> <table> <thead> <tr> <th>Name</th> <th>Group Name</th> <th>Tags</th> <th width="300"></th> </tr> </thead> <tbody> <tr ng-repeat="thing in vm.group.things track by thing.uuid" height="50"> <td>{{thing.name}}</td> <td>{{thing.groups | pcArrayColumnToString: \'name\':\'name\'}}</td> <td>{{thing.tags | pcArrayColumnToString}}</td> <td class="text-right" ng-if="!vm.editingThings"> <a ng-hide="true" href=""><button class="hollow button micro">View</button></a> <pc-thing-activation thing="thing"></pc-thing-activation> </td> <td class="text-right" ng-if="vm.editingThings"> <input type="checkbox" ng-model="thing.remove"> </td> </tr> </tbody> </table> </div> </div> </section> </pc-panel-load>'),
t.put("/app/groups/membership/pcMembershipAddSelector.template.html",'<div class="row small-collapse" ng-if="vm.items.length"> <div class="small-8 columns"> <h3>{{vm.title}}</h3> </div> <div class="small-4 columns table-actions"> <button class="hollow button micro float-right" ng-click="vm.addSelected()">Add Selected</button> <button class="hollow button micro secondary float-right" ng-click="vm.selectAll()">Select All</button> </div> <div class="small-12"> <table class="hover"> <thead> <tr> <th>Name</th> <th>Tags</th> <th></th> </tr> </thead> <tbody> <tr ng-repeat="item in vm.items track by item.uuid"> <td>{{item.name}}</td> <td>{{item.tags | pcArrayColumnToString}}</td> <td class="text-right"> <input ng-model="item.selected" type="checkbox" id="item_selection"> <label for="item_selection"></label> </td> </tr> </tbody> </table> </div> </div>'),t.put("/app/groups/membership/pcMembershipEditButtons.template.html",'<div ng-if="!vm.editMode"> <button class="hollow button micro" ng-click="vm.editMode = true">Edit</button> </div> <div ng-if="vm.editMode"> <button class="hollow button micro alert" ng-click="vm.removeSelected()">Remove Selected</button> <button class="hollow button micro secondary" ng-click="vm.selectAll()"> {{vm.allSelected(vm.group.groups) ? \'Unselect\' : \'Select\'}} All </button> <button class="hollow button micro" ng-click="vm.done()">Done</button> </div>'),t.put("/app/groups/schedule/pcAddEditGroupScheduleModal.template.html",'<div class="overlay-content form" ng-show="!vm.isDeleting"> <div class="row"> <div class="small-12 columns"> <h1>{{vm.isInAddMode ? \'Add\' : \'Edit\'}} Schedule</h1> </div> </div> <div ng-show="vm.error" class="alert callout" data-closable> {{vm.error}} </div> <form name="vm.form" ng-submit="vm.form.$valid && vm.submit()" novalidate> <fieldset ng-disabled="vm.isSaving"> <div class="row"> <div class="small-12 columns" pc-validate> <label>Name of Schedule</label> <input type="text" name="name" ng-model="vm.groupSchedule.name" required autofocus> </div> <div class="small-6 columns" pc-validate> <label>Start Date</label> <input placeholder="Pick a date" type="text" datepicker format="MM/dd/yyyy" ng-model="vm.startDate" name="startDate" required> </div> <div class="small-6 columns" pc-validate> <label>Start Time <input type="text" name="startTime" ng-model="vm.startTime" required> </label> </div> <div class="small-6 columns" pc-validate> <label>Duration (Minutes)</label> <pc-dropdown ng-model="vm.groupSchedule.durationMinutes" options="vm.durationValues" form="vm.form" required name="durationMinutes"> </pc-dropdown> </div> <div class="small-6 columns"> <label>Repeat</label> <pc-dropdown ng-model="vm.groupSchedule.recurrence" options="vm.recurrenceValues"> </pc-dropdown> </div> <div class="small-12 columns"> <label>Notifications</label> <div class="switch"> <input class="switch-input" id="notificationSwitch" type="checkbox" name="notificationSwitch" ng-model="vm.groupSchedule.notificationsEnabled"> <label class="switch-paddle" for="notificationSwitch"> <span class="show-for-sr">Show Notifications</span> <span class="switch-active" aria-hidden="true">Yes</span> <span class="switch-inactive" aria-hidden="true">No</span> </label> </div> </div> <div class="small-12 columns"> <label> Send Notifications To: </label> <pc-tag-selector placeholder="Select Recipients..." icon="icon-user" show-list="false" tag-name-regex="^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$" ng-model="vm.notificationRecipientTags"> </pc-tag-selector> </div> <div class="columns" ng-class="{\'small-8\': !vm.isInAddMode, \'small-12\': vm.isInAddMode}"> <button class="hollow button" type="submit" pc-busy-button="vm.isSaving"> <span ng-if="!vm.isSaving">{{vm.isInAddMode ? \'Add\' : \'Save\'}} Schedule</span> <span ng-if="vm.isSaving">Saving</span> </button> </div> <div class="small-4 columns text-right" ng-if="!vm.isInAddMode && !vm.hideRemove"> <button class="hollow button alert" type="button" ng-click="vm.isDeleting = true"> <span>Remove</span> </button> </div> </div> </fieldset> </form> </div> <div class="overlay-content animate-fade" ng-if="vm.isDeleting"> <h1>Delete</h1> <p>Are you sure you want to delete {{vm.groupSchedule.name}}?</p> <button class="button" ng-click="vm.removeGroupSchedule()">Delete</button> <button class="hollow button" ng-click="vm.close()">Cancel</button> </div> <button class="close-button" aria-label="Close reveal" type="button" ng-click="vm.close()"><i class="icon-close"></i></button>'),t.put("/app/groups/schedule/pcGroupSchedules.template.html",'<pc-panel-load is-loaded="vm.isLoaded"> <section class="title-bar"> <div class="row small-collapse"> <div class="small-10"> <pc-group-header group-uuid="vm.groupUuid" counter="vm.groupSchedules.length"></pc-group-header> </div> <div class="small-2 columns"> <button class="hollow button float-right" href="" ng-click="vm.showAddModal()">Add Schedule</button> </div> </div> </section> <section> <div class="row small-collapse"> <div class="small-12 columns"> <pc-empty-section ng-if="!vm.groupSchedules.length" icon="icon-section-groups" title="No Schedules for this Group" add-text="Click here to add the first Schedule" on-add="vm.showAddModal()"> </pc-empty-section> <div class="activity-summary-row schedule" ng-repeat="groupSchedule in vm.groupSchedules | orderBy: \'startDateUtc\' track by groupSchedule.id"> <pc-schedule-row group-schedule="groupSchedule" group-uuid="vm.groupUuid"></pc-schedule-row> </div> </div> </div> </section> </pc-panel-load>'),t.put("/app/groups/schedule/pcScheduleRow.template.html",'<div class="title schedule"> <label>Name</label> <div class="title-name">{{vm.groupSchedule.name}}</div> </div> <div class="stat-holder large"> <label>Start Date</label> <div class="stat-value">{{vm.groupSchedule.startDateUtc | pcLocalTime:\'MMMM Do, YYYY\'}}</div> </div> <div class="stat-holder small"> <label>Start Time</label> <div class="stat-value">{{vm.groupSchedule.startDateUtc | pcLocalTime:\'h:mm a\'}}</div> </div> <div class="stat-holder small"> <label>Duration (Minutes)</label> <div class="stat-value">{{vm.groupSchedule.durationMinutes}}</div> </div> <div class="stat-holder small"> <label>Recurrence</label> <div class="stat-value">{{vm.groupSchedule.recurrence}}</div> </div> <div class="stat-holder"> <label>Notifications?</label> <div class="stat-value">{{vm.groupSchedule.notificationsEnabled ? \'Yes\' : \'No\'}}</div> </div> <div class="stat-holder small text-right"> <label></label> <button class="button hollow micro" ng-click="vm.showEditModal()">Edit</button> </div>'),t.put("/app/groups/summary/pcGroupSignalState.template.html",'<div ng-if="vm.isGroupActive && vm.info"> <div class="row"> <div class="small-4 columns"> <label>Activated</label> <p class="large-text">{{vm.info.startedAt | pcLocalTime:\'dddd, MMMM Do YYYY, h:mm a z\'}}</p> </div> <div class="small-2 columns"> <label>Activated By</label> <p>{{vm.info.lastStartedBy}}</p> </div> </div> <div class="row steps"> <div class="step"> <label>Signal Sent to Equipment</label> <span class="value">{{vm.info.thingsActivated}}/<small>{{vm.info.thingCount}}</small></span> </div> <div class="step"> <label>Equipment Activation</label> <span class="value">{{vm.info.thingsActive}}/<small>{{vm.info.thingCount}}</small></span> </div> <div class="step"> <label>Total Duration</label> <span class="value"> <pc-time-ticker time-from="vm.info.startedAtUtc"></pc-time-ticker> </span> </div> </div> </div>'),t.put("/app/groups/summary/pcGroupSummary.template.html",'<pc-panel-load is-loaded="vm.isLoaded"> <section class="title-bar"> <div class="row"> <div class="small-10"> <pc-group-header group-uuid="vm.groupUuid" counter="vm.group.totalMembershipCount"></pc-group-header> </div> <div class="small-2 text-center no-button-margin"> <pc-group-activation group="vm.group"></pc-group-activation> </div> </div> </section> <section> <div class="row"> <div class="small-10"> <pc-group-signal-state group="vm.group" loaded="vm.signalStateLoaded()"></pc-group-signal-state> <div class="row"> <div class="small-6 columns"> <h3>Recent Activity for this Group</h3> </div> <div ng-if="(vm.group.tags|pcTagValue:\'lastActiveUtc\') || (vm.group.tags|pcTagValue:\'startedAtUtc\')" class="small-6 columns text-right"> Last active on {{((vm.group.tags|pcTagValue:\'lastActiveUtc\')||(vm.group.tags|pcTagValue:\'startedAtUtc\')) | pcLocalTime:\'dddd, MMMM Do YYYY, h:mm a z\'}} </div> </div> <pc-recent-group-activity group-uuid="vm.groupUuid" loaded="vm.activityLoaded()"></pc-recent-group-activity> </div> <div class="small-2"> <pc-status-arcs metrics="vm.group.metrics" is-horizontal="false"></pc-status-arcs> </div> </div> </section> </pc-panel-load>'),t.put("/app/customers/sites/addEdit/pcAddEditSiteModal.template.html",'<pc-panel-load is-loaded="vm.isLoaded"> <div ng-if="vm.isLoaded" class="overlay-content form"> <div class="row"> <div class="small-12 columns"> <h1>{{vm.isInAddMode ? \'Add\' : \'Edit\'}} Site</h1> </div> </div> <div ng-show="vm.error" class="alert callout" data-closable> <span ng-if="vm.errorMsg">{{vm.errorMsg}}</span> <span ng-if="!vm.errorMsg">There was a problem with your request. Please try again.<span> </span></span></div> <form name="vm.form" ng-submit="vm.form.$valid && vm.submit()" novalidate> <fieldset ng-disabled="vm.isSaving"> <div class="row"> <div class="small-12 columns" pc-validate> <label>Site Name</label> <input type="text" name="name" ng-model="vm.site.name" required pc-autofocus> </div> <div class="small-12 columns"> <label>Address Lookup</label> <input type="text" required ng-model="vm.searchAddress" pc-address-autocomplete="vm.geoAddress"> </div> <div class="small-12 columns" pc-validate> <label>Site Type</label> <pc-dropdown ng-model="vm.siteType" options="vm.siteTypes" name="site-type" required="true" form="vm.form"> </pc-dropdown> </div> <div class="small-6 columns" pc-validate> <label>Timezone</label> <pc-dropdown ng-model="vm.timezone" options="vm.timezones" name="site-timezone" required="true" form="vm.form"> </pc-dropdown> </div> <div class="small-6 columns" pc-validate> <label>ISO / RTO</label> <pc-dropdown ng-model="vm.iso" options="vm.isos" name="site-iso" required="true" form="vm.form"> </pc-dropdown> </div> <div class="small-6 columns" ng-repeat="feature in vm.features | orderBy: \'displayName\'"> <label>{{feature.displayName}}</label> <div class="switch"> <input class="switch-input" id="{{feature.name}}" type="checkbox" name="{{feature.name}}" ng-model="feature.isActive"> <label class="switch-paddle" for="{{feature.name}}"> <span class="show-for-sr">{{feature.name}}</span> <span class="switch-active" aria-hidden="true">Yes</span> <span class="switch-inactive" aria-hidden="true">No</span> </label> </div> </div> <div class="small-12 columns"> <button class="hollow button" type="submit" pc-busy-button="vm.isSaving"> <span ng-if="!vm.isSaving">{{vm.isInAddMode ? \'Add\' : \'Save\'}} Site</span> <span ng-if="vm.isSaving">Saving</span> </button> </div> </div> </fieldset> </form> </div> </pc-panel-load> <button class="close-button" aria-label="Close reveal" type="button" ng-click="vm.close()"><i class="icon-close"></i></button>'),t.put("/app/customers/sites/contacts/pcAddEditContactModal.template.html",'<pc-panel-load is-loaded="vm.isLoaded"> <div ng-if="vm.isLoaded" class="overlay-content form"> <div class="row"> <div class="small-12 columns"> <h1>{{vm.isInAddMode ? \'Add\' : \'Edit\'}} Contact</h1> </div> </div> <div ng-show="vm.error" class="alert callout" data-closable> {{vm.error}} </div> <form name="vm.form" ng-submit="vm.form.$valid && vm.submit()" novalidate> <fieldset ng-disabled="vm.isSaving"> <div class="row"> <div class="small-6 columns"> <div pc-validate> <label>First Name</label> <input type="text" name="firstName" ng-model="vm.contact.firstName" required pc-autofocus> </div> <div pc-validate> <label>Last Name</label> <input type="text" name="lastName" required ng-model="vm.contact.lastName"> </div> <div ng-if="vm.isInAddMode" pc-validate> <label>Contact Type</label> <pc-dropdown ng-model="vm.contact.parentGroupUuid" options="vm.parents" name="parentGroupUuid" required="true" form="vm.form"> </pc-dropdown> </div> <div> <label>Title</label> <input type="text" name="title" ng-model="vm.contact.title"> </div> <div pc-validate> <label>Email Address</label> <input type="email" name="email" ng-model="vm.contact.email" required> </div> <div pc-validate> <label>Email Format</label> <pc-dropdown ng-model="vm.contact.emailFormat" options="vm.emailFormats" name="emailFormat" required="true" form="vm.form"> </pc-dropdown> </div> </div> <div class="small-6 columns"> <div> <label>Work Phone</label> <input type="text" ui-mask="(999) 999-9999" name="workPhone" ng-model="vm.contact.workPhone"> </div> <div> <label>Work Extension</label> <input type="text" name="extension" ng-model="vm.contact.extension"> </div> <div> <label>Mobile Phone</label> <input type="text" ui-mask="(999) 999-9999" name="mobilePhone" ng-model="vm.contact.mobilePhone"> </div> <div pc-validate> <label>Wireless Carrier</label> <pc-dropdown ng-model="vm.contact.wirelessCarrierId" options="vm.wirelessCarriers" name="wirelessCarrierId" ng-required="vm.contact.mobilePhone" form="vm.form"> </pc-dropdown> </div> <div pc-validate> <label>Notification Preference</label> <pc-dropdown ng-model="vm.contact.notificationPreference" options="vm.notificationPreferences" name="notificationPreference" required="true" form="vm.form"> </pc-dropdown> </div> </div> </div> <div class="row"> <div class="small-12 columns"> <button class="hollow button" type="submit" pc-busy-button="vm.isSaving"> <span ng-if="!vm.isSaving">{{vm.isInAddMode ? \'Add\' : \'Save\'}} Contact</span> <span ng-if="vm.isSaving">Saving</span> </button> </div> </div> </fieldset> </form> </div> </pc-panel-load> <button class="close-button" aria-label="Close reveal" type="button" ng-click="vm.modalInstance.dismiss()"><i class="icon-close"></i></button>'),t.put("/app/customers/sites/contacts/pcSiteContacts.template.html",'<pc-panel-load is-loaded="vm.isLoaded"> <section class="title-bar"> <div class="left"> <h1>Contacts</h1> <div class="counter">{{vm.totalSiteContacts + vm.totalCustomerContacts}}</div> </div> <div class="float-right"> <button class="hollow button float-right" ng-click="vm.showAddContactModal()">Add Contact</button> </div> <pc-text-search class="float-right" to-lower="true" text-seperator="space" callback="vm.search($text)"> </pc-text-search> </section> <section ng-if="!vm.contacts.length"> <pc-empty-section ng-if="!vm.isFiltered" icon="icon-section-customers" title="No contacts defined" entity="Contacts" on-add="vm.showAddContactModal()" add-text="click here to add a contact" description="A contact is a way to track individuals at both the site and customer level who are directly or indirectly involved in the IoT platform"> </pc-empty-section> <pc-empty-section ng-if="vm.isFiltered" icon="icon-section-customers" title="No contacts match filter criteria" entity="Contacts"> </pc-empty-section> </section> <section ng-if="vm.contacts.length"> <div class="row small-collapse" infinite-scroll="vm.nextPage()" infinite-scroll-disabled="vm.isBusy"> <div class="small-12"> <table> <thead> <tr> <th>First Name</th> <th>Last Name</th> <th>Type</th> <th>Title</th> <th>Work Phone</th> <th>Mobile Phone</th> <th>Email</th> <th>&nbsp;</th> </tr> </thead> <tbody> <tr ng-repeat="contact in vm.contacts track by contact.id" height="50"> <td>{{contact.firstName}}</td> <td>{{contact.lastName}}</td> <td>{{contact.type}}</td> <td>{{contact.title}}</td> <td>{{contact.workPhone | pcPhoneNumber}}</td> <td>{{contact.mobilePhone | pcPhoneNumber}}</td> <td>{{contact.email}}</td> <th> <button class="hollow micro button float-right" ng-click="vm.showEditContactModal(contact)">Edit</button> </th> </tr> </tbody> </table> </div> </div> </section> </pc-panel-load>'),t.put("/app/customers/sites/layout/layout.template.html",'<section class="breadcrumb"> <pc-site-header site-uuid="vm.siteUuid" customer-uuid="vm.customerUuid"></pc-site-header> </section> <nav class="sidebar breadcrumb-pad"> <ul> <li><a ui-sref="customers.sites.summary({siteUuid: vm.siteUuid})" ui-sref-active="active"><i class="icon-summary"></i>Summary</a></li> <li><a ui-sref="customers.sites.contacts({siteUuid: vm.siteUuid})" ui-sref-active="active"><i class="icon-summary"></i>Contacts</a></li> </ul> </nav> <div class="content-holder sidebar-pad breadcrumb-pad"> <div ui-view></div> </div>'),t.put("/app/customers/sites/layout/pcSiteHeader.template.html",'<ul> <li class="back-arrow"><a ng-click="vm.back()"><i class="icon-arrow-left"></i></a></li> <li ng-if="vm.customer"> <a ui-sref="customers.summary({customerUuid:vm.customer.uuid})">{{vm.customer.name}}</a> </li> <li ng-if="vm.site"> <a ui-sref="customers.sites.summary({customerUuid:vm.customer.uuid, siteUuid:vm.site.uuid})">{{vm.site.name}}</a> </li> </ul>'),t.put("/app/customers/sites/summary/pcSiteBids.template.html",'<table> <thead> <tr> <th>Name</th> <th>Program Period</th> <th>Bid Hours</th> <th>Strategy</th> </tr> </thead> <tbody> <tr ng-if="!vm.siteBids.length"> <td colspan="4" class="text-center">No Bids Exist</td> </tr> <tr ng-repeat="bid in vm.siteBids track by bid.id" height="50"> <td>{{bid.programName}}</td> <td>{{bid.periodDescription}}</td> <td>{{bid.bidHourDescription}}</td> <td>{{bid.strategyName}}</td> </tr> </tbody> </table>'),t.put("/app/customers/sites/summary/pcSiteOptButton.template.html",'<pc-confirm-button button-class="hollow button" message="\'Are you sure you want to opt all equipment for this site \' + vm.which + \'?\'" yes-text="(vm.which === \'in\' ? \'Opt All Equipment In\' : \'Opt All Equipment Out\')" confirm-title="(vm.which === \'in\' ? \'Opt All Equipment In\' : \'Opt All Equipment Out\')" action="vm.click()" finished="vm.finished()" error="vm.error()"> <span ng-if="vm.working"> Opting {{vm.which}}... </span> <span ng-if="!vm.working"> {{vm.which}} </span> </pc-confirm-button>'),t.put("/app/customers/sites/summary/pcSiteReductionHistory.template.html",'<table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Start</th> <th>Stop</th> <th>Duration</th> </tr> </thead> <tbody> <tr ng-if="!vm.siteHistory.length"> <td colspan="5" class="text-center">No Reduction History Exists</td> </tr> <tr ng-repeat="history in vm.siteHistory | orderBy: \'history.endDateUtc\' :true track by history.uuid" height="50"> <td>{{history.programName || \'--\'}}</td> <td>{{history.eventType | pcCamelCaseToHuman}}</td> <td>{{history.startDateUtc | pcLocalTime: \'MMM D, h:mm a\'}}</td> <td>{{history.endDateUtc | pcLocalTime: \'MMM D, h:mm a\'}}</td> <td><pc-time-ticker time-from="history.startDateUtc" end-time="history.endDateUtc" incoming-time-format="YYYY-MM-DD h:mm:ss"></pc-time-ticker></td> </tr> </tbody> </table>'),t.put("/app/customers/sites/summary/pcSiteStrategies.template.html",'<table ng-if="vm.site"> <thead> <tr> <th>STRATEGY NAME</th> <th width="200"></th> </tr> </thead> <tbody> <tr ng-repeat="strategy in vm.strategies | orderBy: \'name\'" height="50"> <td>{{strategy.name}}</td> <td class="text-right"> <pc-group-activation group="vm.site" strategy="strategy" micro="true" inactive-text="Test"></pc-group-activation> </td> </tr> <tr ng-if="!vm.strategies.length"> <td colspan="4" class="text-center">No Strategies Defined</td> </tr> </tbody> </table>'),t.put("/app/customers/sites/summary/pcSiteSummary.template.html",'<pc-panel-load is-loaded="vm.isLoaded"> <section class="title-bar"> <div class="row"> <div class="small-3 columns"> <label>{{vm.customerName}}</label> <h1 class="small"> {{vm.site.name}} </h1> <div class="edit-action"> <i class="icon-edit" ng-click="vm.editSite()"></i> </div> <h2> {{vm.siteAddress}} </h2> </div> <div class="small-3 columns"> <label>Local Time</label> <h2 class="local-time"> {{vm.site.localTime}} </h2> <div class="utc-time">{{vm.site.localTimeUtc}}</div> </div> <div class="small-3 columns"></div> <div class="small-3 columns text-center"> <label>Opt Status</label> <h2> <pc-site-opt-button which="in" site-uuid="vm.site.uuid"></pc-site-opt-button> <pc-site-opt-button which="out" site-uuid="vm.site.uuid"></pc-site-opt-button> </h2> </div> </div> </section> <section> <div class="row"> <div class="small-9"> <div class="row"> <div class="small-6 columns"> <h4 class="section-header">Configured Strategies</h4> <pc-site-strategies site-uuid="vm.siteUuid" loaded="vm.siteStrategiesLoaded()"></pc-site-strategies> </div> <div class="small-6 columns"> <h4 class="section-header">Enrolled Bids</h4> <pc-site-bids site-uuid="vm.siteUuid" loaded="vm.siteBidsLoaded()"></pc-site-bids> </div> <div class="small-12 columns"> <h4 class="section-header">Reduction History</h4> <pc-site-reduction-history site-uuid="vm.siteUuid" loaded="vm.siteReductionHistoryLoaded()"></pc-site-reduction-history> </div> </div> </div> <div class="small-3 columns"> <pc-status-arcs metrics="vm.site.metrics" is-horizontal="false"></pc-status-arcs> </div> </div> </section> </pc-panel-load>')}]);
"use strict";!function(){function t(t){t.state("curtailments",{url:"/curtailments/:programId","abstract":!0,controller:["programId",function(t){var r=this;r.programId=t}],controllerAs:"vm",resolve:{programId:["$stateParams",function(t){return t.programId}]},templateUrl:"/app/curtailments/layout/layout.template.html"}),t.state("curtailments.dashboard",{url:"^/curtailments",views:{"@":{template:"<pc-curtailment-dashboard></pc-curtailment-dashboard>"}}}),t.state("curtailments.summary",{url:"/summary",template:'<pc-curtailment-summary program-id="$resolve.programId"></pc-curtailment-summary>'})}t.$inject=["$stateProvider"],window.app.config(t)}();
"use strict";!function(){function t(t){t.state("customers",{url:"/customers/:uuid","abstract":!0,controller:["customerUuid",function(t){var s=this;s.customerUuid=t}],controllerAs:"vm",resolve:{customerUuid:["$stateParams",function(t){return t.uuid}]},template:"<ui-view></ui-view>"}),t.state("customers.dashboard",{url:"^/customers",views:{"@":{template:"<pc-customer-dashboard></pc-customer-dashboard>"}}}),t.state("customers.summary",{url:"/summary",views:{"@":{template:'<pc-customer-summary customer-uuid="$resolve.customerUuid"></pc-customer-summary>'}}}),t.state("customers.sites",{url:"/sites/:siteUuid","abstract":!0,controller:["siteUuid","customerUuid",function(t,s){var e=this;e.siteUuid=t,e.customerUuid=s}],controllerAs:"vm",resolve:{siteUuid:["$stateParams",function(t){return t.siteUuid}]},templateUrl:"/app/customers/sites/layout/layout.template.html"}),t.state("customers.sites.summary",{url:"/summary",template:"<pc-site-summary site-uuid=$resolve.siteUuid customer-uuid=$resolve.customerUuid></pc-site-summary>"}),t.state("customers.sites.contacts",{url:"/contacts",template:"<pc-site-contacts site-uuid=$resolve.siteUuid customer-uuid=$resolve.customerUuid></pc-site-contacts>"})}t.$inject=["$stateProvider"],window.app.config(t)}();
"use strict";window.PowerConnect=window.PowerConnect||{},function(){window.PowerConnect.GroupEvents={deleted:"groups.deleted",deactivated:"groups.deactivated",activated:"groups.activated"},window.PowerConnect.GroupScheduleEvents={deleted:"groupSchedules.deleted"}}();
"use strict";!function(){function u(u){u.state("groups",{url:"/groups/:uuid","abstract":!0,templateUrl:"/app/groups/layout/layout.template.html",controller:["groupUuid",function(u){var r=this;r.groupUuid=u}],controllerAs:"vm",resolve:{groupUuid:["$stateParams",function(u){return u.uuid}]}}),u.state("groups.dashboard",{url:"^/groups",views:{"@":{template:"<pc-group-dashboard></pc-group-dashboard>"}}}),u.state("groups.summary",{url:"/summary",template:'<pc-group-summary group-uuid="$resolve.groupUuid"></pc-group-summary>'}),u.state("groups.membership",{url:"/membership",template:'<pc-group-membership group-uuid="$resolve.groupUuid"></pc-group-membership>'}),u.state("groups.activity",{url:"/activity",template:'<pc-group-activity group-uuid="$resolve.groupUuid"></pc-group-activity>'}),u.state("groups.schedule",{url:"/schedule",template:'<pc-group-schedules group-uuid="$resolve.groupUuid"></pc-group-schedules>'})}u.$inject=["$stateProvider"],window.app.config(u)}();
"use strict";!function(){function t(t,e,o){function i(t,e){e.uuid===r.groupUuid&&n()}function n(){var o="Groups/"+r.groupUuid+"/Activity?$select=id,activityType,description,sourceId,timestampUtc&$top=5",i=e.getRefreshClientForComponent(r);i.poll(o,3e4)["catch"](function(e){return t.error({message:"Failed to retrieve group activity",error:e}),Rx.Observable.empty()}).subscribe(function(t){t&&(r.groupActivity=t.data.result),r.loaded&&r.loaded()})}var r=this,c=void 0,p=void 0;r.$onInit=function(){n(),c=o.$on(window.PowerConnect.GroupEvents.activated,i),p=o.$on(window.PowerConnect.GroupEvents.deactivated,i)},r.$onDestroy=function(){c(),p()}}t.$inject=["pcAlert","pcApiClient","$rootScope"],window.app.component("pcRecentGroupActivity",{templateUrl:"/app/groups/pcRecentGroupActivity.template.html",controller:t,controllerAs:"vm",bindings:{groupUuid:"<",loaded:"&?"}})}();
"use strict";!function(){function t(t,e,o,n){function a(){var t=o.getToState();return!(null==t||t.data&&t.data.hideHeader)}function i(){e.logout(),t.go("login",{dontRedirect:!0})}var c=this;c.isVisible=a,c.logout=i,c.config=n}t.$inject=["$state","pcOauth","pcRouteState","pcConfig"],window.app.component("pcHeader",{bindings:{},templateUrl:"/app/layout/pcHeader.template.html",controller:t,controllerAs:"vm"})}();
"use strict";!function(){function e(e){function t(){l.geocode({address:o.geocodeAddress},function(t,l){"OK"===l?o.geocodeResult=JSON.stringify(t[0].geometry.location):o.geocodeResult=l,e.$apply()})}var o=this,l=new google.maps.Geocoder;o.geocode=t,o.markers=[{position:{lat:-25.363,lng:131.044},title:"Site 1",label:"1",info:"I'm a great site"},{position:{lat:-24.363,lng:133.044},title:"Site 2",label:"2",info:"I'm a good site"},{position:{lat:-27.363,lng:129.044},title:"Site 3",label:"3",info:"I'm an average site"},{position:{lat:-24.2,lng:131.8},title:"Site 4",label:"4",info:"I'm a bad site"}]}e.$inject=["$scope"],window.app.component("mapExample",{templateUrl:"/app/mapExample/mapExample.template.html",controller:e,controllerAs:"vm"})}();
"use strict";!function(){function a(a){a.state("map",{url:"/map","abstract":!0,templateUrl:"/app/mapExample/layout.template.html"}),a.state("map.example",{url:"/example",template:"<map-example></map-example>"})}a.$inject=["$stateProvider"],window.app.config(a)}();
"use strict";!function(){function t(t,o,e,r){function n(){i.error=null,i.submitting=!0,i.buttonText="Resetting Password";var r=e.resetPasswordUrl||t.protocol()+"//"+t.host();o.post("Users/"+i.email+"/ForgotPassword",{appName:e.appName,returnUrl:r}).then(s(function(){i.submitted=!0}))["catch"](s(function(){i.error="There was a problem completing your request.\nPlease try again",i.buttonText="Reset Password",i.submitting=!1}))}function s(t){return function(){r(t,1e3)}}var i=this;i.email=null,i.error=null,i.submitting=!1,i.submitted=!1,i.buttonText="Reset Password",i.submit=n}t.$inject=["$location","pcApiClient","pcConfig","$timeout"],window.app.component("pcForgotPasswordForm",{bindings:{},templateUrl:"/app/security/pcForgotPasswordForm.template.html",controller:t,controllerAs:"vm"})}();
"use strict";!function(){function e(e,r,n,o,t){function i(){n.profile.loggedIn&&!t.dontRedirect?e.go(o.homeRoute):n.profile.rememberMe&&""!==n.username&&(l.username=n.profile.username,l.rememberMe=n.profile.rememberMe)}function a(){l.error=null,l.loginText="Signing In",l.loggingIn=!0,r.login(l.username,l.password,l.rememberMe).then(function(){l.password="",e.go(o.homeRoute)})["catch"](function(e){null!==e.data&&angular.isDefined(e.data.error)?"invalid_grant"===e.data.error?l.error="Invalid Username/Password":-1!==e.data.error.indexOf("does not have access")?l.error="Access to application denied":l.error=e.data.error:l.error="Server error. Please try again"})["finally"](function(){l.loginText="Sign In",l.loggingIn=!1})}var l=this;l.username=null,l.password=null,l.rememberMe=!1,l.error=null,l.loggingIn=!1,l.loginText="Sign In",l.$onInit=i,l.submit=a}e.$inject=["$state","pcOauth","pcCurrentUser","pcConfig","$stateParams"],window.app.component("pcLoginForm",{bindings:{},templateUrl:"/app/security/pcLoginForm.template.html",controller:e,controllerAs:"vm"})}();
"use strict";!function(){function e(e,t,n){function o(){var n=t.search();r.username=n.username,r.resetToken=n.resetToken,r.username&&r.resetToken||e.go("login")}function s(){r.error=null,r.submitting=!0,r.buttonText="submitting",n.post("Users/"+r.username+"/ResetPassword",{token:r.resetToken,password:r.password}).then(function(){e.go("login")})["catch"](function(){r.error="There was a problem completing your request.\nPlease try again"})["finally"](function(){r.submitting=!1,r.buttonText="Submit"})}var r=this;r.password=null,r.confirmPassword=null,r.username=null,r.resetToken=null,r.error=null,r.submitting=!1,r.buttonText="Submit",r.submit=s,r.$onInit=o}e.$inject=["$state","$location","pcApiClient"],window.app.component("pcResetPasswordForm",{bindings:{},templateUrl:"/app/security/pcResetPasswordForm.template.html",controller:e,controllerAs:"vm"})}();
"use strict";!function(){function o(o){o.state("login",{url:"/login",data:{allowAnonymous:!0,bodyClass:"account",hideHeader:!0},template:"<pc-login-form></pc-login-form>",params:{dontRedirect:!1}}).state("resetPassword",{url:"/reset-password",data:{allowAnonymous:!0,bodyClass:"account",hideHeader:!0},template:"<pc-reset-password-form></pc-reset-password-form>"}).state("forgotPassword",{url:"/forgot-password",data:{allowAnonymous:!0,bodyClass:"account",hideHeader:!0},template:"<pc-forgot-password-form></pc-forgot-password-form>"}).state("changePassword",{url:"/change-password",data:{allowAnonymous:!0,bodyClass:"account"},template:"<pc-change-password-form></pc-change-password-form>"})}window.app.config(["$stateProvider",o])}();
"use strict";!function(){function e(){return{scope:{resultObject:"=pcAddressAutocomplete",biasOnUsersLocation:"=?",biasOnLocation:"=?"},link:function(e,n){e.$on("$destroy",t);var a=new google.maps.places.Autocomplete(angular.element(n)[0],{types:["geocode"]});if(e.biasOnUsersLocation&&navigator.geolocation)navigator.geolocation.getCurrentPosition(function(e){var o={lat:e.coords.latitude,lng:e.coords.longitude},t=new google.maps.Circle({center:o,radius:e.coords.accuracy});a.setBounds(t.getBounds())});else if(e.biasOnLocation){var i=new google.maps.Circle({center:e.biasOnLocation,radius:8e3});a.setBounds(i.getBounds())}a.addListener("place_changed",function(){var t=a.getPlace(),n=o(t,"street_number"),i=o(t,"route"),s=n&&i?n+" "+i:n?n:i?i:void 0;e.resultObject={address1:s,city:o(t,"locality"),state:o(t,"administrative_area_level_1","short_name"),zip:o(t,"postal_code"),position:t.geometry.location.toJSON()},e.$apply()})}}}function o(e,o,t){t||(t="long_name");var n=_.find(e.address_components,function(e){var t=_.indexOf(e.types,o)>-1;return t});return n?n[t]:void 0}function t(){var e=document.getElementsByClassName("pac-container");e&&_.forEach(e,function(e){e.parentNode.removeChild(e)})}window.app.directive("pcAddressAutocomplete",e)}();
"use strict";!function(){function e(e,n,t,i,o){function r(){l.confirmed=l.confirmed||function(){},l.finished=l.finished||function(){},l.error=l.error||function(){},l.stateChangeDelayMilliseconds=l.stateChangeDelayMilliseconds||2e3}function s(){return l.skipConfirm?void a():void t.openConfirmation({message:l.message||"Are you sure?",yesText:l.yesText||"Yes",title:l.confirmTitle||"Confirm"}).result.then(function(){a()})}function a(){l.working=!0;var e=(new Date).getTime();l.action().then(function(){o(function(){l.finished(),l.working=!1},c(e))})["catch"](function(n){o(function(){l.error(),i.error({message:n&&n.data&&n.data.message?n.data.message:l.failedAlertMessage||"An error occurred"}),l.working=!1},c(e))})}function c(e){var n=(new Date).getTime(),t=l.stateChangeDelayMilliseconds-(n-e);return t>0?t:0}var l=this;l.click=s,l.$onInit=r}e.$inject=["pcApiClient","$rootScope","pcModal","pcAlert","$timeout"],window.app.component("pcConfirmButton",{bindings:{buttonClass:"@?",buttonNgClass:"<?",message:"<?",yesText:"<?",confirmTitle:"<?",failedAlertMessage:"@?",skipConfirm:"<?",action:"&",finished:"&?",error:"&?",stateChangeDelayMilliseconds:"<?"},templateUrl:"/app/shared/pcConfirmButton.template.html",controller:e,controllerAs:"vm",transclude:!0})}();
"use strict";!function(){function e(e,o){function n(){l.required=!!l.required,t(),angular.element(e[0].body).on("click",function(e){l.showMenu=!1,o.$apply(),e.stopPropagation()})}function i(e){l.model=e.value,l.showMenu=!1,t()}function t(){if(!l.model){var e=_.find(l.options,function(e){return!e.value});if(e)return void(l.selectedDisplay=e.display)}var o=_.find(l.options,{value:l.model});return o?void(l.selectedDisplay=o.display):void(l.selectedDisplay=l.model)}var l=this;l.showMenu=!1,l.$onInit=n,l.select=i}e.$inject=["$document","$scope"],window.app.component("pcDropdown",{templateUrl:"/app/shared/pcDropdown.template.html",controllerAs:"vm",controller:e,bindings:{model:"=ngModel",options:"<",form:"<?",required:"@?",name:"@?"}})}();
"use strict";!function(){window.app.component("pcEmptySection",{templateUrl:"/app/shared/pcEmptySection.template.html",controllerAs:"vm",bindings:{description:"@",title:"@",addText:"@",icon:"@",onAdd:"&"}})}();
"use strict";!function(){function e(e){function o(){if(i.markers&&i.markers.length){_.each(l,function(e){e.setMap(null)});var e=new google.maps.LatLngBounds;_.each(i.markers,function(o){var a=new google.maps.Marker({position:o.position,title:o.title,map:t,label:o.label});l.push(a),e.extend(a.getPosition()),a.addListener("click",function(){n(a,o.info)})}),t.fitBounds(e),google.maps.event.addListenerOnce(t,"idle",function(){t.getZoom()>i.maxZoom&&t.setZoom(i.maxZoom)}),google.maps.event.trigger(t,"resize")}}function n(e,o){a&&a.close(),a=new google.maps.InfoWindow({content:'<div class="info"><h2>Information:</h2><p>'+o+"</p></div>"}),a.open(t,e)}var t,a,i=this,l=[];i.maxZoom=i.maxZoom||16,t=new google.maps.Map(document.getElementById("map"),{center:{lat:39.0997265,lng:-94.57856670000001},zoom:4,styles:[{featureType:"all",elementType:"all",stylers:[{invert_lightness:!0},{saturation:10},{lightness:30},{gamma:.5},{hue:"#435158"}]}]}),e.$watchCollection("vm.markers",function(){o()})}e.$inject=["$scope"],window.app.component("pcMap",{bindings:{markers:"<",maxZoom:"@?"},templateUrl:"/app/shared/pcMap.template.html",controller:e,controllerAs:"vm"})}();
"use strict";!function(){function t(){}window.app.component("pcStatusArcs",{bindings:{metrics:"<",isHorizontal:"<"},templateUrl:"/app/shared/pcStatusArcs.template.html",controller:t,controllerAs:"vm"})}();
"use strict";!function(){function e(e){function n(){T.allTagsValid=!0,void 0===T.showList&&(T.showList=!0),void 0===T.icon&&(T.icon="icon-tag"),void 0===T.allowNewTags&&(T.allowNewTags=!1),T.onTagSelected||(T.onTagSelected=function(){}),T.onTagRemoved||(T.onTagRemoved=function(){}),T.onTagsChanged||(T.onTagsChanged=function(){})}function a(e){var n;if(e.indexOf(":")>0){var a=e.split(":");if(2===a.length)return n=_.find(T.allTags,{name:a[0]}),{name:a[0],value:a[1],kind:n&&n.kind||"unknown"}}return n=_.find(T.allTags,{name:e}),{name:e,kind:n&&n.kind||"unknown"}}function t(e){if(T.allTagsValid=i(e),T.allTagsValid){if(!o(e)&&!e.value)return r(e),T.uiSelectCtrl.searchInput[0].value=e.name+":",void T.uiSelectCtrl.searchInput[0].focus();if(_.remove(T.model,function(n){return n!==e&&n.name===e.name}),_.remove(T.displayedTags,function(n){return n!==e&&n.name===e.name}),T.showList&&!T.allowNewTags&&!_.some(T.allTags,{name:e.name}))return void r(e);T.model.push(e),T.onTagSelected({$tag:e}),T.onTagsChanged({$tags:T.model})}}function o(e){var n=_.find(T.allTags,{name:e.name});return n?"Marker"===n.kind:!0}function i(e){var n=!l(e),a=e.name.length<2,t=/\s/.test(e.name);return n||a||t?(r(e),T.uiSelectCtrl.searchInput[0].value=e.name,T.uiSelectCtrl.searchInput[0].focus(),!1):!0}function l(e){if(!T.tagNameRegex)return!0;var n=new RegExp(T.tagNameRegex);return n.test(e.name)}function r(e){_.remove(T.model,e),_.remove(T.displayedTags,e)}function s(e){_.remove(T.model,e),T.filteredTags=[],T.onTagRemoved({$tag:e}),T.onTagsChanged({$tags:T.model})}function c(){T.showTagList=!T.showTagList}function d(){T.showTagList=!1}function g(e){_.includes(T.model,e)||(T.displayedTags.push(e),t(e),"Marker"!==e.kind&&(T.showTagList=!1))}function u(e){return!T.showList||e.length<2?[]:(e=e.toLowerCase(),void(T.filteredTags=_(T.allTags).differenceWith(v,function(e,n){return e.name===n}).filter(function(n){return-1!==n.name.toLowerCase().indexOf(e)}).value()))}function m(e){return e.value?e.name+":"+e.value:e.name}function f(e){return _.differenceWith(e,v,function(e,n){return e.name===n})}var T=this,v=["lastActiveUtc","description","isPrivate","lastStartedBy","thingsActivated","isActive","tempHis","startedAtUtc"];T.showTagList=!1,T.filteredTags=[],T.displayedTags=[],T.tagEntered=t,T.tagRemoved=s,T.toggleTagList=c,T.addTag=g,T.transformTagToObject=a,T.searchTags=u,T.formatTag=m,T.hideTagList=d,T.$onInit=function(){n(),T.model=T.model||[],T.displayedTags=f(T.model),e.get("Tags?$top=1000&$select=name,kind").then(function(e){T.allTags=e.data.result})}}e.$inject=["pcApiClient"],window.app.component("pcTagSelector",{templateUrl:"/app/shared/pcTagSelector.template.html",controllerAs:"vm",controller:e,bindings:{model:"=ngModel",allowNewTags:"<?",onTagSelected:"&?",onTagRemoved:"&?",placeholder:"@?",onTagsChanged:"&?",autofocus:"@?",icon:"@?",showList:"<?",tagNameRegex:"@?"}}),window.app.directive("pcUiSelectControllerLocator",function(){return{require:["^pcTagSelector","uiSelect"],link:function(e,n,a,t){var o=t[0],i=t[1];o.uiSelectCtrl=i}}})}();
"use strict";!function(){function e(e){function t(){e.$watch(function(){return a.searchText},r)}function r(){if(null!==a.searchText){a.form.Text_Search.$rollbackViewValue();var e=[];""!==a.searchText&&(e=[a.toLower?_.toLower(a.searchText):a.searchText],a.textSeperator&&(e=_.split(e[0],"space"===a.textSeperator?" ":a.textSeperator))),a.callback({$text:e})}}var a=this;a.searchText=null,a.modelOptions={debounce:a.inputDelay||3e3},a.search=r,a.$onInit=t}e.$inject=["$scope"],window.app.component("pcTextSearch",{templateUrl:"/app/shared/pcTextSearch.template.html",controller:e,bindings:{callback:"&",inputDelay:"@?",toLower:"@?",textSeperator:"@?"},controllerAs:"vm"})}();
"use strict";!function(){function i(i){function e(){m.incomingTimeFormat||(m.incomingTimeFormat="M/D/YYYY h:mm:ss a"),null!==m.showSeconds&&void 0!==m.showSeconds||(m.showSeconds=!0),o(),m.endTime||(t=i(o,1e3))}function n(){t&&i.cancel(t)}function o(){var i=moment.utc(m.timeFrom,m.incomingTimeFormat).local(),e=m.endTime?moment.utc(m.endTime,m.incomingTimeFormat).local():moment(new Date).local();if(i>e)return void(m.timeDisplay="--");var n=moment.duration(e.diff(i)),o=n.days(),t=24*o+n.hours(),c=n.minutes(),s=n.seconds();m.timeDisplay="",t&&(m.timeDisplay+=t+"hr "),c&&(m.timeDisplay+=c+"min "),m.showSeconds&&(m.timeDisplay+=s+"sec")}var m=this,t=void 0;m.$onInit=e,m.$onDestroy=n}i.$inject=["$interval"],window.app.component("pcTimeTicker",{templateUrl:"/app/shared/pcTimeTicker.template.html",controllerAs:"vm",controller:i,bindings:{timeFrom:"<",endTime:"<?",showSeconds:"=?",incomingTimeFormat:"@?"}})}();
//# sourceMappingURL=app-50eded2bec.min.js.map
